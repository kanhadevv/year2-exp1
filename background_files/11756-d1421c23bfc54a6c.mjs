(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["11756"],{922464:function(e,t,n){var i,o;n.r(t),n.d(t,{default:()=>s});let l=(o=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="6e4bec581cece19361386d6124ddde90";let s=l},219077:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294);let o="undefined"!=typeof document?document:{},l=()=>{let e=(0,i.useRef)(),t=o.documentElement,{body:n}=o;return t?[()=>{if(!n||!n.style||e.current)return;let i=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight=`${o+i}px`,e.current=!0},()=>{n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},291211:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),o=n(514223),l=n(767415);class s extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="handleKeyDown",n=e=>{let{onClose:t,goToNext:n,goToPrevious:i}=this.props,s=e.keyCode||e.code;e.ctrlKey||e.metaKey||["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(s===o.Z.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.nP)("web_keydown_left")):s===o.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_right")):s===o.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t()))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let a=s},677650:function(e,t,n){n.d(t,{Z:()=>s});var i=n(883119),o=n(785893);let l=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function s({closeupWithinMasonryEnabled:e=!1,peekCloseupEnabled:t=!1,text:n}){let s=t?"200":"300";return n.split(new RegExp(/(#\S*)/)).map((t,n)=>{let a=`${n}-${t}`;return t.match(l)?(0,o.jsx)(i.xv,{color:"link",inline:!0,size:s,children:(0,o.jsx)(i.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},a):(0,o.jsx)(i.xv,{color:e?"subtle":void 0,inline:!0,size:s,children:t},a)})}},283220:function(e,t,n){n.d(t,{Z:()=>_});var i=n(667294),o=n(883119),l=n(677650),s=n(230201),a=n(133546),r=n(785893);let d=e=>e.replace(/\s+/g," "),c=e=>null!=e&&e>-1,m=(e,t)=>{let n=t.substr(0,e);return(e??0)-(n.length-d(n).length)},u=({color:e,mention:t,tagObjectId:n,tagType:i,textSize:l})=>{let{logContextEvent:a}=(0,s.v)();return(0,r.jsx)(o.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),a({event_type:101,element:11915,aux_data:{tag_id:n,tag_type:i}})},underline:"none",children:(0,r.jsx)(o.xv,{color:e,inline:!0,overflow:"normal",size:l,weight:"bold",children:t},t)},n)},_=({description:e,mentionLinkColor:t,shouldAdjustOffset:n,shouldMakeHashtagLinksFromText:s,textSize:d,userMentionTags:_})=>{let{closeupWithinMasonryEnabled:h,peekCloseupEnabled:g}=(0,a.x4)();if(0===_.length)return(0,r.jsx)(i.Fragment,{children:e});let p=0,x=[];return[..._].map(t=>n?{...t,offset:m(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>c(e.offset)&&c(e.length)).forEach(n=>{let i=n.offset??0,o=n.length??0,l=e.substr(p,i-p),s=e.substr(i,o);x.push(l),x.push((0,r.jsx)(u,{color:t,mention:s,tagObjectId:n.objectId,tagType:n.tagType,textSize:d})),p=i+o}),x.push(e.substr(p)),(s?x.flatMap(e=>"string"!=typeof e?e:(0,l.Z)({closeupWithinMasonryEnabled:h,peekCloseupEnabled:g,text:e})):x).reduce((e,t)=>(0,r.jsxs)(o.xv,{inline:!0,size:d,children:[e,t]}),null)}},21558:function(e,t,n){n.d(t,{N:()=>d,d:()=>r});var i=n(667294),o=n(786482),l=n(213491),s=n(785893);let{Provider:a,useHook:r}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,n]=(0,i.useState)(),[l,r]=(0,i.useState)(o.Zw.REPORT),[d,c]=(0,i.useState)(o.qb.STARTED),[m,u]=(0,i.useState)(),[_,h]=(0,i.useState)(),g=(0,i.useMemo)(()=>({flagReason:_,flow:l,status:d,selectedReason:m,modalTitle:t,setFlagReason:h,setFlow:r,setModalTitle:n,setStatus:c,setSelectedReason:u}),[t,l,d,m,_]);return(0,s.jsx)(a,{value:g,children:e})}},786482:function(e,t,n){n.d(t,{Vm:()=>l,Zw:()=>i,qb:()=>o});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},o={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},992998:function(e,t,n){n.d(t,{Z:()=>a});var i=n(883119),o=n(583875),l=n(138596),s=n(785893);let a=({isQuestion:e,name:t,size:n,src:a})=>{let r=(0,l.ZP)();return(0,s.jsxs)(i.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(o.qE,{name:t,size:n,src:a}),e&&(0,s.jsxs)(i.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},548686:function(e,t,n){n.d(t,{f:()=>a,v:()=>r});var i=n(667294),o=n(213491),l=n(785893);let{Provider:s,useHook:a}=(0,o.Z)("CommentMedia");function r({children:e}){let[t,n]=(0,i.useState)({height:150,width:150}),[o,a]=(0,i.useState)(null),[r,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),[u,_]=(0,i.useState)(""),h=()=>{a(null),d(null),m(null),_("")},g=(0,i.useCallback)(()=>h(),[]),p=(0,i.useMemo)(()=>({mediaDimensions:t,mediaId:r,mediaType:c,mediaUrl:u,photoFile:o,removeSelectedPhoto:g,setMediaDimensions:n,setMediaId:d,setMediaType:m,setMediaUrl:_,setPhotoFile:a}),[t,o,r,c,u,g]);return(0,l.jsx)(s,{value:p,children:e})}},453471:function(e,t,n){n.d(t,{Z:()=>ea});var i=n(883119),o=n(667294),l=n(581722),s=n(473727),a=n(219077),r=n(331128),d=n(21558),c=n(992998),m=n(138596),u=n(785893);let _=({color:e,isMarkedHelpful:t})=>{let n=(0,m.ZP)();return(0,u.jsx)(i.JO,{accessibilityLabel:n._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful'),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var h=n(333651),g=n(773655),p=n(583875);let x={helpfulStyle:{backgroundImage:`url(${h})`},lovedStyle:{backgroundImage:`url(${g})`}},y=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:n})=>{let o=14===e.reaction_type,l=1===e.reaction_type,s=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.Tg,{href:`/${e.user.username}/`,onBlur:n,onFocus:t,children:(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xu,{maxWidth:40,children:(0,u.jsx)(p.qE,{accessibilityLabel:"",name:s,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,u.jsx)(i.xu,{marginStart:2,maxWidth:80,children:(0,u.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:s})})]})}),(0,u.jsxs)(i.xu,{alignContent:"end",display:"flex",padding:2,children:[l&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:x.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),o&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:x.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var f=n(661376),b=n(462867),v=n(200619),j=n(601871);let I=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],P=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:n,isLovedByMe:l,isTry:s,maybeDismissReactionListWithDelay:a})=>{let r=(0,b.Z)(),d=(0,v.Z)(),c=(0,f.Z)({name:"ApiResource",options:{url:s?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:I}}),m=(0,j.lJ)(r,d)||("id"in r&&r.id?r.id:""),_=c.data;(l||n)&&_&&(_=_.filter(e=>e.user.id!==m),_=[{id:e,reaction_type:l?1:14,user:{first_name:(0,j.Fk)(r,d),full_name:(0,j.Fk)(r,d),id:m,image_medium_url:(0,j.gJ)(r,d),is_private_profile:!!r.isAuth&&!!r.isPrivateProfile,username:(0,j.Ms)(r,d)}},..._]);let h=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let{current:e}=h,t=()=>{c.isFetching||(c.isAtEnd?e?.removeEventListener("scroll",t):c.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[c]),(0,u.jsx)(i.xu,{ref:h,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:_?.map(e=>u.jsx(i.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:u.jsx(y,{handleReactionListHover:t,maybeDismissReactionListWithDelay:a,response:e})},e.id))})};var A=n(825605),C=n(632492);let w=(0,o.lazy)(()=>n.e("22979").then(n.bind(n,674565))),T="comment-reaction-container-entry-point",S=({commentId:e,dismissReactionList:t,helpfulCount:n,inCommentRepRedesignExp:l,isMarkedHelpfulByMe:s,isLovedByMe:a,isReactionListOpen:r,isTry:d,lovedCount:c,onReactionCountHover:_,onToggleHelpful:p,onToggleLove:x})=>{let y=(0,m.ZP)(),f=(0,o.useRef)(null),b=l?12:16,[v,j]=(0,o.useState)(!1),I=!1,S=(c||0)+(n||0);s&&a&&(S-=1);let L=e=>()=>{j(e)},E=()=>{I=!0,_()},k=()=>{I=!1,setTimeout(()=>{I||t()},1e3)},z=l?(0,u.jsxs)(i.xu,{"data-test-id":T,margin:-1.5,children:[v&&(0,u.jsx)(i.xu,{bottom:!0,marginBottom:4,position:"absolute",children:(0,u.jsx)(i.iP,{onTap:L(!1),children:(0,u.jsx)(A.Z,{children:(0,u.jsx)(w,{inCommentRepRedesignExp:l,onClickOutside:L(!1),setHelpful:p(!0),setLoved:x(!0)})})})}),(0,u.jsx)(i.hU,{accessibilityLabel:y._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),icon:"heart-outline",onClick:L(!0),size:"xs"})]}):(0,u.jsx)(i.xu,{"data-test-id":T,children:v?(0,u.jsx)(i.iP,{onMouseLeave:L(!1),onTap:L(!1),children:(0,u.jsx)(A.Z,{children:(0,u.jsx)(w,{setHelpful:p(!0),setLoved:x(!0)})})}):(0,u.jsx)(i.iP,{onMouseEnter:L(!0),onTap:L(!0),children:(0,u.jsx)(i.JO,{accessibilityLabel:y._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:b})})});return(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:l?1.5:1,column:0},children:[s||a?(0,u.jsx)(i.iP,{onTap:()=>{p(!1)(),x(!1)()},children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${a?g:h})`,backgroundSize:"contain"}},"data-test-id":a?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:b,width:b})}):z,S>0&&(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.iP,{onMouseEnter:E,onMouseLeave:k,onTap:E,children:(0,u.jsx)(i.xu,{ref:f,"data-test-id":"comment-reaction-container-reaction-count",display:l?"flex":void 0,children:(0,u.jsx)(i.xv,{color:l?"default":"subtle",inline:!0,size:l?"100":"200",weight:"bold",children:S})})}),r&&(0,u.jsx)(i.mh,{zIndex:C.lI,children:(0,u.jsx)(i.J2,{anchor:f.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,u.jsx)(i.iP,{onMouseEnter:E,onMouseLeave:k,children:(0,u.jsx)(P,{commentId:e,handleReactionListHover:E,isLovedByMe:a,isMarkedHelpfulByMe:s,isTry:d,maybeDismissReactionListWithDelay:k})})})})]})]})};var L=n(458465),E=n(812928),k=n(634395),z=n(351979),R=n(299136);function O(e){let{comment:t,commentTags:n,handlePhotoTap:l,inCommentRepRedesignExp:s,isDesktop:a,previewPhoto:r,taggedUsers:d}=e,[c,m]=(0,o.useState)(!1),{user:{username:_}}=t,h="text"in t?t.text:t.details,g=s?h:`${_} ${h}`,{height:p,url:x,width:y}=r||{},f=p??z.Vb,b=y??z.mu;return(0,u.jsxs)(i.xu,{children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:d,tags:n,text:g}),a||s?(0,u.jsx)(i.xu,{marginBottom:s?1.5:void 0,marginTop:s?.5:1,children:(0,u.jsx)(z.ZP,{canEnlargePhoto:a,isSelectedPhoto:!1,previewPhoto:r})}):(0,u.jsx)(i.xu,{height:150,marginBottom:a?4:2,marginTop:1,width:150,children:(0,u.jsx)(i.iP,{disabled:!a,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onTap:l,children:(0,u.jsx)(i.zd,{rounding:2,wash:!0,children:x&&(0,u.jsx)(i.Ee,{alt:x,color:"#efefef",naturalHeight:f,naturalWidth:b,src:x,children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{cursor:a?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${c?.4:0})`}},height:"100%",width:"100%"})},x)})})})]})}var D=n(351736),N=n(216975),M=n(264267),Z=n(438274);function U(e){let{shouldPreviewNewReply:t,featuredCommentId:n,parentId:s,parentType:a,inCommentRepRedesignExp:r,isDesktop:d,isLoading:c,isReadOnly:_,openOverflowMenu:h,replyingToCommentId:g,toggleHelpful:p,toggleLike:x,toggleReplyComposer:y,isORBACProfileManager:f,isVideo:b,storyPinDataId:v,pinId:j,closeupAttributionId:I,aggregatedPinDataId:P,closeupAttributionUsername:A,pinnerId:C,reactionListCommentId:w,showReactionListForComment:T,viewParameter:S}=e,L=(0,m.ZP)(),E=(0,D.vs)(),k=(0,M.lV)(),z=(0,l.v9)(({feeds:e})=>{let n=e[`${Z.Z.AGGREGATED_COMMENT_REPLIES}:${s}`]||[],i=e[`${Z.Z.AGGREGATED_COMMENTS}:${s}`]||[];return n.concat(i).reduceRight((e,{id:n})=>{let i=k[n];return i?t?[i,...e]:[...e,i]:e},[])}),[R,O]=(0,o.useState)(1),U=R===z.length;return(0,u.jsxs)(o.Fragment,{children:[z.length>1&&(0,u.jsx)(i.iP,{onTap:()=>{O(U?0:z.length)},children:(0,u.jsxs)(i.xu,{alignItems:r?"center":void 0,display:r?"flex":void 0,marginBottom:r?6:4,children:[r?(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:E?"white":"black"}},height:1,marginEnd:2,width:32}):(0,u.jsx)(i.xu,{display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,u.jsx)(i.xv,{color:r?"default":"subtle",inline:!0,size:"100",weight:"bold",children:U?L._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,N.nk)(L.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', z.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:z.length})})]})}),(0,u.jsx)(ea,{aggregatedPinDataId:P,closeupAttributionId:I,closeupAttributionUsername:A,comments:z.slice(0,R),commentsDisabled:!1,featuredCommentId:n,gapSize:r?6:2,inCommentRepRedesignExp:r,isDesktop:d,isLoading:c,isORBACProfileManager:f,isReadOnly:_,isVideo:b,openOverflowMenu:h,parentId:s,parentType:a,pinId:j,pinnerId:C,reactionListCommentId:w,replyingToCommentId:g,showReactionListForComment:T,storyPinDataId:v,toggleHelpful:p,toggleLike:x,toggleReplyComposer:y,userAvatarSize:"sm",viewParameter:S})]})}var F=n(230201),H=n(236269),B=n(924591),W=n(995514),G=n(424868),K=n(774838),$=n(233597),V=n(577356),q=n(107889),J=n(133546),Y=n(872003),Q=n(858254),X=n(426130),ee=n(826681),et=n(194442);let en=(0,o.lazy)(()=>n.e("8184").then(n.bind(n,265994))),ei=(0,et.Z)(()=>n.e("73842").then(n.bind(n,715490)),void 0,"app-packages-comment-CommentOverflowPopover"),eo=(0,o.lazy)(()=>n.e("90658").then(n.bind(n,167446)));function el(e){let t,n;let{aggregatedPinDataId:h,shouldPreviewNewReply:g,closeupAttributionId:p,closeupAttributionUsername:x,comment:y,featuredCommentId:f,inCommentRepRedesignExp:I,isDesktop:P,isReadOnly:C,isVideo:w,openOverflowMenu:T,toggleReplyComposer:z,parentId:Z,parentType:et=q.o.pin,pinId:el,storyPinDataId:es,replyingToCommentId:ea,showReactionListForComment:er,showTopCommentHeading:ed,toggleHelpful:ec,toggleLike:em,userAvatarSize:eu,isORBACProfileManager:e_,pinnerId:eh,reactionListCommentId:eg,viewParameter:ep}=e,{user:{id:ex,first_name:ey,id:ef,image_medium_url:eb,username:ev},id:ej,is_translatable:eI,comment_count:eP,helpful_count:eA,tags:eC=[]}=y,[ew,eT]=(0,o.useState)(!1),eS=ew&&y.translatedText||y.text,eL=!eI||""===y.translatedText,eE=!1,ek=0,ez=!1,eR=!!y.marked_helpful_by_me,eO=I?[]:[y.user],eD="",eN=new Date;"aggregatedcomment"===y.type?(eE=y.highlighted_by_pin_owner,ek=y.reaction_counts[1],ez=y.reaction_by_me>0,n=y?.media?.sticker,eO.push(...y.tagged_users),eD=I?eS??"":`${ev} ${eS??""}`,eN=new Date(y.created_at)):(ek=y.like_count,ez=y.liked_by_me,t=y.images[0]||{},eD=I?y.details:`${ev} ${y.details}`,eN=new Date(y.done_at));let eM=t?.["150x150"],eZ=t?.originals,eU=n||eZ,eF=(0,m.ZP)(),eH=(0,b.Z)(),{setIsMediaViewerOpen:eB,clientTrackingParams:eW}=(0,J.x4)(),{logContextEvent:eG}=(0,F.v)(),{country:eK,countryFromIp:e$,isBot:eV}=(0,K.B)(),{showToast:eq}=(0,V.F9)(),eJ=(0,l.I0)(),eY=(0,D.vs)(),eQ=(0,o.useRef)(null),eX=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eK),{COUNTRY_CODES:e0}=Q.a0.india||{},e1=e$&&e0&&e0.includes(e$),e2=!C||e1||eX,e6="aggregatedcomment"===y.type&&1===y.comment_tag,e9=e6&&!I,e3=(0,v.Z)(),e8=(0,j.lJ)(eH,e3),{nativeEngagementsHiddenForUser:e4}=(0,Y.G)(),{aggregatedCommentsHiddenForUser:e5,translateAggregatedComment:e7,updateAggregatedComment:te}=(0,M.nf)(),tt=(0,r.Z)(),tn="userdiditdata"===y.type,ti=(0,W.Z)(),to=eI&&!1,tl=P||I?eZ:eM,ts=(0,L.zs)(ev,eC,eY,I),ta={SHOW_TRANSLATION:eF._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:eF._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:eF._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},tr=(0,o.useRef)(ta.SHOW_TRANSLATION),[td,tc]=(0,a.Z)(),[tm,tu]=(0,o.useState)(!1),[t_,th]=(0,o.useState)(!1),[tg,tp]=(0,o.useState)(!1),[tx,ty]=(0,o.useState)(!1),[tf,tb]=(0,o.useState)(!1),[tv,tj]=(0,o.useState)(!1),[tI,tP]=(0,o.useState)(!1),[tA,tC]=(0,o.useState)(L.A9.NONE),tw=e=>()=>{th(e)};(0,o.useEffect)(()=>{to&&eG({event_type:10416,view_type:3,view_parameter:ep,component:"pin"===et?13696:13697})},[eG,et,to,ep]),(0,o.useEffect)(()=>{eP>0&&!eV&&eJ((0,$.U)("aggregatedcomment"===y.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:ej,redux_normalize_feed:!0}}))},[y.type,ej]);let tT=et.toLowerCase()===q.o.aggregatedComment.toLowerCase()||et.toLowerCase()===q.n.didIt.toLowerCase(),tS=y.user.first_name||"",tL=async({contentMarkdown:e,force:t,tags:n})=>{let i,o;ty(!0);let l=y.id;if(tT&&(i=et.toLowerCase()===q.n.didIt,l=Z,o=y.id),l)try{await tt({force:t,fromUnifiedComment:!0,objectType:tn||i?q.o.didIt:q.o.aggregatedComment,objectId:l,orbacSubjectId:e8,tags:n,text:e,replyToCommentId:o})}catch(t){let e=(0,H.Z)(t,"code");if([G.ky,G.LJ].includes(e??0)&&P)return tC(e===G.ky?L.A9.WARNING:L.A9.BLOCK),ty(!1),!1}return z&&z(void 0),ty(!1),!0},tE=async({contentMarkdown:e,force:t,tags:n})=>{tp(!0);try{tn?await eJ((0,X.IU)({id:y.id,details:e,pinId:el??"",image_signatures:"image_signatures"in y&&y.image_signatures?y.image_signatures:[]})):await te({commentId:y.id,force:t,orbacSubjectId:e8,tags:n,text:e})}catch(e){if([G.ky,G.LJ].includes((0,H.Z)(e,"code")??0)&&P)return tC(e.code===G.ky?L.A9.WARNING:L.A9.BLOCK),tp(!1),!1}return th(!1),tp(!1),!0},tk=()=>{P?tu(!tm):T&&T(y,{showIndiaLawReporting:!!e1,showNetzDGReporting:!!eX})},tz=e=>()=>{tu(e),tP(e),e||eG({component:14349,event_type:9408})},tR=()=>{tC(L.A9.NONE)},tO=e=>{e?tc():td(),eB(!e),tb(!e)},tD=()=>{ew||y.translatedText||e7(y.id),ew||tr.current!==ta.SHOW_TRANSLATION?ew&&tr.current===ta.SHOW_ORIGINAL&&eG({event_type:10418,view_type:3,view_parameter:ep,component:"pin"===et?13696:13697}):eG({event_type:10417,view_type:3,view_parameter:ep,component:"pin"===et?13696:13697}),eT(!ew)};(0,o.useEffect)(()=>{ew&&eL&&(eT(!ew),eq(({hideToast:e})=>(0,u.jsx)(B.Z,{onHide:e,text:eF._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[ew,eL]),ew?tr.current=y.translatedText?ta.SHOW_ORIGINAL:ta.TRANSLATING:tr.current=ta.SHOW_TRANSLATION;let tN=P?128:110,tM="aggregatedcomment"===y.type&&y.media?.sticker?.image_url&&(0,u.jsx)(i.xu,{height:tN,marginBottom:P?1:0,marginTop:1,width:tN,children:y.media?.sticker?.image_url&&(0,u.jsx)(i.Ee,{alt:y.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:y.media.sticker.image_url})});return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.$j,{accessibilityLabel:"Loading comment",show:tg}),!t_&&!tg&&(0,u.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(i.xu,{marginEnd:2,children:(0,u.jsx)(s.rU,{to:`/${ev}/`,children:(0,u.jsx)(c.Z,{isQuestion:e9,name:ey||ev||"",size:eu,src:eb??""})})}),(0,u.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,u.jsxs)(i.kC,{justifyContent:"between",children:[(0,u.jsx)(i.kC.Item,{minWidth:0,children:(0,u.jsxs)(i.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[I&&(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[y.user],tags:(0,L.zs)(ev,[],eY),text:ev}),e6&&!ed&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:eF._('asked a question \uD83D\uDC40', 'comment.question.label', 'label on a comment that is a question')})}),ed&&(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,u.jsx)(i.JO,{accessibilityLabel:(0,L.yW)(eF),color:"recommendation",icon:"star",size:12})}),(0,u.jsx)(i.xv,{color:"recommendation",size:"100",weight:"bold",children:(0,L._q)(eF)})]}),(e6||ed)&&eN&&(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:"\xb7"}),eN&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:ti(eN,!0)})})]}),tn?(0,u.jsx)(O,{comment:y,commentTags:ts,handlePhotoTap:()=>tO(tf),inCommentRepRedesignExp:I,isDesktop:P,previewPhoto:tl,taggedUsers:eO}):(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!I,lineHeight:I?"21px":void 0,marginBottom:I?"4px":void 0,shouldShowFirstNameOnly:!0,taggedUsers:eO,tags:ts,text:eD}),tM,to&&(0,u.jsx)(i.xu,{marginBottom:2,marginTop:2,children:(0,u.jsx)(i.iP,{onTap:()=>tD(),children:(0,u.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:tr.current})})})]})}),f===ej&&(0,u.jsx)(i.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eE&&(0,u.jsx)(i.xu,{marginBottom:I?1.5:3,marginTop:I?-.5:4,children:(0,u.jsx)(i.xv,{size:"100",children:(0,N.nk)(eF._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:x})})}),e2&&(0,u.jsxs)(i.xu,{alignItems:"center",display:"flex",height:P?25:"100%",justifyContent:"between",position:"relative",children:[(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:I?4:5,column:0},children:[!C&&!I&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",children:ti(eN,!0)})}),!C&&(0,u.jsx)(i.xu,{"data-test-id":"comment-reply-button-container",children:(0,u.jsx)(i.iP,{onTap:()=>{z&&z(y,Z,et)},children:(0,u.jsx)(i.xv,{color:I?"default":"subtle",size:I?"100":"200",weight:"bold",children:eF._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!C&&(P||I?(0,u.jsx)(S,{commentId:ej,dismissReactionList:()=>{er(void 0)},helpfulCount:eA,inCommentRepRedesignExp:I,isLovedByMe:ez,isMarkedHelpfulByMe:eR,isReactionListOpen:eg===ej,isTry:tn,lovedCount:ek,onReactionCountHover:()=>{er(ej),eG({event_type:9906,component:"pin"===et?13696:13697,view_type:3,view_parameter:ep})},onToggleHelpful:e=>()=>{eR!==e&&ec(ej,!e,tn)()},onToggleLove:e=>()=>{ez!==e&&em(ej,!e,tn)()}}):(0,u.jsxs)(i.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,u.jsx)(i.hU,{accessibilityLabel:eF._('Like', 'comment.button.like', 'like or unlike comment'),icon:"heart",iconColor:ez?"red":"gray",onClick:em(ej,ez,tn),size:"xs"}),ek>0&&(0,u.jsx)(i.xu,{"data-test-id":"love-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:ek})})]})),!("id"in eH&&eH.id===ef&&e6)&&(I?(0,u.jsx)(i.iP,{onTap:tk,children:(0,u.jsx)(i.JO,{accessibilityLabel:eF._('More', 'comment.button.more', 'see more options for comment'),color:eY?"light":"dark",icon:"ellipsis",size:12})}):(0,u.jsx)(i.xu,{ref:eQ,"data-test-id":"comment-more-options",children:(0,u.jsx)(i.hU,{accessibilityLabel:eF._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"gray",onClick:tk,size:"xs"})}))]}),!C&&!e_&&!P&&!I&&(0,u.jsx)(i.xu,{marginStart:6,children:(0,u.jsx)(i.iP,{fullWidth:!1,onTap:ec(ej,eR,tn),children:(0,u.jsxs)(i.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,u.jsx)(_,{color:"subtle",isMarkedHelpful:eR}),(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:eF._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful')}),eA>0&&(0,u.jsx)(i.xu,{"data-test-id":"helpful-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eA})})]})})})]})]})]}),P&&(0,u.jsxs)(o.Fragment,{children:[t_&&(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(E.Z,{clientTrackingParams:eW,commentWarningModalState:tA,dismissCommentWarningModal:tR,initialTags:y.tags,initialText:"aggregatedcomment"===y.type?y.text:y.details,isEditing:!0,objectType:q.o.aggregatedComment,onAddItem:tE,onCancelItem:tw(!1),postedPhoto:eU,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ep})}),ea===ej&&(0,u.jsx)(i.xu,{marginStart:tT?0:12,marginTop:3,children:(0,u.jsx)(E.Z,{commentWarningModalState:tA,dismissCommentWarningModal:tR,initialTags:tT?[{offset:0,object_id:ex,length:tS.length,tag_type:1}]:[],initialText:tT?`${tS} `:"",isReplying:!0,objectType:q.o.aggregatedComment,onAddItem:tL,onCancelItem:()=>{z&&z()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ep})})]}),(eP>0||tx)&&(0,u.jsx)(i.xu,{marginStart:I?10:12,marginTop:I?3:4,children:(0,u.jsx)(U,{aggregatedPinDataId:h,closeupAttributionId:p,closeupAttributionUsername:x,featuredCommentId:f,inCommentRepRedesignExp:I,isDesktop:P,isLoading:tx,isORBACProfileManager:e_,isReadOnly:C,isVideo:w,openOverflowMenu:T,parentId:ej,parentType:y.type,pinId:el,pinnerId:eh,reactionListCommentId:eg,replyingToCommentId:ea,shouldPreviewNewReply:g,showReactionListForComment:er,storyPinDataId:es,toggleHelpful:ec,toggleLike:em,toggleReplyComposer:z,viewParameter:ep})}),P&&e2&&(0,u.jsx)(ei,{aggregatedPinDataId:h,anchor:eQ.current,closeupAttributionId:p,comment:y,dismiss:e=>{tu(!1),e||eG({component:14349,event_type:10128})},isOpen:tm,isReply:tT,onEdit:tw(!0),onShowBlockUserModal:tz(!0),parentId:Z,pinId:el,pinnerId:eh,showIndiaLawReporting:!!e1,showNetzDGReporting:eX}),tv&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(d.N,{children:(0,u.jsx)(eo,{aggregatedPinDataId:h,didItDataId:ej,onClose:e=>()=>{tj(!e)},pinId:el??"",username:ev,users:[y.user]})})}),tI&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(en,{firstName:ey??"",onBlockUser:()=>{eJ((0,ee.Ge)({id:ex,orbacSubjectId:e8,blockSource:"comment",blockContext:ej,logContextEvent:eG})),e5(ex),e4(ex),eG({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eH.isAuth?eH.id:null}}),eG({component:14349,event_type:9407}),tP(!1),eq(({hideToast:e})=>(0,u.jsx)(B.Z,{onHide:e,text:(0,N.nk)(eF._('You\'ve blocked {{ username }}', 'comment.blockAuthor.toast', 'confirmation toast that shows after user blocks comment author'),{username:ev}).join("")}))},onClearModal:tz(!1)})}),!!eZ&&tf&&(0,u.jsx)(k.Z,{onDismiss:()=>tO(tf),photo:eZ})]})}var es=n(79271);function ea(e){let t;let{aggregatedPinDataId:n,shouldPreviewNewReply:o,comments:l,commentsDisabled:s,commentsScrollContainerRef:a,featuredCommentId:r,gapSize:d=6,inCommentRepRedesignExp:c,isDesktop:_,isLoaded:h=!1,isLoading:g=!1,isReadOnly:p,openOverflowMenu:x,toggleReplyComposer:y,parentId:f,parentType:v,replyingToCommentId:j,showingCloseupCommentModule:I,toggleHelpful:P,toggleLike:A,userAvatarSize:C,isORBACProfileManager:w,isVideo:T,storyPinDataId:S,pinId:L,closeupAttributionId:E,closeupAttributionUsername:k,pinnerId:z,showReactionListForComment:R,reactionListCommentId:O,viewParameter:D}=e,N=(0,m.ZP)(),M=(0,b.Z)(),{closeupWithinMasonryEnabled:Z,isCloseupRelatedPinsAboveTheFoldEnabled:U}=(0,J.x4)(),F=M.isAuth||_?N._('No comments yet! Add one to start the conversation.', 'commentThread.emptyState.message', 'comment thread empty state message'):N._('No comments yet!', 'commentThread.emptyState.unauthMessage', 'comment thread empty state message in LOP'),H=!!I&&!1;return(t=S?"story":T?"video":"pin",s)?(0,u.jsx)(i.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:Z?2:void 0,width:"100%",children:(0,u.jsx)(i.xv,{align:_?"start":"center",color:"subtle",children:N._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):l.length>0?(0,u.jsxs)(i.xu,{ref:a,dangerouslySetInlineStyle:{__style:{gap:`${4*d}px 0`,scrollbarGutter:Z?"stable":void 0,paddingTop:Z?"8px":void 0}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",maxHeight:Z?722:"100%",overflow:Z?"auto":void 0,width:"100%",children:[l.map((e,l)=>(0,u.jsx)(es.F,{componentType:"pin"===v?13696:13697,impressionAuxFields:{commentId:e.id,pinId:L,pinOwnerUserId:E,pinType:t,parentId:f,parentType:v,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:l,viewType:_?3:98,children:({impressionTrackerRef:t})=>(0,u.jsx)(i.xu,{ref:t,"data-test-id":"commentThread-comment",tabIndex:0,children:(0,u.jsx)(el,{aggregatedPinDataId:n,closeupAttributionId:E,closeupAttributionUsername:k,comment:e,featuredCommentId:r,inCommentRepRedesignExp:c,isDesktop:_,isORBACProfileManager:w,isReadOnly:p,isVideo:T,openOverflowMenu:x,parentId:f,parentType:v,pinId:L,pinnerId:z,reactionListCommentId:O,replyingToCommentId:j,shouldPreviewNewReply:o,showReactionListForComment:R,showTopCommentHeading:H&&0===l,storyPinDataId:S,toggleHelpful:P,toggleLike:A,toggleReplyComposer:y,userAvatarSize:C,viewParameter:D})})},e.id)),g&&(0,u.jsx)(i.$j,{accessibilityLabel:N._('Comments loading', ' - ', ' -- '),show:g})]}):(0,u.jsxs)(i.xu,{alignSelf:"center",width:"100%",children:[(0,u.jsx)(i.$j,{accessibilityLabel:N._('Comments loading', ' - ', ' -- '),show:g}),h&&!U&&(0,u.jsx)(i.xv,{align:_?"start":"center",color:"subtle",children:F})]})}},812928:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),o=n(548686),l=n(317109),s=n(785893);let a=(0,i.lazy)(()=>Promise.all([n.e("89558"),n.e("65393"),n.e("45474")]).then(n.bind(n,269936)));function r(e){return(0,s.jsx)(l.Z,{fallback:null,children:(0,s.jsx)(o.v,{children:(0,s.jsx)(a,{...e})})})}},634395:function(e,t,n){n.d(t,{Z:()=>r});var i=n(883119),o=n(291211),l=n(289935),s=n(138596),a=n(785893);function r({onDismiss:e,photo:t}){let n=(0,s.ZP)(),{height:r,url:d,width:c}=t,m=Math.min(r??936,936),u="100vh",_=n._('Close media viewer', 'comments.photo.mediaViewer.close', 'Close media viewer overlay');return(0,a.jsxs)(i.mh,{zIndex:l.b7,children:[(0,a.jsx)(i.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,a.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:u,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,a.jsx)(i.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,a.jsx)(i.hU,{accessibilityLabel:_,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,a.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:u,maxHeight:m,width:c,children:d&&(0,a.jsx)(i.Ee,{alt:d??"",fit:"contain",naturalHeight:r??1,naturalWidth:c??1,src:d},d)})]})}),(0,a.jsx)(o.Z,{onClose:e})]})}},351979:function(e,t,n){n.d(t,{Vb:()=>h,ZP:()=>x,mu:()=>g});var i=n(667294),o=n(883119),l=n(219077),s=n(458465),a=n(55806),r=n(634395),d=n(138596),c=n(774838),m=n(739405),u=n(133546),_=n(785893);let h=150,g=346,p=e=>new Promise((t,n)=>{let i=new Image;i.onload=()=>{t({width:i.width,height:i.height})},i.onerror=n,i.src=e});function x({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:n,previewPhoto:x,removeSelectedPhoto:y}){let f=(0,d.ZP)(),b=(0,m.HG)(),{isRTL:v}=(0,c.B)(),{setIsMediaViewerOpen:j}=(0,u.x4)(),[I,P]=(0,l.Z)(),[A,C]=(0,i.useState)(!1),[w,T]=(0,i.useState)(!1),[S,L]=(0,i.useState)(null),[E,k]=(0,i.useState)(s.WU),z=(0,a.Z)(x)?x?.url:x?.image_url;(0,i.useEffect)(()=>{(async()=>{z&&!(0,a.Z)(x)&&L(await p(z))})()},[z,x]);let R=(0,a.Z)(x)?x?.width:S?.width,O=(0,a.Z)(x)?x?.height:S?.height,D=R??0,N=O??0,M=z??"",Z=Math.min((t||(b?g:312))/D,(b?h:110)/N,1),U=f._('Remove photo', 'photoCommentPreview.removePhoto', 'Icon to remove the selected photo from the comment composer'),F=f._('Photo', 'photoCommentPreview.previewPhoto', 'Photo previewed as part of a comment'),H=e=>{e?P():I(),j(!e),C(!e)};return(0,_.jsxs)(o.xu,{height:Z*N,marginTop:n?3:0,position:"relative",width:Z*D,children:[(0,_.jsx)(o.iP,{disabled:!e,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onTap:()=>H(A),children:(0,_.jsx)(o.zd,{rounding:2,children:M&&(0,_.jsx)(o.Ee,{alt:F,color:E,naturalHeight:N,naturalWidth:D,onLoad:()=>{k(s.o),n&&URL.revokeObjectURL(M)},src:M,children:e&&(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${w?.4:0})`}},height:"100%",width:"100%"})},F)})}),n&&(0,_.jsx)(o.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:v,marginEnd:-3,marginTop:-3,position:"absolute",right:!v,top:!0,width:24,children:(0,_.jsx)(o.hU,{accessibilityLabel:U,bgColor:"lightGray",icon:"cancel",onClick:y,size:"xs"})}),A&&(0,_.jsx)(r.Z,{onDismiss:()=>H(A),photo:x})]})}},299136:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),o=n(883119),l=n(785893);let s=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:n,marginBottom:s,marginEnd:a,shouldShowFirstNameOnly:r,size:d,tags:c,taggedUsers:m,text:u})=>{let _=(0,i.useRef)(null),h=(e,t)=>(0,l.jsx)(o.xv,{inline:!0,overflow:"normal",size:d,children:(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t),g=(n,i,s,a)=>{let c=r||0===s&&t?m[s].first_name||m[s].username[0]:i;return(0,l.jsx)(o.xv,{color:n,inline:!0,overflow:"normal",size:d,weight:"bold",children:e?c:(0,l.jsx)(o.rU,{display:"inlineBlock",href:`/${m[s].username}`,underline:"hover",children:c})},a)};return(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:s}},children:(()=>{if(!c.length||!m||c.length!==m.length)return h(u,"1");let t=0,i=[];return c.forEach((e,n)=>{let o=u.substring(t,e.offset);t=e.offset+e.length;let l=u.substring(e.offset,t);i=i.concat(h(o,`${n}a`)).concat(g(e.color,l,n,`${n}b`))}),i=i.concat(h(u.substring(t),"2")),(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n}},display:r?"flex":void 0,marginEnd:a??3,position:"relative",children:(0,l.jsx)(o.xv,{ref:_,inline:!0,lineClamp:e?1:void 0,size:d,children:i})})})()})}},458465:function(e,t,n){n.d(t,{A9:()=>m,F1:()=>b,Ff:()=>f,G5:()=>v,G_:()=>y,LH:()=>l,Rv:()=>a,TJ:()=>d,WU:()=>_,_q:()=>A,i$:()=>h,iB:()=>o,mi:()=>j,mz:()=>x,o:()=>u,pW:()=>c,qJ:()=>C,sp:()=>I,uC:()=>s,xA:()=>r,yQ:()=>P,yW:()=>p,zs:()=>g});var i=n(696749);let o=48,l=56,s=500,a=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),r=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),d="comment_featured_ids",c="did_it_featured_ids",m={NONE:"none",WARNING:"warning",BLOCK:"block"},u="transparent",_="#efefef",h=(e,t)=>e?(0,i.Z)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin'),g=(e,t,n,i)=>{let o=t.map(t=>({...t,offset:(t.offset||0)+(i?0:e.length+1),color:"shopping"}));return i?o:[{offset:0,length:e.length,color:n?"light":"dark"},...o]},p=e=>e._('Insight heading icon', 'closeupCommentModuleHeading.icon', 'Icon displayed in the comment module heading'),x=e=>e._('Add one to start the conversation', 'closeup.commentThread.emptyState.message', 'Comment thread empty state message'),y=e=>e._('Post', 'commentComposer.button.post', 'Post new comment'),f=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),b=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted'),v=e=>e._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button'),j=e=>e._('Select a photo', 'photoModal.button.accessibilityLabel', 'Accessibility label for photo modal button'),I=e=>e._('Select a sticker', 'stickerTray.button.accessibilityLabel', 'Accessibility label for sticker tray button'),P=e=>e._('Text editor', 'EditorWithMentions.container', 'Tappable area for the editor container'),A=e=>e._('Top Comment', 'closeupCommentModuleHeading.heading.topComment', 'Top Comment heading for the comment module'),C=e=>[v(e),j(e),y(e),I(e),P(e)]},55806:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e?.url!==void 0},624333:function(e,t,n){n.d(t,{B:()=>I,Z:()=>C});var i,o=n(667294),l=n(581722);n(167912);var s=n(616550),a=n(883119),r=n(453471),d=n(907022),c=n(661376),m=n(739405),u=n(893957),_=n(462867),h=n(200619),g=n(601871),p=n(264267),x=n(107889),y=n(301527),f=n(426130),b=n(646239),v=n(157498),j=n(785893);let I=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:n,isDesktop:i,isReversed:o=!1,noCache:l=!1,orbacSubjectId:s=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:n,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:o,...s?{orbac_subject_id:s}:{}},noCache:l}),P=void 0!==i?i:i=n(922464),A=({aggregatedPinDataId:e,inCommentRepRedesignExp:t,shouldPreviewNewReply:n,closeupAttributionId:i,closeupAttributionUsername:d,commentsDisabled:P,hasComments:A,isReadOnly:C,pinId:w,isVideo:T,pinnerId:S,scrollContainer:L,setIsComposingNewComment:E=()=>{},showingCloseupCommentModule:k,storyPinDataId:z,viewParameter:R,toggleComposerForReply:O,openMwebOverflowMenu:D})=>{let{comment_id:N}=(0,s.UO)(),M=(0,l.I0)(),Z=(0,m.HG)(),U=(0,_.Z)(),F=(0,o.useRef)(A),H=(0,h.Z)(),B=(0,g.lJ)(U,H),W=(0,c.Z)(F.current&&e?I({aggregatedPinDataId:e,featuredCommentIds:N?[N]:[],isDesktop:Z}):null),{removeUnauthCommentPinId:G,unauthCommentPinId:K}=(0,y.C)(),$=(0,p.lV)(),{toggleAggregatedCommentHelpful:V,toggleAggregatedCommentLike:q}=(0,p.nf)(),J=(0,v.kW)(),Y=(0,l.v9)(t=>(0,b.Z)(t,{aggregatedPinDataId:e,aggregatedComments:$,users:J})),[Q,X]=(0,o.useState)(void 0),ee=()=>{E(!0)};return(0,u.Z)(()=>{!Z&&U.isAuth&&K&&w&&K===w&&(ee(),G())}),(0,o.useEffect)(()=>{let e=()=>{let t=!!L&&L.scrollTop+L.clientHeight+10>=L.scrollHeight;W&&!W.isFetching&&(W.isAtEnd?L?.removeEventListener("scroll",e):t&&W.fetchMore())};return L?.addEventListener("scroll",e),()=>{L?.removeEventListener("scroll",e)}},[W,L]),(0,j.jsx)(o.Fragment,{children:(0,j.jsx)(a.xu,{display:"flex",height:t&&0===Y.length?"100%":void 0,marginTop:Z?6:t?2:0,width:"100%",children:(0,j.jsx)(r.Z,{aggregatedPinDataId:e,closeupAttributionId:i,closeupAttributionUsername:d,comments:Y,commentsDisabled:P,inCommentRepRedesignExp:t,isDesktop:Z,isLoaded:W&&W.isLoaded||!A,isReadOnly:C,isVideo:T,openOverflowMenu:D,parentId:e??"",parentType:x.o.pin,pinId:w,pinnerId:S,reactionListCommentId:Q,shouldPreviewNewReply:n,showingCloseupCommentModule:k,showReactionListForComment:X,storyPinDataId:z,toggleHelpful:(e,t,n)=>()=>{n?M((0,f.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:B})):V({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:B})},toggleLike:(e,t,n)=>()=>{n?M((0,f.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:B})):q({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:B})},toggleReplyComposer:O,userAvatarSize:"sm",viewParameter:R})})})};function C({pinKey:e,...t}){let n=(0,d.Z)(P,e),i=(n?.aggregatedPinData?.commentCount||0)+(n?.aggregatedPinData?.didItData?.imagesCount||0);return(0,j.jsx)(A,{aggregatedPinDataId:n?.aggregatedPinData?.entityId,closeupAttributionId:n?.closeupAttribution?.entityId,closeupAttributionUsername:n?.closeupAttribution?.username,commentsDisabled:n?.commentsDisabled,disablePhotoCommentSelection:!!n?.doneByMe,hasComments:i>0&&!n?.commentsDisabled,isVideo:!!n?.videos?.videoList,pinId:n?.entityId,pinnerId:n?.pinner?.entityId,storyPinDataId:n?.storyPinData?.entityId,...t})}},858254:function(e,t,n){n.d(t,{C0:()=>i,ZU:()=>o,a0:()=>l});let i=["DMCA","Trademark","GDPR"],o=new Date(2024,0,1),l={test:{LAW:"test",DECIDER_KEY:"legal_webapp_takedown_form_test",COUNTRY_CODES:["US"],API:"/v3/legal/takedowns/test/",COMPLAINTS_OFFICE:!0,TRUSTED_FLAGGER:!1,RESTRICT_MULTIPLE_LAWS:!1,ALLOW_ANON_SUBMISSION:!1},turkey:{LAW:"turkey",DECIDER_KEY:"legal_webapp_takedown_form_turkey",COUNTRY_CODES:["TR"],API:"/v3/legal/takedowns/turkey/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!1,TRUSTED_FLAGGER:!1},dsa:{LAW:"dsa",DECIDER_KEY:"legal_webapp_takedown_form_dsa",COUNTRY_CODES:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"],API:"/v3/legal/takedowns/dsa/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!0},india:{LAW:"india",DECIDER_KEY:"legal_webapp_takedown_form_india",COUNTRY_CODES:["IN"],API:"/v3/legal/takedowns/india/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!1}}},646239:function(e,t,n){n.d(t,{Z:()=>l});var i=n(442279),o=n(438274);let l=(0,i.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${o.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??{},(e,t,n,i)=>{let o=new Set;return t?.map(({id:t,type:l})=>{if(o.has(t))return;o.add(t);let s="aggregatedcomment"===l.toLowerCase()?e[t]:n[t];if(!s)return;let a="user"in s&&("string"==typeof s.user?i[s.user]??{}:s.user??{});return{...s,user:a??{}}}).filter(e=>void 0!==e)||[]})},333651:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},773655:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/11756-d1421c23bfc54a6c.mjs.map