(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["14609"],{324510:function(e,a,n){var l,i,t,s,r,d,u,o,c,p,g,m;n.r(a),n.d(a,{default:()=>y});let _=(l=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],t={alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},s={alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null}],storageKey:null},u={alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d=[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"236x")'},g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:l,kind:"Fragment",metadata:null,name:"CloseupPageDesktopQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[t,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[s],storageKey:null},{args:null,kind:"FragmentSpread",name:"CloseupPageDesktop_pin"}],storageKey:null},r],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"CloseupPageDesktopQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[t,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[s,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},u,o={alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"474x")'},c={alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"564x")'},p={alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:d,storageKey:null}],storageKey:null},u,o,c,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[g],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:d,storageKey:null},m],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},m],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:d,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},m],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[r,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},m],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c7680559a748fd5ebaa6240c52c3c2526a2e98af3a7ba138ea02b012f2e1e478",metadata:{},name:"CloseupPageDesktopQuery",operationKind:"query",text:null}});_.hash="e7468ff73e618822b529aa9bcbecc941";let y=_;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let a=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[a]=e}}}(_.default||_)},908200:function(e,a,n){n.r(a),n.d(a,{default:()=>i});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupPageDesktop_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};l.hash="c1042c31d3fb15196a761c3174223961";let i=l},763538:function(e,a,n){n.d(a,{YS:()=>r,eF:()=>d,m_:()=>s});var l=n(465989),i=n(236269),t=n(767415);function s(e,a,n,i,s){let r=new URLSearchParams,d=a.reduce((e,a)=>{if(null!=a){let n=function(e){let a;try{a=decodeURIComponent(e)}catch(n){a=e}a.startsWith("http")?a.startsWith("http://")&&(a=a.replace("http://","https://")):a="https://"+a;try{return new URL(a).origin}catch(l){let n=a.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(n&&n.length>1)return n[1];return e}}(a);return e.add(n)}return e},new Set);r.append(l.NR.SOURCE_EVENT_ID,e??"0"),r.append(l.NR.DESTINATION,JSON.stringify([...d])),r.append(l.NR.EXPIRY,n?l.uV:l.ug),r.append(l.NR.PRIORITY,n?l.NR.CLICK_PRIORITY:l.NR.VIEW_PRIORITY),s&&r.append(l.NR.ADVERTISER_ID,s),i&&r.append(l.NR.CAMPAIGN_ID,i),r.append(l.NR.SOURCE_EVENT_TYPE,n?l.bC:l.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&r.append(l.NR.HOSTNAME,e)}catch(e){(0,t.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+r.toString()}async function r(e,a,n,l,r,d,u,o,c){let p;let{appType:g,osType:m}=d||{},_="",y="";if(["Pin","pinImpressions"].includes(e)&&a&&(l||o||c)){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:g,osType:m}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:g,osType:m}});return}_=s(n,[l,o,c],!1,r,u);try{y=new URL(window.location.href).hostname}catch(e){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(y&&"www.pinterest.com"!==y)document.createElement("img").setAttribute("attributionsrc",_),(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:g,osType:m,hostname:y}});else if(!(p=await window.fetch(_,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:g,osType:m}})}catch(e){(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,i.Z)(e,"name"),message:(0,i.Z)(e,"message"),appType:g,osType:m,hostname:y,responseStatus:p&&p.status}})}}else(0,t.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:g,osType:m}})}function d(e){if(e){let a=e.toLowerCase();if(a.includes("windows"))return"windows xp"===a?1:"windows vista"===a?2:"windows 7"===a?3:"windows 8"===a?4:12;if(a.includes("mac os"))return 5;if(a.includes("android"))return 7;if(a.includes("ios"))return 6;if(a.includes("ubuntu"))return 8;if(a.includes("chromium os"))return 13}return 0}},343669:function(e,a,n){n.d(a,{G6:()=>t,i7:()=>s,oi:()=>l,u$:()=>i,un:()=>d,vU:()=>r,w1:()=>u});let l=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),i=e=>e?e.includes("Chrome")?l.CHROME:e.includes("Safari")?l.SAFARI:e.includes("Firefox")?l.FIREFOX:e.includes("Opera")?l.OPERA:e.includes("IE")?l.IE:e.includes("Edge")?l.EDGE:l.OTHER:l.OTHER;function t(e){return i(e)===l.SAFARI}function s(e){return i(e)===l.CHROME}function r(e){return i(e)===l.FIREFOX}function d(e){return i(e)===l.EDGE}function u(e){return i(e)===l.IE}},671539:function(e,a,n){n.d(a,{j:()=>c,z:()=>p});var l=n(4533),i=n(343669),t=n(613567),s=n(774838),r=n(34550),d=n(865043),u=n(739405);let o=(e,a,n)=>{let l=(0,i.i7)(n.browserName??""),t=n.browserVersion?parseInt(n.browserVersion.split(".")[0],10):0;return l&&(e&&t>=122&&a("auth_dweb_google_fedcm_onetap_modal").anyEnabled||!e&&"android"===n.platform&&t>=122&&a("auth_mweb_google_fedcm_onetap_modal").anyEnabled)},c=e=>{let a=(0,u.HG)(),{checkExperiment:n}=(0,t.F)(),{userAgent:i}=(0,s.B)();return e.isAuth&&e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected&&!r.ZP.getItem(l.tr)&&o(a,n,i)},p=(e,a)=>{let n="desktop"===a?"dweb":"mweb",l=e.getMomentType();if("dismissed"===l){let a=e.getDismissedReason();(0,d.My)(`${n}.onetap_modal.dismissed.${a}`)}else(0,d.My)(`${n}.onetap_modal.${l}`)}},281213:function(e,a,n){n.d(a,{W:()=>o,r:()=>u});var l=n(667294),i=n(230201),t=n(213491),s=n(613567),r=n(785893);let{Provider:d,useHook:u}=(0,t.Z)("VideoPlayer");function o({children:e}){let{logContextEvent:a,logImpression:n}=(0,i.v)(),{checkExperiment:t}=(0,s.F)(),[u,o]=(0,l.useState)(!1),[c,p]=(0,l.useState)([]),[g,m]=(0,l.useState)([]),[_,y]=(0,l.useState)({}),h=t("web_ads_mrc_video_impression").anyEnabled,k=e=>{y(a=>({...a,[e]:!0}))},P=(0,l.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:a}=e.event_data.pinImpressions[0],n=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");h&&(a||n)&&p(a=>[...a,e].slice(-1e3))}},[h]),f=(0,l.useCallback)(e=>{18===e.eventType&&h&&m(a=>[...a,e].slice(-1e3))},[h]),S=e=>{let{time:a}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:a,renderDuration:0}]}}},v=e=>{if(e.eventData){let{time:a}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:a??0}}}return null};(0,l.useEffect)(()=>{let e=c.filter(e=>{let{pinIdStr:n}=e.event_data.pinImpressions[0];return!_[n]||!h||(a(S(e)),!1)});e.length!==c.length&&p(e)},[c,h,a,_]),(0,l.useEffect)(()=>{let e=g.filter(e=>{let a=e.eventData?.pinIdStr;if(!a)return!1;if(_[a]&&h){let a=v(e);return a&&n(a),!1}return!0});e.length!==g.length&&m(e)},[g,h,n,_]);let w=(0,l.useMemo)(()=>({captionsEnabled:u,logMrcVideoAdImpressionOnPlay:f,logMrcVideoAdEventOnPlay:P,setCaptionsEnabled:o,setVideoPlayed:k,videosPlayed:_}),[u,P,f,_]);return(0,r.jsx)(d,{value:w,children:e})}},446473:function(e,a,n){n.d(a,{A:()=>l});let l="socialPinLanding"},550946:function(e,a,n){n.d(a,{Z:()=>s});var l=n(27399),i=n(236269),t=n(271875);function s(){let{conversationCreate:e}=(0,t.Z)();return async a=>{let n;let t=l.Z.create("ConversationsResource",a);try{let a=(await t.callCreate()).resource_response.data;a&&(e(a),n=a)}catch(e){throw Error((0,i.Z)(e,"message"))}return n}}},2061:function(e,a,n){n.d(a,{Yg:()=>d,ib:()=>o,nF:()=>p,xX:()=>c});var l=n(613567),i=n(774838),t=n(739405),s=n(767415);let r=({checkExperiment:e})=>{let{group:a}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,n)=>(0,s.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a,...n}})}},d=()=>{let{isAuthenticated:e}=(0,i.B)(),a=(0,t.HG)(),{checkExperiment:n}=(0,l.F)();return e&&!a?r({checkExperiment:n}):{logStat:()=>{}}},u=0,o=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:n}=r({checkExperiment:e});(u+=1)<10&&n(`repin_${u}`)};function c({checkExperiment:e,isDesktop:a,isAuthenticated:n}){if(!n)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}{let{anyEnabled:a,group:n}=e("auth_mweb_graphql_pin_page");switch(n){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"enabled_and_impression_fix":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"SuspendOnMissingData",isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"only_related_pins_and_impression_fix":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!0,addRelatedPinsLatency:!1};case"should_render_with_missing_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingData",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"render_and_subscribe":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,closeupPageSuspenseBehavior:"RenderWithMissingDataAndSubscribe",isImpressionFixEnabled:!1,addRelatedPinsLatency:!1};case"add_related_pins_latency":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,closeupPageSuspenseBehavior:null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!0};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,closeupPageSuspenseBehavior:a?"SuspendOnMissingData":null,isImpressionFixEnabled:!1,addRelatedPinsLatency:!1}}}}function p(){let{checkExperiment:e}=(0,l.F)(),a=(0,t.HG)(),{isAuthenticated:n}=(0,i.B)();return c({checkExperiment:e,isDesktop:a,isAuthenticated:n})}},20717:function(e,a,n){n.d(a,{_l:()=>P,cO:()=>k,t2:()=>f,w2:()=>S,xM:()=>h});var l=n(667294),i=n(616550),t=n(27399),s=n(173874),r=n(575820),d=n(739405),u=n(462867),o=n(785893);let c="UnauthDesktopSocialPinLandingPageContext",p="AthDesktopSocialPinLandingPageContext",g="AuthMobileSocialPinLandingPageContext",m=(0,l.createContext)(),_=({children:e})=>{let[a,n]=(0,l.useState)(!1),[i,t]=(0,l.useState)(!1),s=(0,l.useMemo)(()=>({hasSeenAuthMobileLandingToast:a,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:t}),[a,n,i,t]);return(0,o.jsx)(m.Provider,{value:s,children:e})},y=(0,l.createContext)({key:"",data:null}),h=({children:e})=>{let a=(0,i.TH)(),n=(0,u.Z)(),m=n&&n.isAuth,h=(0,d.HG)(),k=(0,l.useRef)((0,s.fY)(a)&&(0,r.mB)(a.search).invite_code||null),P=(0,i.LX)(a.pathname,{path:"/pin/:id"}),f=String(P&&"id"in P.params&&P.params.id)||"",[S,v]=(0,l.useState)({key:"",data:null});return(0,l.useEffect)(()=>{(async function(){let e=k.current;if(e)try{let a=t.Z.create("InviteCodeMetadataResource",{invite_code:e}),l=(await a.callGet()).resource_response.data;if(l){let e=l.sender??null,a=m&&e.id!==n.id&&e?.should_show_messaging&&n.should_show_messaging;!m&&h?v({key:c,data:{inviter:e,popoverData:e&&![5,9,12,16].includes(l.invite_channel)?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name}:null}}):a&&!h?v({key:g,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:f}}}}):a&&h&&v({key:p,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:n.id||""},pin:{pinId:f}}}})}else v({key:"",data:null})}catch{v({key:"",data:null})}})()},[m,h,n,f]),(0,o.jsx)(_,{children:(0,o.jsx)(y.Provider,{value:S,children:e})})},k=()=>{let e=(0,l.useContext)(y);return e.key===c?e:null},P=()=>{let e=(0,l.useContext)(y);return e.key===g?e:null},f=()=>{let e=(0,l.useContext)(y);return e.key===p?e:null},S=()=>(0,l.useContext)(m)},992071:function(e,a,n){n.d(a,{Z:()=>P});var l=n(616550),i=n(883119),t=n(230201),s=n(236269),r=n(583875),d=n(924591),u=n(138596),o=n(216975),c=n(577356),p=n(739405),g=n(462867),m=n(446473),_=n(550946),y=n(271875),h=n(20717),k=n(785893);function P({hideToast:e,pinAttachment:a}){let n=(0,u.ZP)(),P=(0,l.k6)(),{logContextEvent:f}=(0,t.v)(),{showToast:S}=(0,c.F9)(),v=(0,_.Z)(),w=(0,g.Z)(),{conversationOpen:F,dropdownOpen:b,setObjectAttachment:E}=(0,y.Z)(),L=(0,p.HG)(),R=(0,h.t2)(),I=(0,h._l)(),x=L?R?.data:I?.data,K=x&&"toastData"in x?x.toastData:null,T=L?14344:14343;if(K){let{inviter:l,viewer:t}=K,u=(0,k.jsx)(i.xv,{inline:!0,weight:"bold",children:l.inviterName}),c=(0,k.jsx)(i.xv,{children:(0,o.nk)(n._('Like this Pin? Let {{ inviterName }} know.', 'SocialPinLandingPage.AuthSocialPinLandingPage.toastText', 'text to show info about this invite, inviterName: the name of inviter'),{inviterName:u})}),p=({conversationId:e,pinAttachment:a})=>{L?(b(),F(e)):P.push(`/conversation/${e}`),E(a)},g=async()=>{f({event_type:L?101:102,view_type:3,view_parameter:156,component:T});try{let e=await v({user_ids:[l.inviterId,t.viewerId]});if(e){let n=e.id;p({conversationId:n,pinAttachment:{...a,source:m.A}})}}catch(e){S(({hideToast:a})=>(0,k.jsx)(d.Z,{onHide:a,text:(0,s.Z)(e,"message")??""}))}};return f({event_type:13,view_type:3,view_parameter:156,component:T}),(0,k.jsx)(i.kC,{justifyContent:"center",children:(0,k.jsx)(i.iP,{onTap:()=>{g(),e()},children:(0,k.jsx)(d.Z,{duration:7e3,onHide:e,primaryAction:{accessibilityLabel:n._('Reply', 'SocialPinLandingPage.AuthToast.replyButtonAccessibilityLabel', 'reply back to a Pin shared to the viewer'),label:n._('Reply', 'SocialPinLandingPage.AuthToast.replyButton', 'reply back to a Pin shared to the viewer'),size:"lg",onClick:()=>{}},text:c,thumbnail:{avatar:(0,k.jsx)(r.qE,{color:w.isAuth?w.avatar_color_index:void 0,name:l.inviterName,src:l.inviterAvatarUrl})}})})})}}},793026:function(e,a,n){n.d(a,{Z:()=>G});var l,i,t=n(667294),s=n(167912),r=n(616550),d=n(883119),u=n(451091),o=n(399312),c=n(508202),p=n(59355),g=n(907022),m=n(400962),_=n(671539),y=n(613567),h=n(825605),k=n(577356),P=n(575647),f=n(462867),S=n(68876),v=n(60707),w=n(2061),F=n(250704),b=n(20717),E=n(992071),L=n(228612),R=n(785893);let I=(0,t.lazy)(()=>Promise.all([n.e("69994"),n.e("40211"),n.e("68209")]).then(n.bind(n,559422))),x=void 0!==l?l:l=n(324510),K=void 0!==i?i:i=n(908200);function T({isEligibleForPdp:e,pinId:a,ratingValue:n,pinKey:l}){let i=(0,m.aX)(),s=(0,r.k6)(),_=(0,r.TH)(),h=(0,f.Z)(),{trafficSource:S}=(0,o.Z)(i,h.isAuth),w=(0,g.Z)(K,l),{checkExperiment:L}=(0,y.F)(),I=w?.gridTitle||w?.gridDescription||w?.richMetadata?.title||w?.richSummary?.displayName||w?.richMetadata?.article?.name,x=L("ff_seo_pin_title_fix").anyEnabled,{showToast:T}=(0,k.F9)(),A=(0,b.t2)(),D=(0,b.w2)();(0,t.useEffect)(()=>{document.title=(!I&&x?w?.seoTitle?.trim():I?.trim())||"Pin page"},[I,x,w?.seoTitle]),(0,t.useEffect)(()=>{if(!D||D.hasSeenAuthDesktopLandingToast)return()=>{};let{setHasSeenAuthDesktopLandingToast:e}=D,n=setTimeout(()=>{if(A){let n={type:"pin",id:a};e(!0),T(({hideToast:e})=>(0,R.jsx)(E.Z,{hideToast:e,pinAttachment:n}))}},3e3);return()=>{clearTimeout(n)}},[A,a,T,D]);let G=(0,P.Z)(w);return((0,p.Q)({view_type:3,object_id_str:a,view_data:{pin_id:a},component:13283,aux_data:{current_page_url:_.pathname+_.search,closeup_navigation_type:(0,v.Z)(s,S),...G(),...n?{rating_value:n}:{},is_go_linkless:!!w?.isGoLinkless},clientTrackingParams:(0,F.Z)((_?.state||{}).trackingParams,w?.trackingParams)},a),e)?(0,R.jsx)(d.xu,{"data-test-id":"pdp-container",children:(0,R.jsx)(c.Z,{})}):(0,R.jsx)(d.xu,{"data-test-id":"closeup-container",children:(0,R.jsx)(u.ZP,{})})}function A({pinId:e}){let a=function({pinId:e}){return{query:x,variables:{pinId:e}}}({pinId:e}),n=(0,s.useLazyLoadQuery)(x,a.variables),l=n.v3GetPinQuery?.data;return(0,R.jsx)(T,{isEligibleForPdp:l?.isEligibleForPdp??!1,pinId:e,pinKey:l,ratingValue:l?.richSummary?.aggregateRating?.ratingValue})}function D({pinId:e}){let a=(0,L.S6)(),n=e?a(e):null;return(0,R.jsx)(T,{isEligibleForPdp:n?.is_eligible_for_pdp??!1,pinId:e,pinKey:null!=n?{type:"deprecated",data:n}:null,ratingValue:n?.rich_summary?.aggregate_rating?.rating_value})}function G(){let{id:e}=(0,r.UO)(),{isGraphQLEnabledInGeneral:a}=(0,w.nF)(),n=(0,f.Z)(),l=(0,_.j)(n);return(0,R.jsxs)(S.Z,{type:"authDesktop",children:[l&&(0,R.jsx)(h.Z,{children:(0,R.jsx)(I,{})}),a?(0,R.jsx)(h.Z,{children:(0,R.jsx)(A,{pinId:e||""})}):(0,R.jsx)(D,{pinId:e||""})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/14609-1ed2d455dfd1704c.mjs.map