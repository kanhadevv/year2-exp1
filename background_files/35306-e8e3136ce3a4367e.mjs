(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["35306"],{537347:function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function a(e){var t=e.a.offsetWidth,i=t+100;return e.f.style.width=i+"px",e.c.scrollLeft=i,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function l(e,i){function n(){a(l)&&l.a.parentNode&&i(l.g)}var l=e;t(e.b,n),t(e.c,n),a(e)}function r(e,t){var i=t||{};this.family=e,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var o=null,s=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function p(e,t){return[e.style,e.weight,!function(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}d=""!==e.style.font}return d}()?"":e.stretch,"100px",t].join(" ")}r.prototype.load=function(e,t){var a=this,r=e||"BESbswy",d=0,c=t||3e3,h=(new Date).getTime();return new Promise(function(e,t){if(u()&&!function(){if(null===s){if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);s=!!e&&603>parseInt(e[1],10)}else s=!1}return s}()){var m,g=new Promise(function(e,t){!function i(){(new Date).getTime()-h>=c?t(Error(""+c+"ms timeout exceeded")):document.fonts.load(p(a,'"'+a.family+'"'),r).then(function(t){1<=t.length?e():setTimeout(i,25)},t)}()});Promise.race([new Promise(function(e,t){d=setTimeout(function(){t(Error(""+c+"ms timeout exceeded"))},c)}),g]).then(function(){clearTimeout(d),e(a)},t)}else m=function(){function s(){var t;(t=-1!=_&&-1!=y||-1!=_&&-1!=f||-1!=y&&-1!=f)&&((t=_!=y&&_!=f&&y!=f)||(null===o&&(o=!!(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=o&&(_==x&&y==x&&f==x||_==v&&y==v&&f==v||_==b&&y==b&&f==b)),t=!t),t&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(d),e(a))}var u=new i(r),m=new i(r),g=new i(r),_=-1,y=-1,f=-1,x=-1,v=-1,b=-1,w=document.createElement("div");w.dir="ltr",n(u,p(a,"sans-serif")),n(m,p(a,"serif")),n(g,p(a,"monospace")),w.appendChild(u.a),w.appendChild(m.a),w.appendChild(g.a),document.body.appendChild(w),x=u.a.offsetWidth,v=m.a.offsetWidth,b=g.a.offsetWidth,function e(){if((new Date).getTime()-h>=c)w.parentNode&&w.parentNode.removeChild(w),t(Error(""+c+"ms timeout exceeded"));else{var i=document.hidden;(!0===i||void 0===i)&&(_=u.a.offsetWidth,y=m.a.offsetWidth,f=g.a.offsetWidth,s()),d=setTimeout(e,50)}}(),l(u,function(e){_=e,s()}),n(u,p(a,'"'+a.family+'",sans-serif')),l(m,function(e){y=e,s()}),n(m,p(a,'"'+a.family+'",serif')),l(g,function(e){f=e,s()}),n(g,p(a,'"'+a.family+'",monospace'))},document.body?m():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),m()}):document.attachEvent("onreadystatechange",function e(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",e),m())})})},e.exports=r}()},515369:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselVideoItem_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};n.hash="510195e37611b9b69a16eccfeb13e9cf";let a=n},580441:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselVideoItem_pin"}],type:"Pin",abstractKey:null};n.hash="83e61e6fc89222c2a0b03276839f44a5";let a=n},264370:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoWithVisibility_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};n.hash="60493becbbe037be854a8cd1136fede6";let a=n},403369:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};n.hash="08b89bb2190b936e38e11d4ce341058f";let a=n},609311:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"CloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};n.hash="89029511c11617e1150976d1002228db";let a=n},254267:function(e,t,i){var n,a,l,r,o;i.r(t),i.d(t,{default:()=>d});let s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualContext_pin",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:r,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o=[l,n,a],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"236x")'},{alias:"imageSpec_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"1200x")'}],type:"Pin",abstractKey:null};s.hash="e126fc0a8b5540f962701fad164e178c";let d=s},11661:function(e,t,i){var n;i.r(t),i.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useBuildCloseupImageOverlayProps_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="773fc34db33e0adf6079c9c326106f45";let l=a},944966:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateImageContainerDimension_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};n.hash="86a6c49cecdb70d77f786a1965756cf9";let a=n},554519:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetStelaUrlWithLargestStelaObject_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};n.hash="93be9368e70d087bc7ea24af201598f9";let a=n},977357:function(e,t,i){var n;i.r(t),i.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMediaContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Shuffle",kind:"LinkedField",name:"shuffle",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null}],type:"Pin",abstractKey:null};a.hash="9c7542efa334cc818c5490a7bf28c43b";let l=a},753698:function(e,t,i){i.d(t,{Z:()=>o});var n=i(883119),a=i(138596),l=i(11338),r=i(785893);function o({digitalMediaType:e,isMobile:t=!1}){let i=(0,a.ZP)(),o={[l.s.TRAINED_ALGORITHMIC_MEDIA]:i._('AI generated', 'closeup.aIGeneratedLabel.label', 'Label for AI Generated images'),[l.s.COMPOSITE_WITH_TRAINED_ALGORITHMIC_MEDIA]:i._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images')};return(0,r.jsxs)(n.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"ai-generated-label",display:"flex",height:t?48:44,justifyContent:"center",rounding:4,width:t?"147px":"143px",children:[(0,r.jsx)(n.JO,{accessibilityLabel:i._('AI Generated Label icon', 'closeup.image.aIGeneratedLabelIcon', 'Icon on AI generated Label'),color:"light",icon:"sparkle"}),(0,r.jsx)(n.xu,{paddingX:1}),(0,r.jsx)(n.xv,{color:"light",size:"300",children:o[e]})]})}},506578:function(e,t,i){i.d(t,{Z:()=>u});var n=i(667294),a=i(883119),l=i(753698),r=i(578377),o=i(667980),s=i(825605),d=i(785893);let c=112+r.Z;function u({digitalMediaType:e,shouldMoveAILabel:t,closeupWithinMasonryEnabled:i}){return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(a.xu,{height:`calc(100% - ${t?c:56}px)`}),(0,d.jsx)(a.xu,{display:"flex",justifyContent:"start",maxWidth:"147px",paddingX:i?2:r.Z,children:(0,d.jsx)(s.Z,{children:(0,d.jsx)(o.Z,{children:(0,d.jsx)(l.Z,{digitalMediaType:e})})})})]})}},65936:function(e,t,i){i.d(t,{Z:()=>g});var n,a=i(667294);i(167912);var l=i(883119),r=i(788730),o=i(239321),s=i(907022),d=i(138596),c=i(613567),u=i(133546),p=i(767415),h=i(785893);let m=void 0!==n?n:n=i(403369);function g({clientTrackingParams:e,domain:t,link:i,pinKey:n,trafficSource:g,size:_="lg",viewType:y=3}){let f;let x=(0,d.ZP)(),[v,b]=(0,a.useState)(!1),w=(0,s.Z)(m,n),{checkExperiment:S}=(0,c.F)(),P=S("closeup_dweb_media_viewer_cta_copy").anyEnabled,I=S("closeup_dweb_clickthrough_copy").anyEnabled,{isCloseupMediaViewerOpen:k}=(0,u.x4)(),j=(0,a.useMemo)(()=>{let e=k&&P&&675===y,t=I&&3===y;return e||t},[P,I,k,y]),C=(0,a.useCallback)(()=>{(0,p.nP)(`web.closeup.media_viewer_stats.clickthrough.clicked_from.${675===y?"media_viewer":"closeup"}`)},[y]);return i.startsWith("https://i.pinimg.com")?(0,h.jsx)(a.Fragment,{}):(f=t?j?x._('Visit site', 'closeup.pinActionDropDown.visitSite', 'Button allowing user to clickthrough Pin'):(0,r.ff)(t):x._('Learn more', 'closeup.image.domainLinkButton', 'Text indicating where clickthrough will navigate to'),(0,h.jsx)(l.iP,{onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:(0,h.jsx)(o.Z,{clientTrackingParams:e,hovered:v,pinKey:w,trafficSource:g,viewType:y,children:(0,h.jsx)(l.zx,{accessibilityLabel:x._('Open link icon', 'closeup.image.domainLinkButtonIcon', 'Icon on domain link button'),color:"semiTransparentWhite",dataTestId:"visit-button",iconStart:"arrow-up-right",onClick:C,size:_,text:f})})}))}},515171:function(e,t,i){i.d(t,{Z:()=>l});var n=i(883119),a=i(785893);let l=({onClick:e,href:t,children:i,onNavigation:l})=>(0,a.jsx)(n.xu,{"data-test-id":"image-link",children:(0,a.jsx)(n.Tg,{href:t,onTap:({event:t,dangerouslyDisableOnNavigation:i})=>{i(),e(),l({event:t})},rel:"nofollow",children:i})})},578377:function(e,t,i){i.d(t,{Z:()=>n});let n=3},103423:function(e,t,i){i.d(t,{Z:()=>s}),i(167912);var n,a=i(928585),l=i(907022),r=i(273675);let o=void 0!==n?n:n=i(11661);function s({carouselInfo:e,disablePinTagButton:t,domain:i,hasMetTrustAndSafetyCheck:n,isEmployee:s,isHovered:d,isORBACProfileManager:c,isScenePin:u,isCollageEnabled:p,navLink:h,pinKey:m,showProductDetailPage:g,showStelaDotsOnScenePin:_}){let y=(0,l.Z)(o,m),{sideBySideRedesignFastFollowsExpGroup:f}=(0,a.Z)(),x="enabled_persistent_cta"===f,{access:v,aggregatedPinData:b,storyPinDataId:w}=y,S=!!b?.isShopTheLook,P=u&&(d||x),I=n&&!p&&(S&&!P||u),k=!1,j=!1;(d||x)&&!P&&(k=!(j=!!h&&!_&&!p)&&!!i&&!!y.link&&!y.link.startsWith("https://i.pinimg.com")&&!(g&&e)&&!p),j=j&&!y?.isGoLinkless;let C=function({carouselInfo:e,hasMetTrustAndSafetyCheck:t,isORBACProfileManager:i,isScenePin:n,isCollageEnabled:a,isShopTheLook:l,pin:o,showProductDetailPage:s}){let{embed:d,isPromoted:c}=o,u=d&&"gif"===d.type;return!!t&&!n&&!l&&!c&&!u&&!i&&!a&&(s?!e||function({pin:e,carouselData:t}){let{index:i=0,carousel_slots:n=[]}=t,{image_signature:a="",images:l}=n[i];if(a.length>0)return!0;let o=e.imageSpec_564x||e.imageSpec_736x||e.imageSpec_orig||e.imageSpec_474x||e.imageSpec_236x;return o?.url===r.Z({images:l})?.url}({pin:o,carouselData:e.carouselData}):!e)}({carouselInfo:e,hasMetTrustAndSafetyCheck:n,isORBACProfileManager:c,isScenePin:u,isCollageEnabled:p,isShopTheLook:S,pin:y,showProductDetailPage:g}),T=!w&&!!v&&v.includes("tag")&&!t&&!p||c||!1,L=!!e,E=function({isShopTheLook:e,showFlashlightButton:t,showShopButton:i,showStelaDotsOnScenePin:n}){return t&&!n?"flashlight":i?e?"stl":"stela":"flashlight"}({showFlashlightButton:C,showShopButton:I,showStelaDotsOnScenePin:_,isShopTheLook:S});return{showCarouselControls:L,showCloseupShopDomainLinkButton:P,showDebugSignalsFeedbackButton:!!s,showDomainLink:k,showDomainLinkButton:j,showFlashlightButton:C,showPinTagButton:T,showShopButton:I,surfaceType:E}}},800691:function(e,t,i){i.d(t,{Z:()=>p});var n,a=i(667294);i(422578);var l=i(788730),r=i(514793),o=i(200301),s=i(907022),d=i(15392),c=i(133546);let u=void 0!==n?n:n=i(944966);function p({carouselData:e,imageToDisplayWidthRatio:t=1,mainImage:i={width:1,height:1,url:""},maxCloseupImageWidth:n,pinKey:p,shouldPadImage:h=!1}){let m=(0,s.Z)(u,p),{closeupWithinMasonryEnabled:g,isCloseupRelatedPinsAboveTheFoldEnabled:_,peekCloseupEnabled:y,viewportSize:f}=(0,c.x4)(),{numericValues:x}=(0,l.Re)(),{maxHeight:v}=(0,r.Z)({pinKey:m}),{fiftyPercentHeight:b,fiftyPercentWidth:w,maxHeight:S,maxWidth:P}=x??{},I="sm"===f?b:S;return(0,a.useMemo)(()=>{let a=n-d.d2,l=h?a:n,r=function(e={},t){return Math.min(...[e,...t?.carousel_slots?.map(e=>{var t;return o.Z(e.images)||((t=e.videos?.video_list)?t.V_720P?.url?t.V_720P:t.V_HLSV4?.url?t.V_HLSV4:t.V_HLSV3_MOBILE?.url?t.V_HLSV3_MOBILE:t.V_HLSV3_WEB?.url?t.V_HLSV3_WEB:null:null)}).filter(e=>!!e)||[]].map(({width:e=1,height:t=1})=>e/t))}(i,e),s=Math.floor(l*(e?t:1)/r),c="number"==typeof v?v:s,u=g?Math.min(s,y?I??s:c):s,p=y?u/s:1,m=_?Math.min(l*p,P??1/0,w??1/0):l*p,{containerAspectRatio:f,letterBoxedWidth:x,letterBoxedHeight:b}=function(e,t,i){let n,a;let l=e?.width/e.height,r=t/i;return l>r?(n=t,a=t/l):(n=i*l,a=i),{containerAspectRatio:r,letterBoxedWidth:n,letterBoxedHeight:a}}(i,m,u);return{containerAspectRatio:f,containerHeight:u,containerWidth:m,horizontalOffset:(m-x)/2,letterBoxedHeight:b,letterBoxedWidth:x,letterBoxAspectRatio:x/b,verticalOffset:(u-b)/2}},[g,n,h,i,e,t,v,y,I,_,P,w])}},145687:function(e,t,i){i.d(t,{Z:()=>c});var n=i(667294),a=i(883119),l=i(230201),r=i(465784),o=i(138596),s=i(59111),d=i(785893);function c({handlePause:e,handlePlay:t,musicAttributions:i,shouldMute:c,showEndCard:u}){let p=(0,o.ZP)(),{logContextEvent:h}=(0,l.v)(),[m,g]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{!u&&(i?.length||c)&&h({event_type:c?14600:14601,view_type:3,view_parameter:140})},[h,i,c,u]),u||!i?.length&&!c)return null;let _=()=>{t&&t(),g(!1)},y="";if(i?.length===1){let{artist:e="",title:t=""}=i[0];y=e&&t?`${e} - ${t}`:""}let f=(i?.length||0)>=2?(0,d.jsx)(a.xu,{children:(0,d.jsx)(a.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>{e&&e(),g(!0)},children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.closeup.musicicon', 'Artist and song title for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12})}),(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:p._('View the playlist', 'web.closeup.musicAttibutionModal.entryPoint', 'Entry point for playlist modal')})]})})}):(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.pin.closeup.musicicon', 'Music icon for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12}),(0,d.jsx)(a.xu,{marginStart:2,overflow:"hidden",children:(0,d.jsxs)("span",{className:y.length>=50?"marquee":void 0,style:{display:"inline-block",maxWidth:y.length>=50?"260px":void 0},children:[(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:y}),(0,d.jsx)(s.Z,{unsafeCSS:`
                  .marquee {
                   animation: marquee 10s linear infinite;
                   animation-delay: 2s;
                  }

                  .marquee:hover {
                      animation-play-state: paused;
                  }


                 @keyframes marquee {
                   0% {
                     transform: translateX(0%);
                    }
                  50% {
                    transform: translateX(-100%);
                  }
                  100% {
                    transform: translateX(0%);
                  }
              }
            `})]})})]});return(0,d.jsxs)(n.Fragment,{children:[c?(0,d.jsx)(n.Fragment,{children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.closeup.musicMutedIcon', 'Music muted icon for Pin music attribution'),color:"inverse",icon:"music-off",inline:!0,size:12})}),(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:p._('Audio not available in your location', 'web.closeup.musicAttribution', 'Informational message to tell user audio is not available in their location')})]})}):f,m&&(0,d.jsx)(r.ZP,{accessibilityModalLabel:p._('Artist and song title for this Pin', 'web.closeup.musicAttibutionModal', 'Artist and song title for Pin music attribution'),heading:(0,d.jsxs)(a.kC,{justifyContent:"between",children:[(0,d.jsx)(a.X6,{size:"500",children:p._('Playlist for this video', 'web.closeup.musicAttibutionModal.heading', 'Title for music attribution modal')}),(0,d.jsx)(a.hU,{accessibilityLabel:p._('Close modal button', 'web.closeup.musicAttibutionModal.closeButton', 'Close modal button for music attribution modal'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:_,size:"sm"})]}),onDismiss:_,children:(0,d.jsx)(a.xu,{marginBottom:5,paddingX:5,paddingY:1,children:i?.map(({isrc:e,thumbnail_image_url:t,title:i,artist:n},l)=>d.jsxs(a.xu,{display:"flex",padding:1,children:[t&&d.jsx(a.xu,{color:"darkWash",height:60,rounding:7,width:60,children:d.jsx(a.Ee,{alt:p._('Image of album art', 'web.closeup.musicAttibutionModal.albumArt', 'Alt text for image of album art for associated song'),color:"darkWash",naturalHeight:1,naturalWidth:1,src:t})}),d.jsxs(a.xu,{direction:"column",display:"flex",justifyContent:"center",paddingX:2,children:[d.jsx(a.xv,{weight:"bold",children:i??""}),d.jsx(a.xv,{size:"100",children:n??""})]})]},e||`${l}`))})})]})}},651718:function(e,t,i){i.d(t,{Z:()=>to});var n,a,l,r,o=i(883119),s=i(785893);let d=({children:e})=>(0,s.jsx)(o.xu,{display:"flex",height:"100%",justifyContent:"center",padding:5,width:"100%",children:e});var c=i(249459),u=i(138596),p=i(774838),h=i(398542),m=i(15392),g=i(133546);let _=({embedUrl:e,isWideVideo:t,paddingBottom:i="50%",shouldPadImage:n})=>{let a=(0,u.ZP)(),l=(0,p.B)(),r=t?m.KP:m.Gg,_=e?.replace("http://","https://");_&&_.startsWith("https://www.youtube.com/embed/")&&(_=_.replace("https://www.youtube.com/embed/","https://www.youtube-nocookie.com/embed/"));let y=(0,s.jsx)(g.ZP.Consumer,{children:({showCloseupContentRight:e,closeupWithinMasonryEnabled:d,peekCloseupEnabled:u,viewportSize:p})=>{let m=(0,s.jsx)("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",paddingBottom:i,...h.Z({isSideBySide:!t,isPadded:n,isRTL:l.isRTL,closeupWithinMasonryEnabled:d,peekCloseupEnabled:u})?.borderStyle},children:(0,s.jsx)("iframe",{allowFullScreen:!0,id:c.ZP.VIDEO_IFRAME_ID,src:_,style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:a._('Embedded content', 'Accessible content for the embedded content iframe', 'Accessible content for the embedded content iframe')})});return e&&"lg"===p?(0,s.jsx)(o.xu,{marginBottom:6,marginEnd:t||n?0:6,width:r,children:m}):m}});return n?(0,s.jsx)(d,{children:y}):y};var y=i(667294);i(167912);var f=i(752031);i(422578);var x=i(70806),v=i(104999),b=i(907022);let w=void 0!==n?n:n=i(515369),S=({contextLogData:e,height:t,isFocused:i,videoList:n,onFocus:a,onUnfocus:l,pinId:r,pinKey:d,width:c})=>{let u=(0,v.Z)(),p=(0,b.Z)(w,d),{V_720P:h,V_HLSV4:m,V_HLSV3_MOBILE:g}=n,{height:_=1,width:f=1,thumbnail:S}=h||m||g||{},P=_/f,I=P;"number"==typeof t&&"number"==typeof c&&(I=t/c),(0,y.useEffect)(()=>{i?a&&a():l&&l()},[i,a,l]),(0,y.useEffect)(()=>{i&&u({component:e.component,event_type:13,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[i,e,u]);let k=(0,y.useCallback)(()=>{u({component:e.component,event_type:3621,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[e,u]);return(0,s.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,s.jsx)(o.xu,{width:`${100*Math.min(I/P,1)}%`,children:(0,s.jsx)(x.Z,{contextLogData:e,customThumbnail:S,disabled:!i,loop:!0,muted:!1,onPlay:k,pinId:r,pinKey:p,preferMp4:!0,showControls:"hover",variant:"default",video:{mp4:h,hls:m,hlsv3:g}})})})};var P=i(230201),I=i(830031),k=i(575647),j=i(74972),C=i(501755),T=i(200301),L=i(834182);let E=({fit:e,highResOnly:t,onError:i,onLoad:n,slot:a,slotIndex:l})=>{let r=(0,u.ZP)(),{details:d=""}=a,{url:c="",width:p=1,height:h=1}=(0,T.Z)(a.images)||{};return c&&(0,s.jsx)(o.Ee,{alt:(0,L.GH)(d,r,l),fit:e,naturalHeight:h??1,naturalWidth:p??1,onError:i,onLoad:n,src:c,srcSet:(0,L.gA)({slot:a,highResOnly:t})})},Z=void 0!==a?a:a=i(580441);function A({carouselData:e,displayHeight:t,displayWidth:i,pinKey:n}){let{logContextEvent:a}=(0,P.v)(),{closeupWithinMasonryEnabled:l,isCloseupMediaViewerOpen:r,showProductDetailPage:d,peekCloseupEnabled:c}=(0,g.x4)(),{index:u=0}=e,{pauseAutoplay:p,setCurrentVideo:h}=(0,j.I)(),{mainImage:m}=(0,f.r)(),{height:_,width:x}=m,v=(0,b.Z)(Z,n),{entityId:w}=v,T=(0,y.useRef)(null),L=(0,k.Z)(v),A=v.isEligibleForPdp?L():void 0,D=v.isEligibleForPdp?144:void 0,F=v.isEligibleForPdp?3:void 0,R=(0,I.E)(),V=(0,y.useCallback)(e=>{R&&e>=1&&R.markConstraintComplete("image")},[R]),K=(0,y.useMemo)(()=>({viewParameter:d?144:156,view:3,component:d?14012:179,objectId:w}),[w,d]),M=(0,y.useCallback)(()=>{h({pinId:w,isPromoted:!1})},[h,w]),B=(0,y.useCallback)(()=>{p({pinId:w,isPromoted:!1})},[p,w]);(0,y.useEffect)(()=>{e.carousel_slots?.find(e=>e.videos?.video_list)&&a({event_type:120,view_type:K.view,view_parameter:K.viewParameter,component:K.component,object_id_str:K.objectId})},[a,e.carousel_slots,K]);let z=T.current&&c;return(0,s.jsx)(o.xu,{ref:T,height:l?"100%":void 0,children:!c||z?(0,s.jsx)(C.Z,{containerRef:T.current,contextLogData:A,height:t,id:w,index:u,responsiveSizing:l,slideWidth:i,view:F,viewParameter:D,children:e.carousel_slots?.map((n,a)=>{let d,c;return n.videos?.video_list?(d=s.jsx(S,{contextLogData:K,height:t,isFocused:u===a,onFocus:M,onUnfocus:B,pinId:w,pinKey:v,videoList:n.videos.video_list,width:i}),c=n.videos.id):(d=s.jsx(o.xu,{dangerouslySetInlineStyle:{__style:{viewTransitionName:r||a!==e?.index?void 0:`pin-closeup-${w}`}},height:"inherit",width:"inherit",children:s.jsx(E,{fit:"contain",onLoad:()=>V(a),slot:n,slotIndex:a})}),c=n.image_signature),s.jsx(o.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:l?x/_:void 0,justifySelf:"center"}},height:"100%",overflow:l?"hidden":void 0,rounding:l?4:void 0,width:l?void 0:"inherit",children:d},`${w}-${c||a}`)})||[]}):null})}var D=i(788730),F=i(758724),R=i(835531);let V=({children:e,isCloseupMediaViewerEnabled:t,imageWithPreview:i})=>{let{closeupWithinMasonryEnabled:n,isCloseupRelatedPinsAboveTheFoldEnabled:a}=(0,g.x4)(),{fiftyPercentWidth:l}=(0,D.Re)(),{naturalHeight:r,naturalWidth:d}=i;return t||a?(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:n?d/r:void 0,justifySelf:n?"center":void 0}},height:"100%",maxWidth:l,overflow:n?"hidden":void 0,rounding:6,children:e}):(0,s.jsx)(o.zd,{rounding:6,wash:!0,children:e})};function K({borderStyle:e,dominantColor:t,imageWithPreview:i,pinId:n,fit:a}){let l=(0,I.E)(),r=(0,y.useCallback)(()=>{l&&l.markConstraintComplete("image")},[l]),{isCloseupMediaViewerEnabled:d}=(0,F.Z)({isShufflePin:!1}),{isCloseupMediaViewerOpen:c,closeupWithinMasonryEnabled:u,isCloseupRelatedPinsAboveTheFoldEnabled:p}=(0,g.x4)(),h=""!==i.mainImage.src?(0,s.jsx)(o.xu,{"data-test-id":"closeup-image-main",height:"100%",width:"100%",children:(0,s.jsx)(R.Z,{_enableViewTransitions:d||p,_fixCompletedOnLoad:u,alt:i.mainImage.alt,borderStyle:e,color:t,fetchPriority:"high",fit:a,id:n,naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth,onLoad:r,src:i.mainImage.src,suppressViewTransitionTags:c})}):null;return(0,s.jsx)(V,{imageWithPreview:i,isCloseupMediaViewerEnabled:!!d,children:!u&&i.previewImage?.src?(0,s.jsx)(o.Ee,{alt:i.previewImage?.alt??"",color:t,fetchPriority:"high",fit:p?a:void 0,naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth,role:"img",src:i.previewImage.src,children:h}):h})}var M=i(616550),B=i(506578),z=i(578377),O=i(65936);let H=({children:e,horizontalOffset:t=0,imageWidth:i,name:n,verticalOffset:a=0})=>{let l=new o.Ry(1),{closeupWithinMasonryEnabled:r}=(0,g.x4)(),{mainImage:d}=(0,f.r)(),{height:c,width:u}=d;return(0,s.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...i?{display:"flex",justifyContent:"center",justifySelf:"center",width:i}:{},aspectRatio:r?u/c:void 0,justifySelf:r?"center":void 0,pointerEvents:"none",padding:`${a}px ${t}px`}},"data-test-id":`experimental-closeup-image-overlay-layer-${n}`,left:!0,position:"absolute",right:!0,top:!0,zIndex:l,children:e})};var W=i(800691),N=i(928585),U=i(912046),G=i(470205),$=i(667980),X=i(613567),J=i(825605),Y=i(462867),q=i(619784),Q=i(800640);let ee=({carouselData:e,containerWidth:t,slotWidth:i})=>{let{index:n,carousel_slots:a}=e||{},l=Math.floor(i);return void 0===n||!a||n>=a.length-1?0:t-l};function et({carouselData:e,children:t,disableAnimations:i=!1,displayWidth:n,hide:a}){let l=(0,y.useCallback)(()=>ee({carouselData:e,containerWidth:n,slotWidth:n}),[e,n]),[r,d]=(0,y.useState)(l()),[c,u]=(0,y.useState)(i),[p,h]=(0,y.useState)(),m=(0,y.useCallback)(()=>{d(l())},[l]),g=()=>{u(!0)},_=()=>{u(!1)};return(0,y.useEffect)(()=>{let e=!0;return i||(_(),h(t=>(clearTimeout(t),setTimeout(()=>{e&&(m(),a||g())},500)))),()=>{e=!1}},[e?.index,i,m,a]),(0,y.useEffect)(()=>()=>clearTimeout(p),[p]),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:r,transition:i?void 0:"opacity 500ms, visibility 500ms ease-in-out",visibility:c?"visible":"hidden"}},"data-test-id":"animated-fab",opacity:c?1:0,children:t})}var ei=i(206928),en=i(546151);let ea=(0,y.lazy)(()=>i.e("12780").then(i.bind(i,47574))),el=(0,y.lazy)(()=>i.e("12780").then(i.bind(i,620766))),er=(0,y.lazy)(()=>i.e("8149").then(i.bind(i,761695))),eo=(0,y.lazy)(()=>i.e("74993").then(i.bind(i,313072))),es=(0,y.lazy)(()=>i.e("90980").then(i.bind(i,322775))),ed=(0,y.lazy)(()=>i.e("81568").then(i.bind(i,836563))),ec=(0,y.lazy)(()=>i.e("43794").then(i.bind(i,215296))),eu=({animateShopButton:e,carouselInfo:t,domain:i,handleMediaButtonClick:n,hasStelaResults:a,isCloseupRelatedPinsAboveTheFoldEnabled:l=!1,isHovered:r,link:d,mediaViewerExpandButtonRef:c,navigationWrapper:u,onShopButtonAnimationComplete:p,onStelaDotAnimationComplete:h,pin:m,searchQuery:_,showAnimatedExploreCta:x,showCarouselControls:b,showCarouselEllipsis:w,showCloseupShopDomainLinkButton:S,showDebugSignalsFeedbackButton:P,showDomainLink:I,showDomainLinkButton:k,showFlashlightButton:j,showProductDetailPage:C,showPinTagButton:T,showShopButton:L,showStelaDotsOnScenePin:E,stelaDotAnimationType:Z,surfaceType:A,trafficSource:D,maxCloseupImageWidth:R,shouldPadImage:V})=>{let{clientTrackingParams:K,closeupWithinMasonryEnabled:ee}=(0,g.x4)(),{isRelatedPins10PercentVisible:eu}=(0,Q.K4)(),{mainImage:ep,mediaViewerImage:eh}=(0,f.r)(),{checkExperiment:em}=(0,X.F)(),eg=(0,v.Z)(),e_=(0,M.k6)(),ey=(0,Y.Z)(),{peekRedesignFastFollowsEnabled:ef,sideBySideRedesignFastFollowsExpGroup:ex}=(0,N.Z)(ep),{containerHeight:ev,containerWidth:eb,letterBoxedHeight:ew,letterBoxedWidth:eS,horizontalOffset:eP,verticalOffset:eI}=(0,W.Z)({carouselData:t?.carouselData,mainImage:ep,maxCloseupImageWidth:R,shouldPadImage:V,pinKey:{type:"deprecated",data:m}}),ek=4*z.Z,ej=ek+(eu?0:58),eC=48+ej+8,eT=e=>ef?{bottom:e,position:eu?"absolute":"sticky",transition:"position 0.1s ease"}:{bottom:e,position:"sticky"},{isCloseupMediaViewerEnabled:eL}=(0,F.Z)({isShufflePin:!!m?.shuffle}),eE=!m.is_eligible_for_pdp&&j,eZ=m.visual_objects,eA=em("web_pin_level_landing_feed",{dangerouslySkipActivation:!0}).anyEnabled,eD=m&&m.origin_pinner&&ey.isAuth&&ey.id===m.origin_pinner.id||!m?.is_go_linkless,eF=(0,en.zX)(m.digital_media_source_type)&&em("closeup_ctx_ai_metadata_label_web").anyEnabled,eR=a&&eE,eV=void 0!==eZ&&eR,eK=(k||S)&&eD,eM=eK&&!d.startsWith("https://i.pinimg.com"),eB=S||eR&&r,{hasStelaObjectsAfterFilter:ez,url:eO}=(0,U.Z)({pinKey:{type:"deprecated",data:m},surfaceType:"stl"===A?"stela":A,topLevelTrafficSource:D,skipStela:eA}),eH=()=>{ez&&em("web_pin_level_landing_feed")},eW=({event:e})=>{["flashlight","stela"].includes(A)&&eg({event_type:101,component:128,element:234,view_type:3,aux_data:{image_signature:m.image_signature}}),e?.stopPropagation(),eO&&null!=A?(eH(),e_.push(eO)):e_.push((0,q.Z)({pinId:m.id,isProductPage:!1,surfaceType:A}))},eN=!E&&x;return(0,s.jsxs)(y.Fragment,{children:[I&&(0,s.jsx)(H,{name:"domain-link",children:(0,s.jsxs)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:[(0,s.jsx)(o.xu,{paddingX:1,children:(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"inverse",icon:"arrow-up-right",size:16})}),(0,s.jsx)(o.xu,{paddingX:1,children:(0,s.jsx)(o.xv,{color:"inverse",weight:"bold",children:i})})]})}),b&&t&&(0,s.jsxs)(H,{name:"carousel-controls",children:[(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselSliders",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)(el,{backNode:C?(0,s.jsx)(ei.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"back",showFab:r}):void 0,carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,forwardNode:C?(0,s.jsx)(ei.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"forward",showFab:r}):void 0,handleCarouselSwipe:t.handleCarouselSwipe,pinKey:{type:"deprecated",data:m},sliderStyleOverride:{padding:"30px 12px"},viewParameter:t.viewParameter,viewType:t.viewType})})}),(0,s.jsx)(o.xu,{alignItems:"end",bottom:!0,display:"flex",height:405,justifyContent:"center",left:!0,padding:z.Z,position:"absolute",right:!0,children:!k&&w&&(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselEllipsis",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(ea,{carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,handleCarouselSwipe:t.handleCarouselSwipe,isCloseup:!0,pinKey:{type:"deprecated",data:m},variant:"default",viewParameter:t.viewParameter,viewType:t.viewType})})})})})]}),(E||eR&&!eV)&&(0,s.jsx)(H,{horizontalOffset:eP,imageWidth:l?eS:void 0,name:"stela-container",verticalOffset:eI,children:(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_StelaContainerWrapper",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)(es,{alwaysShow:eB,disableSelected:!0,enablePointerEvents:a&&"inOut"===Z||eB,height:l?ew:ev,isFlashlightPin:eR,onStelaDotAnimationComplete:h,pinKey:{type:"deprecated",data:m},searchQuery:_,stelaDotAnimationType:Z,trafficSource:D,width:l?eS:eb})})})}),(L&&A||eN)&&(0,s.jsxs)(H,{name:"shop-button",children:[(0,s.jsx)(o.xu,{height:`calc(100% - ${48+ek}px)`}),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:eT(ej)},display:"flex",justifyContent:"end",paddingX:z.Z,right:!0,children:(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_ShopButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:eN?(0,s.jsx)(et,{carouselData:t?.carouselData,disableAnimations:!0,displayWidth:eb,hide:!l&&(!j||!!t&&0!==t.carouselData.index),children:(0,s.jsx)(ed,{actionUrl:eO,activatePinLevelLandingExp:eH,animateOnRender:!0,animateShopButton:e,dataTestId:"shop-button",id:m.id,imageSignature:m.image_signature,onAnimationComplete:p,onButtonClick:eW,showAnimatedExploreCta:x,surfaceType:A})}):(0,s.jsx)(ed,{actionUrl:eO,activatePinLevelLandingExp:eH,animateOnRender:!0,animateShopButton:e,dataTestId:"shop-button",id:m.id,imageSignature:m.image_signature,onAnimationComplete:p,onButtonClick:eW,showAnimatedExploreCta:x,surfaceType:A})})})})})]}),eL&&(0,s.jsxs)(H,{name:"media-viewer-button",children:[(0,s.jsx)(o.xu,{height:`calc(100% - ${(48+ek)*2}px)`}),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:eT(eC)},display:"flex",justifyContent:"end",paddingX:z.Z,right:!0,children:(0,s.jsx)(et,{carouselData:t?.carouselData,disableAnimations:!0,displayWidth:eb,children:(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(o.xu,{ref:c,onMouseDown:()=>{new Image().src=eh.url},children:(0,s.jsx)(ed,{animateOnRender:!1,animateShopButton:e,dataTestId:"media-viewer-button",id:m.id,imageSignature:m.image_signature,onAnimationComplete:p,onButtonClick:n,surfaceType:"media-viewer"})})})})})})})]}),P&&(0,s.jsxs)(H,{name:"debug-signals-feedback",children:[(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 115px)"}}}),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:eT(ej)},display:"flex",justifyContent:"end",paddingX:z.Z,right:!0,children:(0,s.jsx)(J.Z,{children:(0,s.jsx)(ec,{pinKey:{type:"deprecated",data:m}})})})]}),!E&&!x&&(0,s.jsxs)(H,{name:"flashlight-button",children:[(0,s.jsx)(o.xu,{height:`calc(100% - ${48+ek}px)`}),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:eT(ej)},display:"flex",justifyContent:"end",paddingX:z.Z,right:!0,children:eE&&A?(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_FlashlightButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(ed,{actionUrl:j?eO:void 0,activatePinLevelLandingExp:eH,animateOnRender:!0,animateShopButton:e,dataTestId:"shop-button",id:m.id,imageSignature:m.image_signature,onAnimationComplete:p,onButtonClick:eW,surfaceType:A})})})}):(0,s.jsx)(et,{carouselData:t?.carouselData,disableAnimations:!!l,displayWidth:eb,hide:!l&&(!j||!!t&&0!==t.carouselData.index),children:(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_FlashlightButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(er,{actionUrl:j?eO:void 0,activatePinLevelLandingExp:eH,closeupImageHovered:!k&&r,pinId:m.id,variant:"default"})})})})})})]}),m.digital_media_source_type&&eF&&(0,s.jsx)(H,{horizontalOffset:4,name:"ai-generated-label",children:(0,s.jsx)(B.Z,{closeupWithinMasonryEnabled:ee,digitalMediaType:m.digital_media_source_type,shouldMoveAILabel:eM&&(r||"enabled_persistent_cta"===ex)})}),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"opacity 0.3s linear",opacity:r?1:0}},children:eK&&(0,s.jsxs)(H,{name:"domain-link-button",children:[(0,s.jsx)(o.xu,{height:`calc(100% - ${48+ek}px)`}),(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:eT(ej)},display:"flex",justifyContent:"start",maxWidth:"calc(100% - 88px)",paddingX:z.Z,children:(0,s.jsx)(G.Z,{name:"SafeSuspense_DomainLinkButtonWrapper_DomainLinkButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:u((0,s.jsx)(O.Z,{clientTrackingParams:K,domain:i,link:d,pinKey:{type:"deprecated",data:m},size:"lg",trafficSource:D}))})})})})]})}),T&&(0,s.jsx)(H,{name:"tag-button",children:(0,s.jsx)(G.Z,{name:"SafeSuspense_CloseupImageOverlay_CloseupTagButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(eo,{pin:m})})})})})]})};var ep=i(515171),eh=i(103423),em=i(120034),eg=i(169900),e_=i(514793),ey=i(322707),ef=i(45350),ex=i(953994),ev=i(521367),eb=i(680391),ew=i(632492),eS=i(542515),eP=i(194442),eI=i(758594);let ek=(0,eP.Z)(()=>Promise.all([i.e("74924"),i.e("63390"),i.e("26877"),i.e("63529"),i.e("71309")]).then(i.bind(i,696848)),void 0,"app-common-react-components-closeup-CloseupShuffle-CloseupShuffle");function ej({onClick:e,isHovered:t,pin:i,searchQuery:n,shouldPadImage:a,trafficSource:l,viewParameter:r,isORBACProfileManager:d,handleCollageOverlayToggle:c,handleMediaButtonClick:u}){let m,_;let{stelaDotAnimationType:x,onStelaDotAnimationComplete:v,animateShopButton:b,onShopButtonAnimationComplete:w,originalImageUrl:S,imageSignature:P,link:I,hasStelaResults:j,isScenePin:C,showStelaDotsOnScenePin:T,disablePinTagButton:L,showProductDetailPage:E,maxCloseupImageWidth:Z,imageWithPreview:F,showAnimatedExploreCta:R}=(0,eg.Z)({isHovered:t,pinKey:{type:"deprecated",data:i}}),V=(0,Y.Z)(),{mainImage:M,carouselInfo:B}=(0,f.r)(),z=(0,ey.Z)(),{peekRedesignFastFollowsEnabled:O}=(0,N.Z)(M),H=(0,y.useRef)(null),U=(0,y.useRef)(null),{domain:G,shuffle:$}=i,X=!!B?.carouselData,{naturalWidth:J,naturalHeight:q}=F,{closeupWithinMasonryEnabled:Q,isCloseupRelatedPinsAboveTheFoldEnabled:ee,peekCloseupEnabled:et,clientTrackingParams:ei,showCloseupContentRight:en,viewportSize:ea,setCalculatedImageHeight:el}=(0,g.x4)(),{isRTL:er}=(0,p.B)();(0,y.useEffect)(()=>{H.current&&el&&el(H.current.clientHeight)},[H,el]);let{borderStyle:eo}=(0,h.Z)({isSideBySide:en,isPadded:a,isRTL:er,closeupWithinMasonryEnabled:Q,peekCloseupEnabled:et}),{containerHeight:es,containerWidth:ed,horizontalOffset:ec,verticalOffset:eP}=(0,W.Z)({carouselData:B?.carouselData,mainImage:M,maxCloseupImageWidth:Z,shouldPadImage:a,pinKey:{type:"deprecated",data:i}}),[ej,eC]=(0,y.useState)({width:ed,height:es}),eT=(0,y.useCallback)(()=>{let e=ed>es?es/ed:1,t=H.current;if(!t)return;let i=t.offsetWidth*e;eC(e=>{let n={height:t.offsetHeight||i,width:t.offsetWidth};return e.height!==n.height||e.width!==n.width?n:e})},[es,ed]);(0,eS.Z)(eT,H);let eL=!!$&&z(),eE=(0,ex.Z)({isHiddenPin:i.is_hidden,isUnsafePin:i.is_unsafe}),{currentDomain:eZ}=(0,em.Z)({carouselData:i.carousel_data&&{carouselSlots:i.carousel_data.carousel_slots&&i.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:i.carousel_data?.index},domain:i.domain}),eA=eZ||G,eD={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0};if(B&&B.carouselData&&B.carouselData.id){let{carousel_slots:e=[],id:t,index:i=0}=B.carouselData;m=e[i]&&e[i].link,eD.carousel_slot_id=e[i]&&e[i].id,eD.carousel_data_id=t,eD.carousel_slot_index=i,eA=e[i]&&e[i].domain||eA}let eF=(0,k.Z)({type:"deprecated",data:i})();eF&&(eD.commerce_data=eF);let eR=m||I||S||"",{dominant_color:eV}=i,eK=(0,eb.Z)({href:{pathname:eR,state:{trackingParams:ei}},target:"blank",clientTrackingParams:ei,externalData:{auxData:eD,pin:i&&{attributionSourceId:i.attribution_source_id,board:i.board&&{url:i.board.url},campaignId:i.campaign_id,entityId:i.id,isDownstreamPromotion:i.is_downstream_promotion,isPromoted:i.is_promoted,pinner:i.pinner&&{username:i.pinner.username},pinPromotionId:i.pin_promotion_id,promoter:i.promoter&&{entityId:i.promoter.id},storyPinDataId:i.story_pin_data_id,trackingParams:i.tracking_params,advertiserId:i.advertiser_id}}}),eM=(0,s.jsx)(ef.Z,{id:"CloseupImage",children:(0,s.jsx)(eI.Z,{metricName:"CloseupImage",children:(0,s.jsx)(K,{borderStyle:eo,dominantColor:Q?D.yc:eV||"",fit:O||Q?void 0:"contain",imageWithPreview:F,pinId:i.id})})}),eB=eM;X&&(eB=(0,s.jsx)(A,{carouselData:B.carouselData,displayHeight:ee?ej?.height:es,displayWidth:ee?ej?.width:ed,pinKey:{type:"deprecated",data:i}})),eL&&(eB=(0,s.jsx)(ek,{clientTrackingParams:ei,fallback:eM,handleCollageOverlayToggle:c,naturalHeight:q,naturalWidth:J,pinId:i.id,shuffleId:$?.id,children:(0,s.jsx)(o.xu,{width:"100%",children:eM})}));let{maxHeight:ez,fiftyPercentWidth:eO,fiftyPercentHeight:eH}=(0,D.Re)(),{maxHeight:eW}=(0,e_.Z)({pinKey:{type:"deprecated",data:i}}),{showCarouselControls:eN,showCloseupShopDomainLinkButton:eU,showDebugSignalsFeedbackButton:eG,showDomainLink:e$,showDomainLinkButton:eX,showFlashlightButton:eJ,showPinTagButton:eY,showShopButton:eq,surfaceType:eQ}=(0,eh.Z)({carouselInfo:B,disablePinTagButton:L,domain:eA||"",isEmployee:V.isAuth&&!!V.isEmployee,isHovered:t,isScenePin:C,isCollageEnabled:eL,hasMetTrustAndSafetyCheck:eE,navLink:eR,pinKey:{type:"deprecated",data:i},showProductDetailPage:E,showStelaDotsOnScenePin:T,isORBACProfileManager:d});return Q?_=eW:O||(_="sm"===ea?eH:ez),(0,s.jsxs)(o.xu,{ref:H,alignSelf:Q?"center":void 0,dangerouslySetInlineStyle:{__style:{aspectRatio:J/q,backgroundColor:Q?void 0:D.yc}},"data-test-id":"closeup-body-image-container",height:Q?"100%":es,maxHeight:_,maxWidth:eO,position:"relative",width:Q?"100%":ed,children:[(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...eo,display:Q?"grid":"block"}},"data-test-id":"closeup-image",height:"100%",overflow:"hidden",width:"100%",children:eB}),(0,s.jsx)(eu,{animateShopButton:b,carouselInfo:B,domain:eA??G??"",handleMediaButtonClick:u,hasStelaResults:j,horizontalOffset:ec,imageSignature:P,isCloseupRelatedPinsAboveTheFoldEnabled:ee,isHovered:t,link:eR,maxCloseupImageWidth:Z,mediaViewerExpandButtonRef:U,navigationWrapper:t=>(0,s.jsx)(ep.Z,{href:eR,onClick:e,onNavigation:eK,children:t}),onShopButtonAnimationComplete:w,onStelaDotAnimationComplete:v,pin:i,searchQuery:n,shouldPadImage:a,showAnimatedExploreCta:R,showCarouselControls:eN,showCarouselEllipsis:!E,showCloseupShopDomainLinkButton:eU,showDebugSignalsFeedbackButton:eG,showDomainLink:e$,showDomainLinkButton:eX,showFlashlightButton:eJ,showPinTagButton:eY,showProductDetailPage:E,showShopButton:eq,showStelaDotsOnScenePin:T,stelaDotAnimationType:x,surfaceType:eQ,trafficSource:l,verticalOffset:eP,viewParameter:r}),U&&(0,s.jsx)(o.mh,{zIndex:ew.lI,children:(0,s.jsx)(ev.Qp,{anchor:U.current,experienceIds:[506692],flyoutSize:"md",idealDirection:"up",placementId:12,showCaret:!0,textWeight:"normal"})})]})}var eC=i(145687),eT=i(196805),eL=i(566431),eE=i(852796),eZ=i(417394),eA=i(176783),eD=i(967515),eF=i(408640),eR=i(893957),eV=i(764682),eK=i(63805);let eM=(e,t)=>e?13799:0===t?227:228,eB=({pages:e,viewType:t,viewParameter:i,pinId:n})=>{let{clearSeekTime:a}=(0,eD.RC)(),{setIdeaPinActivePage:l}=(0,eK.Ut)(),[r,o]=(0,y.useState)(0),[s,d]=(0,y.useState)(!0),[c,u]=(0,y.useState)(!0),[h,m]=(0,y.useState)(!1),[_,f]=(0,y.useState)(null),{isCloseupRelatedPinsAboveTheFoldEnabled:x}=(0,g.x4)(),b=(0,v.Z)(),w=e[r],S=(0,eE.g)(),P=(0,I.E)(),k=(0,y.useRef)(null),{blocks:[j]=[null]}=(0,eT.Z)({storyPinBlocks:w?.blocks||[],blocksToRender:[eA.h8.VIDEO]}),{seekTimes:C}=(0,eD.Hx)(),T=C&&C[n],L=j?.type===eA.h8.VIDEO&&j?.video,E=(0,p.B)().locale.toLowerCase(),Z=L&&(L?.video_list?.V_720P?.captions_urls||L?.video_list?.V_HLSV3_MOBILE?.captions_urls)||{},A=E&&Z[E]||Object.values(Z)[0]||"",D=()=>{P&&(P.addBinaryAnnotation("page.current.index",r,"I16"),P.addBinaryAnnotation("page.count",e.length,"I16"),P.addBinaryAnnotation("view.type",t,"I32"),P.addBinaryAnnotation("view.parameter",i,"I32")),(0,eZ.XJ)("page.current.index",r,"I16"),(0,eZ.XJ)("page.count",e.length,"I16"),(0,eZ.XJ)("view.type",t,"I32"),(0,eZ.XJ)("view.parameter",i,"I32")},F=(0,y.useCallback)(n=>{P&&P.abort("startNewPwt"),S&&(S.abort("startNewPwt"),S.start(),S.addBinaryAnnotation("page.current.index",n,"I16"),S.addBinaryAnnotation("page.count",e.length,"I16"),S.addBinaryAnnotation("view.type",t,"I32"),S.addBinaryAnnotation("view.parameter",i,"I32"))},[e.length,P,S,i,t]),R=(0,y.useCallback)(e=>{e&&e instanceof eF.B7&&(e.clear(),e=null)},[]),V=(0,y.useCallback)(t=>{R(k.current),!L&&e.length>1&&(k.current=new eF.B7(e=>{f({currentTime:e<1?e:1,duration:1})},()=>{t<e.length-1?(R(k.current),M(t+1)):(m(!0),d(!1))},eL.oN))},[e]),K=(0,y.useCallback)(e=>{f({currentTime:0,duration:1}),V(e)},[V]);(0,eR.Z)(()=>(x&&D(),K(r),()=>{k.current&&k.current instanceof eF.B7&&k.current.clear()}));let M=(0,y.useCallback)(e=>{s||d(!0),h&&m(!1),K(e),e!==r&&a(),o(e),l(e),F(e)},[r,a,K,s,l,h,F]);(0,y.useEffect)(()=>{if(h&&m(!1),k.current&&T){let e=k.current;e.pause(),e.remaining=eL.oN-T*eV.gJ,f({currentTime:T/eL.P6,duration:1})}},[T]);let B=()=>{d(!1),k.current&&k.current.pause(),b({event_type:9324,view_type:t,view_parameter:i,component:eM(h,r),object_id_str:n,aux_data:{story_pin_page_id:r}})},z=()=>{if(d(!0),k.current){let e=k.current;T&&T>0&&a(),e.resume()}else _||K(r);m(!1),b({event_type:9323,view_type:t,view_parameter:i,component:eM(h,r),object_id_str:n,aux_data:{story_pin_page_id:r}})},O=()=>{r<e.length-1&&(M(r+1),b({event_type:101,view_type:t,view_parameter:i,component:eM(h,r),element:12261,object_id_str:n}))};return{activePageIndex:r,captions:A,currentPage:w,handleMute:()=>{u(e=>!e)},handlePageChange:M,handlePause:B,handlePausePlay:()=>{h||(s?B():z())},handlePlay:z,handleUpdateVideoInfo:e=>{f({currentTime:e?.currentTime??0,duration:e?.duration??1})},handleVideoEnd:t=>{t===e.length-1&&(m(!0),d(!1),l(0)),t===r&&O()},handleVideoScrubbingNewPage:e=>{h&&m(!1),K(e),o(e),l(e),F(e)},handleWatchAgain:()=>{M(0)},isActive:s,isSeeking:!!T,mute:c,progressInfo:_,setMute:u,showEndCard:h}};var ez=i(532074),eO=i(161458),eH=i(187379),eW=i(661376),eN=i(410706),eU=i(639043),eG=i(151383),e$=i(450228),eX=i(317083);let eJ={width:508,height:640},eY={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",paddingTop:"30px",top:0};function eq({onClick:e,isHovered:t,pin:i,searchQuery:n,shouldPadImage:a,trafficSource:l,viewParameter:r,isORBACProfileManager:d,handleMediaButtonClick:c}){let u;let{stelaDotAnimationType:m,onStelaDotAnimationComplete:_,animateShopButton:x,onShopButtonAnimationComplete:v,originalImageUrl:b,imageSignature:w,link:S,hasStelaResults:P,isScenePin:I,showStelaDotsOnScenePin:j,disablePinTagButton:C,maxCloseupImageWidth:T,imageWithPreview:L,showAnimatedExploreCta:E}=(0,eg.Z)({pinKey:{type:"deprecated",data:i},isHovered:t}),Z=(0,Y.Z)(),{closeupWithinMasonryEnabled:A,isCloseupRelatedPinsAboveTheFoldEnabled:F,peekCloseupEnabled:R,viewportSize:V,clientTrackingParams:M,showCloseupContentRight:B}=(0,g.x4)(),{isRTL:z}=(0,p.B)(),O=(0,y.useRef)(null),{maxHeight:H,fiftyPercentHeight:N,fiftyPercentWidth:U}=(0,D.Re)(),{maxHeight:$}=(0,e_.Z)({pinKey:{type:"deprecated",data:i}}),[X,q]=(0,y.useState)(!1),{borderStyle:Q}=(0,h.Z)({isSideBySide:B,isPadded:a,isRTL:z,closeupWithinMasonryEnabled:A,peekCloseupEnabled:R}),ee=(0,ex.Z)({isHiddenPin:i.is_hidden,isUnsafePin:i.is_unsafe}),{mainImage:et}=(0,f.r)(),{domain:ei="",id:en,dominant_color:ea,story_pin_data:el,native_creator:er}=i,eo={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0},es=(0,k.Z)({type:"deprecated",data:i})();es&&(eo.commerce_data=es);let ed=S||b||"",{data:ec=[],isLoaded:em}=(0,eW.Z)({name:"StoryPinTaggedProductsResource",options:{id:i.id},noCache:!0}),{pages:ey=[]}=el||{},ef=[5,6,2],ev=ey.filter(e=>{let t=e?.layout;return void 0!==t&&!ef.includes(t)}),{activePageIndex:ew,captions:eS,currentPage:eP,handleMute:eI,handlePageChange:ek,handlePause:ej,handlePausePlay:eL,handlePlay:eE,handleUpdateVideoInfo:eZ,handleVideoEnd:eD,handleVideoScrubbingNewPage:eF,handleWatchAgain:eR,isActive:eV,isSeeking:eK,mute:eM,progressInfo:eq,showEndCard:eQ}=eB({pages:ev,viewType:3,viewParameter:r,pinId:en}),{blocks:e0}=(0,eT.Z)({storyPinBlocks:eP?.blocks||[],blocksToRender:[eA.h8.COMMENT_REPLY_STICKER,eA.h8.GENERIC_STICKER,eA.h8.HEADING,eA.h8.MENTION_STICKER,eA.h8.PARAGRAPH,eA.h8.PRODUCT_STICKER,eA.h8.VTO_MAKEUP_STICKER]}),{background_color:e1}=eP?.style||{},{blocks:[e3]=[null]}=(0,eT.Z)({storyPinBlocks:eP?.blocks||[],blocksToRender:[eA.h8.IMAGE,eA.h8.VIDEO]}),e2=e3?.type===eA.h8.VIDEO,e6=e2||ev.length>1,e7=(0,eb.Z)({href:{pathname:ed,state:{trackingParams:M}},target:"blank",clientTrackingParams:M,externalData:{auxData:eo,pin:i&&{attributionSourceId:i.attribution_source_id,board:i.board&&{url:i.board.url},campaignId:i.campaign_id,entityId:i.id,isDownstreamPromotion:i.is_downstream_promotion,isPromoted:i.is_promoted,pinner:i.pinner&&{username:i.pinner.username},pinPromotionId:i.pin_promotion_id,promoter:i.promoter&&{entityId:i.promoter.id},storyPinDataId:i.story_pin_data_id,trackingParams:i.tracking_params,advertiserId:i.advertiser_id}}}),{fontsLoaded:e8,mediaDataReceived:e4}=(0,e$.tq)({hasPin:!!i,pages:ey}),{showCloseupShopDomainLinkButton:e5,showDebugSignalsFeedbackButton:e9,showDomainLink:te,showDomainLinkButton:tt,showFlashlightButton:ti,showPinTagButton:tn,showShopButton:ta,surfaceType:tl}=(0,eh.Z)({disablePinTagButton:C,domain:ei,hasMetTrustAndSafetyCheck:ee,isEmployee:Z.isAuth&&!!Z.isEmployee,isHovered:t,isScenePin:I,navLink:ed,pinKey:{type:"deprecated",data:i},showStelaDotsOnScenePin:j,isORBACProfileManager:d}),{containerAspectRatio:tr,containerHeight:to,containerWidth:ts,horizontalOffset:td,letterBoxAspectRatio:tc,letterBoxedHeight:tu,letterBoxedWidth:tp,verticalOffset:th}=(0,W.Z)({mainImage:et,maxCloseupImageWidth:T,pinKey:{type:"deprecated",data:i}}),{height:tm,width:tg}=et;return i.story_pin_data?.is_deleted?(0,s.jsx)(eU.Z,{color:"secondary",height:eJ.height,rounding:4,width:eJ.width}):(A?u=$:R&&(u="sm"===V?N:H),(0,s.jsx)(o.xu,{alignSelf:A?"center":void 0,dangerouslySetInlineStyle:{__style:{...Q,aspectRatio:A?tg/tm:void 0,background:A?D.yc:e1||"#fff"}},"data-test-id":"closeup-body-image-container",height:A?"100%":to,maxHeight:u,maxWidth:U,onMouseEnter:()=>{e6&&q(!0)},onMouseLeave:()=>{q(!1)},position:"relative",width:A?"100%":ts,children:eP?(0,s.jsxs)(y.Fragment,{children:[!F&&(0,s.jsxs)(o.xu,{bottom:!0,"data-test-id":"closeup-image",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:[!e4&&(0,s.jsx)(K,{dominantColor:ea||"",imageWithPreview:L,pinId:en}),e3&&(0,s.jsx)(eO.Z,{activePageIndex:ew,block:e3,fontsLoaded:e8,isActive:!0,muteVideos:!0,onEnded:eD,onUpdateVideoInfo:eZ,ownerId:er?.id??"",pageAspectRatio:tr,pageHeight:to,pageIndex:0,pageWidth:ts,pin:i,pinId:en,pinKey:{type:"deprecated",data:i},stillLoading:!e4})]}),!e6&&(0,s.jsx)(eu,{animateShopButton:x,domain:ei,handleMediaButtonClick:c,hasStelaResults:P,imageSignature:w,isHovered:t,link:ed,maxCloseupImageWidth:T,mediaViewerExpandButtonRef:O,navigationWrapper:t=>(0,s.jsx)(ep.Z,{href:ed,onClick:e,onNavigation:e7,children:t}),onShopButtonAnimationComplete:v,onStelaDotAnimationComplete:_,pin:i,searchQuery:n,shouldPadImage:a,showAnimatedExploreCta:E,showCloseupShopDomainLinkButton:e5,showDebugSignalsFeedbackButton:e9,showDomainLink:te,showDomainLinkButton:tt,showFlashlightButton:ti,showPinTagButton:tn,showShopButton:ta,showStelaDotsOnScenePin:j,stelaDotAnimationType:m,surfaceType:tl,trafficSource:l,viewParameter:r}),F&&(X||!eV)&&(0,s.jsxs)(o.xu,{children:[(0,s.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eX.Ul,flexDirection:"column-reverse"}},display:"flex",height:eX.hy,paddingX:6,position:"absolute",width:"100%",zIndex:eA.Gf,children:(0,s.jsx)(eG.Z,{activePageIndex:ew,captionsUrl:eS,handleMute:eI,handlePause:ej,handlePausePlay:eL,handlePlay:eE,handleVideoScrubbingNewPage:eF,handleWatchAgain:eR,inMilliseconds:!0,isMuted:eM,isPanelOpen:!0,isPlaying:eV,isStoryPin:!0,onPageSelect:e=>ek(e),pageCount:ev.length,pages:ev,pinId:en,progressInfo:eq,showEndCard:eQ,showVideoControls:!0,viewParameter:156})}),(0,s.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...eY}},"data-test-id":"music-attribution",display:"flex",justifyContent:"center",overflow:"hidden",paddingY:5,position:"absolute",width:"100%",zIndex:eA.Gf,children:(0,s.jsx)(eC.Z,{handlePause:ej,handlePlay:eE,musicAttributions:eP?.music_attributions,shouldMute:eP?.should_mute,showEndCard:eQ})})]}),!F&&em&&e0.map((e,t)=>{let n=(ec||[]).find(t=>[t.id,t.cacheable_id].includes(e.pin_id));return(0,s.jsx)(eO.Z,{block:e,disableProductStickers:!0,fontsLoaded:e8,isActive:!1,muteVideos:!0,ownerId:er?.id??"",pageAspectRatio:tr,pageHeight:to,pageIndex:0,pageWidth:ts,pin:i,pinId:en,pinKey:null!=n?{type:"deprecated",data:n}:null,stillLoading:!e4},`${eP.id??""}-${e.type??""}-${t}`)}),F&&(0,s.jsxs)(o.iP,{disabled:!X||eQ,fullHeight:!0,onTap:eL,children:[(0,s.jsx)(eH.Z,{activePageIndex:ew,clientTrackingParams:M,customEndCard:!0,fontsLoaded:e8,horizontalOffset:td,isActive:eV,muteVideos:eM,onEnded:eD,onUpdateVideoInfo:eZ,ownerId:i.native_creator?.id??"",page:eP,pageAspectRatio:tc,pageHeight:tu,pageIndex:ew,pageWidth:tp,pin:i,pinId:en,productPins:ec,shouldLogTimeSpent:!0,stillLoading:!e4,verticalOffset:th,videoPinProgress:eq,viewParameter:r,viewType:3}),!eQ&&!eK&&ev.length>1&&!e2&&(0,s.jsx)(eN.Z,{playing:eV})]}),F&&eQ&&i.native_creator&&(0,s.jsx)(G.Z,{name:"SIIPMediaContainer_VideoEndCard",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:eA.s5,children:(0,s.jsx)(ez.default,{clientTrackingParams:i.trackingParams||i.tracking_params,imageSrc:i.image_url??"",pinDescription:i.description??"",pinId:i.id,rounded:!1,watchAgain:eR})})})})]}):eP?null:(0,s.jsx)(K,{dominantColor:A?D.yc:ea||"",fit:"contain",imageWithPreview:L,pinId:en})}))}var eQ=i(19817),e0=i(112658);let e1=e=>{let{isHovered:t,onImageClick:i,pin:n,searchQuery:a,shouldPadImage:l,trafficSource:r,viewParameter:o,isORBACProfileManager:c,handleCollageOverlayToggle:u,handleMediaButtonClick:p}=e,h=(0,k.Z)({type:"deprecated",data:n}),m=n.is_eligible_for_pdp?h():void 0,{isEligibleForStaticImageIdeaPin:_}=(0,eQ.Z)(n.should_open_in_stream,n.story_pin_data_id),{clientTrackingParams:y}=(0,g.x4)(),f=(0,s.jsx)(e0.Z,{auxData:m,clientTrackingParams:y,component:85,viewParameter:o,children:_?(0,s.jsx)(eq,{handleMediaButtonClick:p,isHovered:t,isORBACProfileManager:c,onClick:i,pin:n,searchQuery:a,shouldPadImage:l,trafficSource:r,viewParameter:o}):(0,s.jsx)(ej,{handleCollageOverlayToggle:u,handleMediaButtonClick:p,isHovered:t,isORBACProfileManager:c,onClick:i,pin:n,searchQuery:a,shouldPadImage:l,trafficSource:r,viewParameter:o})});return l?(0,s.jsx)(d,{children:f}):f};var e3=i(573375),e2=i(919917),e6=i(478428);function e7(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let e8=void 0!==l?l:l=i(264370);class e4 extends y.Component{constructor(...e){super(...e),e7(this,"handleVisibilityChanged",e=>{let{pinId:t,isPromoted:i,setCurrentVideo:n,pauseAutoplay:a,videosAutoplaying:l,videoStartTime:r}=this.props,o=(0,e6.Z)(t,l);e&&!o?n({pinId:t,isPromoted:!!i,currentTime:r}):!e&&o&&a({pinId:t,isPromoted:!!i,currentTime:this.currentVideoCurrentTime})}),e7(this,"handleVideoTimeChange",e=>{let{pinId:t,videosAutoplaying:i}=this.props;(0,e6.Z)(t,i)&&(this.currentVideoCurrentTime=e.time)})}componentDidUpdate(e){let{appInFocus:t}=e,{appInFocus:i,pauseAutoplay:n,pinId:a,isPromoted:l,setCurrentVideo:r,videosAutoplaying:o}=this.props,s=(0,e6.Z)(a,o),d=(0,e2.Z)(a,o);this.currentVideoCurrentTime=d??this.currentVideoCurrentTime,i!==t&&!i&&s?(this.pausedDueToBrowserOutOfFocus=!0,n({pinId:a,isPromoted:!!l,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:a,isPromoted:!!l,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){let{pinId:e,isPromoted:t,pauseAutoplay:i}=this.props;i({pinId:e,isPromoted:!!t,currentTime:this.currentVideoCurrentTime})}render(){let{pauseAutoplay:e,pin:t,setCurrentVideo:i,videoStartTime:n,videosAutoplaying:a,...l}=this.props;return(0,s.jsx)(e3.Z,{onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!1,...l,children:(0,s.jsx)(x.Z,{...l,onTimeChange:this.handleVideoTimeChange,pinKey:t})})}}function e5(e){let{pinId:t,pinKey:i,isPromoted:n}=e,a=(0,b.Z)(e8,i),{appUI:{appInFocus:l,videosAutoplaying:r},pauseAutoplay:o,setCurrentVideo:d}=(0,j.I)(),{organicVideosAutoplaying:c,promotedVideosAutoplaying:u}=r,p=n?u[t]:c[t];return(0,s.jsx)(e4,{...e,appInFocus:l,pauseAutoplay:o,pin:a,setCurrentVideo:d,videosAutoplaying:r,videoStartTime:p?p.currentTime:null})}var e9=i(4533),te=i(34550),tt=i(918617);let ti=(0,y.lazy)(()=>i.e("74993").then(i.bind(i,313072))),tn=({children:e,name:t})=>(0,s.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":`experimental-closeup-image-overlay-layer-${t}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),ta=void 0!==r?r:r=i(609311),tl=({closeupIsFirstPageInHistoryStack:e,customThumbnail:t,imageContainerRef:i,isWideVideo:n,pin:a,pinKey:l,shouldPadImage:r,flyoutShareProps:c,video:u,isORBACProfileManager:p})=>{let h=(0,b.Z)(ta,l),_=!!a.promoter&&!a.is_downstream_promotion,y=_&&!a.is_eligible_for_web_closeup,{access:f,should_mute:x}=a||{},v=!!f&&f.includes("tag")||p,{closeupWithinMasonryEnabled:w}=(0,g.x4)(),{closeupBodyWidth:S}=(0,Q.K4)(),{fiftyPercentWidth:P}=(0,D.Re)(),{maxHeight:I}=(0,e_.Z)({pinKey:h}),k=Math.max((S??1)/("number"==typeof I?I:1),(u.hls?.width??u?.mp4?.width??0)/(u.hls?.height??u?.mp4?.height??0)),j=w?S:m.Gg-m.d2,C="undefined"!=typeof window&&0===te.ZP.getItem(e9._e),T=(0,s.jsxs)(tt.Z,{isVideo:!0,isWideVideo:n,shouldPadImage:r,styleOverrides:r&&!w?{maxWidth:{maxWidth:j},minWidth:{minWidth:j},height:{},borderRadius:16}:{},variant:"default",children:[(0,s.jsx)(o.xu,{ref:i,"data-test-id":"closeup-video-with-visibility",maxHeight:I,maxWidth:P,width:"100%",children:(0,s.jsx)(e5,{aspectRatio:w?k:void 0,autoplay:!C,customThumbnail:t,flyoutShareProps:c,isPromoted:_,loop:y,muted:x||e,objectFit:w?"contain":void 0,pinId:a.id,pinKey:h,shouldMute:x,variant:"default",video:u})}),v&&(0,s.jsx)(tn,{name:"tag-button",children:(0,s.jsx)(G.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,s.jsx)(J.Z,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(ti,{pin:a})})})})})]});return r?(0,s.jsx)(d,{children:T}):T};var tr=i(239321);let to=e=>{let{clientTrackingParams:t,closeupIsFirstPageInHistoryStack:i,imageContainerRef:n,flyoutShareProps:a,isWideVideo:l,pin:r,shouldPadImage:d,searchQuery:c,trafficSource:u,isORBACProfileManager:p,isHovered:h,handleCollageOverlayToggle:m,onImageClick:y,viewParameter:x,handleMediaButtonClick:v}=e,{video:b,imgSrc:w,isEmbeddedVideo:S}=(0,f.r)(),{closeupWithinMasonryEnabled:P}=(0,g.x4)(),I=(0,s.jsx)(tr.Z,{clientTrackingParams:t,hovered:h,pinKey:{type:"deprecated",data:r},viewType:3,children:(0,s.jsx)(e1,{handleCollageOverlayToggle:m,handleMediaButtonClick:v,isHovered:h,isORBACProfileManager:p,onImageClick:y,pin:r,searchQuery:c,shouldPadImage:d,trafficSource:u,viewParameter:x})});if(b&&(I=(0,s.jsx)(tl,{closeupIsFirstPageInHistoryStack:i,customThumbnail:w,flyoutShareProps:a,imageContainerRef:n,isORBACProfileManager:p,isWideVideo:l,pin:r,pinKey:{type:"deprecated",data:r},shouldPadImage:d,video:b})),S){let e="50%",t=r.attribution&&(r.attribution.author_name||r.attribution.url)?r.attribution.provider_name:null;"soundcloud"===t?e="30%":"vin"===t&&(e="100%"),I=(0,s.jsx)(_,{embedUrl:r.embed?.src,isWideVideo:l,paddingBottom:e,shouldPadImage:d})}return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{overflow:P?"clip":void 0}},rounding:P?4:void 0,children:I})}},169900:function(e,t,i){i.d(t,{Z:()=>P});var n,a=i(667294);i(167912);var l=i(918186),r=i(322707),o=i(752031),s=i(953994),d=i(907022),c=i(138596),u=i(613567),p=i(986523),h=i(462867),m=i(200619),g=i(601871),_=i(800640),y=i(133546),f=i(767415);let x=void 0!==n?n:n=i(977357),v=e=>{let t=new Image;t.loading="lazy",t.src=e;let{complete:i}=t;return t.src="",i},b=["736x","564x","474x","236x"],w=new RegExp(/\/(\d+x|originals)\//),S=e=>{for(let t of b){let i=e.replace(w,`/${t}/`);if(v(i))return(0,f.nP)("web.closeup.cached_preview_image.found",{tags:{resolution:t}}),i}return(0,f.nP)("web.closeup.cached_preview_image.not_found"),null};function P({isHovered:e,pinKey:t}){let i=(0,c.ZP)(),n=(0,h.Z)(),{checkExperiment:f}=(0,u.F)(),v=(0,m.Z)(),{mainImage:b,carouselInfo:w,previewImage:P,isGif:I,imgSrc:k}=(0,o.r)(),j=(0,r.Z)(),C=(0,d.Z)(x,t),T=(0,p.Z)(),{aggregatedPinData:L,altText:E,autoAltText:Z,isEligibleForPdp:A,isEligibleForRelatedProducts:D,isHidden:F,isUnsafe:R,pinner:V,richMetadata:K,visualObjects:M,trackedLink:B,link:z,method:O,shuffle:H}=C,W=(M??[]).some(e=>e.isStela),N=!A&&w?.carouselData,U=!!L?.isShopTheLook,G=!!H&&j(),$=!!D&&!U&&!A&&!N&&!G,X=(0,s.Z)({isHiddenPin:F,isUnsafePin:R}),J=$&&f("web_remove_stela").anyEnabled,Y=!J&&X&&$&&W,q=void 0!==M&&!$||J,Q=(0,g.nl)(n,v)&&f("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,[ee,et]=(0,a.useState)("inOut"),[ei,en]=(0,a.useState)(!0),ea=(0,a.useCallback)(()=>{en(!1)},[en]);(0,a.useEffect)(()=>{ei&&e&&et("none")},[ei,e,ea,et,Y]);let el=C.imageSpec_orig?.url,er=w?.carouselData?function(e){let{carousel_slots:t,index:i}=e;return t&&void 0!==i&&(t[i]||{}).image_signature?t[i].image_signature:null}(w.carouselData):C.imageSignature,eo=B||z,es="catalog_bulk_create"===O||K?.products,ed=eo&&es?decodeURIComponent(eo):eo,ec=(0,g.Ms)(n,v)===V?.username&&Q,{closeupWithinMasonryEnabled:eu,paneWidth:ep,showProductDetailPage:eh}=(0,y.x4)(),{closeupBodyWidth:em}=(0,_.K4)(),{height:eg,width:e_}=b,ey={naturalWidth:e_,naturalHeight:eg,alt:(0,l.Z)({altText:E,autoAltText:Z,i18n:i}),src:I?k:!T&&k?.startsWith("https://i.pinimg.com/")?S(k)||P?.url||"":P?.url||""},ef={naturalHeight:ey.naturalHeight,naturalWidth:ey.naturalWidth,mainImage:{alt:ey.alt,src:I?ey.src:k},...!I&&{previewImage:{alt:"",src:I?"":ey.src}}};return{animateShopButton:ei,disablePinTagButton:ec,hasStelaResults:W,imageProps:ey,imageSignature:er,imageWithPreview:ef,isScenePin:$,link:ed,maxCloseupImageWidth:eu&&em||ep,onShopButtonAnimationComplete:ea,onStelaDotAnimationComplete:()=>et("none"),originalImageUrl:el,showAnimatedExploreCta:q,showProductDetailPage:eh,showStelaDotsOnScenePin:Y,stelaDotAnimationType:ee}}},532074:function(e,t,i){i.r(t),i.d(t,{default:()=>u});var n=i(883119),a=i(768576),l=i(584843),r=i(104999),o=i(138596),s=i(176783),d=i(893957),c=i(785893);let u=({clientTrackingParams:e,watchAgain:t,imageSrc:i,pinDescription:u,pinId:p,rounded:h=!0})=>{let m=(0,o.ZP)(),g=(0,r.Z)();(0,d.Z)(()=>{g({event_type:120,view_type:3,component:13799})});let _=()=>{t()};return(0,c.jsx)(n.xu,{alignItems:"center",bottom:!0,color:"dark","data-test-id":"story-pin-end-card",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,opacity:.9,padding:4,position:"absolute",right:!0,rounding:h?s.yR:0,top:!0,width:"100%",children:(0,c.jsx)(n.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",width:"100%",children:(0,c.jsxs)(n.kC,{alignContent:"start",direction:"column",gap:{row:0,column:8},justifyContent:"start",children:[(0,c.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,c.jsx)(l.default,{buttonText:m._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),clientTrackingParams:e,imageSrc:i,pinDescription:u,pinId:p,shownWithinMasonry:!0})}),(0,c.jsxs)(n.kC,{alignItems:"center",children:[(0,c.jsx)(a.Z,{accessibilityLabel:m._('Replay button', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page'),handleClick:_,icon:"refresh",iconColor:"white",testId:"closeup-replay-button"}),(0,c.jsx)(n.xu,{children:(0,c.jsx)(n.iP,{onTap:_,rounding:2,children:(0,c.jsx)(n.X6,{color:"light",overflow:"normal",size:"400",children:m._('Replay', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page')})})})]})]})})})}},187379:function(e,t,i){i.d(t,{Z:()=>u});var n=i(883119),a=i(788730),l=i(161458),r=i(196805),o=i(176783),s=i(112658),d=i(133546),c=i(785893);function u({activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:i,customEndCard:u,fontsLoaded:p,horizontalOffset:h,isActive:m,isPreview:g,muteVideos:_,onEnded:y,onFlyoutOpen:f,onUpdateVideoInfo:x,ownerId:v,page:b,pageAspectRatio:w,pageHeight:S,pageIndex:P,pageWidth:I,pin:k,pinId:j,productPins:C,shouldLogTimeSpent:T=!0,stillLoading:L=!1,verticalOffset:E,videoPinProgress:Z,viewParameter:A,viewType:D}){let{closeupWithinMasonryEnabled:F}=(0,d.x4)(),{background_color:R}=b.style||{},{nonRenderableBlocks:V,blocks:K}=(0,r.Z)({storyPinBlocks:b.blocks??[]}),M=!!K.find(e=>e.type===o.h8.VIDEO),B=!!K.find(e=>!!e.video&&e.type===o.h8.VIDEO&&e.video_signature),z=V.find(e=>e.type===o.h8.MUSIC),O=z?.type==="story_pin_music_block"?z.provider_recording_id:void 0,H=()=>(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{background:F?a.yc:R||"#fff"}},height:"100%",children:!g&&K.filter(e=>!M||B||e.type===o.h8.VIDEO).map((t,n)=>{let a=(C||[]).find(e=>[e.id,e.cacheable_id].includes(t.pin_id));return(0,c.jsx)(l.Z,{activePageIndex:e,block:t,closeupStoryPinViewability:i,customEndCard:u,disableProductStickers:!0,fontsLoaded:p,horizontalOffset:h,isActive:m,isSplitLayout:3===b.layout,musicRecordingId:O,muteVideos:_,onEnded:y,onFlyoutOpen:f,onUpdateVideoInfo:x,ownerId:v,pageAspectRatio:w,pageHeight:S,pageIndex:P,pageWidth:I,pin:k,pinId:j,pinKey:null!=a?{type:"deprecated",data:a}:null,stillLoading:L,verticalOffset:E,videoPinProgress:Z},`${b.id??""}-${t.type??""}-${n}`)})});return T?(0,c.jsx)(s.Z,{auxData:{story_pin_page_id:P},clientTrackingParams:t,component:0===P?227:228,shouldUseGrandparentId:!0,view:D,viewParameter:A,children:H()}):H()}},196805:function(e,t,i){i.d(t,{Z:()=>l});var n=i(176783);let a=[n.h8.COMMENT_REPLY_STICKER,n.h8.GENERIC_STICKER,n.h8.HEADING,n.h8.IMAGE,n.h8.MENTION_STICKER,n.h8.PARAGRAPH,n.h8.PRODUCT_STICKER,n.h8.VIDEO,n.h8.VTO_MAKEUP_STICKER];function l({storyPinBlocks:e=[],blocksToRender:t=a}){let i=[],l=[],r=[];return e.forEach(e=>{t.includes(e.type)?e.type===n.h8.PARAGRAPH||e.type===n.h8.HEADING?l.push(e):r.push(e):i.push(e)}),r.push(...l),{nonRenderableBlocks:i,textBlocks:l,blocks:r}}},752031:function(e,t,i){i.d(t,{A:()=>p,r:()=>c});var n,a=i(667294);i(167912);var l=i(213491),r=i(907022),o=i(566431),s=i(785893);let{Provider:d,useHook:c}=(0,l.Z)("PageHeader"),u=void 0!==n?n:n=i(254267),p=({children:e,pinKey:t,overrideValue:i={}})=>{let n=(0,r.Z)(u,t),l=n?.videos,c=n?.embed,p=(0,a.useMemo)(()=>l?.videoList?.v720P?.url?{duration:l.videoList.v720P.duration||void 0,height:l.videoList.v720P.height||void 0,thumbnail:l.videoList.v720P.thumbnail||void 0,url:l.videoList.v720P.url||void 0,width:l.videoList.v720P.width||void 0,captions_urls:l.videoList.v720P.captionsUrls||void 0}:void 0,[l?.videoList?.v720P?.duration,l?.videoList?.v720P?.height,l?.videoList?.v720P?.thumbnail,l?.videoList?.v720P?.url,l?.videoList?.v720P?.width,l?.videoList?.v720P?.captionsUrls]),h=(0,a.useMemo)(()=>l?.videoList?.vHLSV4?.url?{duration:l.videoList.vHLSV4.duration||void 0,height:l.videoList.vHLSV4.height||void 0,thumbnail:l.videoList.vHLSV4.thumbnail||void 0,url:l.videoList.vHLSV4.url||void 0,width:l.videoList.vHLSV4.width||void 0}:void 0,[l?.videoList?.vHLSV4?.duration,l?.videoList?.vHLSV4?.height,l?.videoList?.vHLSV4?.thumbnail,l?.videoList?.vHLSV4?.url,l?.videoList?.vHLSV4?.width]),m=(0,a.useMemo)(()=>l?.videoList?.vHLSV3MOBILE?.url?{duration:l.videoList.vHLSV3MOBILE.duration||void 0,height:l.videoList.vHLSV3MOBILE.height||void 0,thumbnail:l.videoList.vHLSV3MOBILE.thumbnail||void 0,url:l.videoList.vHLSV3MOBILE.url||void 0,width:l.videoList.vHLSV3MOBILE.width||void 0}:void 0,[l?.videoList?.vHLSV3MOBILE?.duration,l?.videoList?.vHLSV3MOBILE?.height,l?.videoList?.vHLSV3MOBILE?.thumbnail,l?.videoList?.vHLSV3MOBILE?.url,l?.videoList?.vHLSV3MOBILE?.width]),g=(0,a.useMemo)(()=>{let e=p||h||m;return l?.entityId&&e?{id:l.entityId,hasVideo:e,mp4:p||void 0,hls:h||void 0,hlsv3:m||void 0}:null},[h,m,p,l?.entityId]),_=c?.src,y=c?.subtype==="pinstory",f=(0,o.sY)(c?.type),x=n?.imageSpec_736x||n?.imageSpec_564x||n?.imageSpec_orig||n?.imageSpec_474x||n?.imageSpec_236x,v=n?.imageSpec_1200x||n?.imageSpec_orig||n?.imageSpec_736x||n?.imageSpec_564x||n?.imageSpec_474x||n?.imageSpec_236x,b=n?.imageSpec_236x,w=(0,a.useMemo)(()=>{let e={mainImage:{height:x?.height??1,url:x?.url??"",width:x?.width??1},previewImage:b?.url?{height:b.height??1,url:b.url??"",width:b.width??1}:null,...i};return{embed:c,isEmbeddedVideo:!!_&&!f&&!y,video:g,imgSrc:f&&c?.src?c.src:e.mainImage.url,isGif:f,mediaViewerImage:{height:v?.height??1,url:v?.url??"",width:v?.width??1},...e}},[c,_,f,y,x,i,b?.height,b?.url,b?.width,v,g]);return(0,s.jsx)(d,{value:w,children:e})}},322707:function(e,t,i){i.d(t,{Z:()=>r});var n=i(613567),a=i(774838),l=i(739405);let r=()=>{let{isAuthenticated:e}=(0,a.B)(),t=(0,l.HG)(),{checkExperiment:i}=(0,n.F)();return()=>e&&t&&i("auth_dweb_shuffle_renderer_closeup_v2").anyEnabled}},758724:function(e,t,i){i.d(t,{Z:()=>o});var n=i(616550),a=i(774838),l=i(739405),r=i(683372);let o=({isShufflePin:e})=>{let{isAuthenticated:t}=(0,a.B)(),i=(0,l.HG)(),o=(0,r.C)((0,n.TH)());return{isCloseupMediaViewerEnabled:t&&i&&o&&!e}}},912046:function(e,t,i){i.d(t,{Z:()=>c}),i(167912);var n,a=i(221175),l=i(907022),r=i(382964),o=i(383903),s=i(371266);let d=void 0!==n?n:n=i(554519);function c({pinKey:e,requestParams:t,surfaceType:i,topLevelTrafficSource:n,skipStela:c=!1}){let u=(0,l.Z)(d,e),p=(u.visualObjects||[]).filter(e=>e.isStela),{getNormalizedPinImage:h}=(0,r.Z)({pinKey:u,maxWidth:a.Wm}),{height:m,width:g}=h(),_="";if(p.length>0&&!c){let[e]=p,{x:a,y:l,w:r,h:d}=e,c=e&&(0,o.Z)({cropArea:{x:a,y:l,w:r,h:d},scaledWidth:g,scaledHeight:m});_=c&&(0,s.Z)({cropArea:c,cropSource:9,surfaceType:i,requestParams:t,title:e.label,trafficSource:n})}else _=(0,s.Z)({surfaceType:i,trafficSource:n});return{url:`/pin/${u.entityId}/visual-search/${_}`,hasStelaObjectsAfterFilter:p.length>0}}},584843:function(e,t,i){i.r(t),i.d(t,{default:()=>s});var n=i(667294),a=i(616550),l=i(299234),r=i(575820),o=i(785893);function s({buttonText:e,clientTrackingParams:t,imageSrc:i,pinDescription:s,pinId:d,shownWithinMasonry:c}){let u=(0,a.TH)(),[p,h]=(0,n.useState)(!!(0,r.mB)(u.search).share);return(0,o.jsx)(l.default,{buttonText:e,controllerOptions:{flyoutDisplayOptions:{showCaret:!0,shownWithinMasonry:c},isFlyoutOpen:p,loggingOptions:{component:228,element:10942,viewParameter:157,viewType:3},onFlyoutDismiss:()=>h(!1),onToggleFlyout:()=>h(!p),sendObject:{type:"pin",description:s,id:d,imageUrl:i,url:`/pin/${d}/`,clientTrackingParams:t}},iconColor:"white"})}},200301:function(e,t,i){function n(e){return e?[e["736x"],e["564x"],e["474x"],e["236x"]].find(e=>e?.url)??null:null}i.d(t,{Z:()=>n})},953994:function(e,t,i){function n({isHiddenPin:e,isUnsafePin:t}){return!e&&!t}i.d(t,{Z:()=>n})},288692:function(e,t,i){async function n(e){return new Promise((t,i)=>{let n=document.createElement("img");n.onerror=()=>i(Error(`Image failed to load with src ${e}`)),n.onload=()=>t(!0),n.src=e})}async function a(e){try{let t=await fetch(e,{method:"HEAD"}),i=(await t.blob()).type.startsWith("image/");{let t=await n(e);return i&&t}}catch(e){return!1}}i.d(t,{Z:()=>a})},978097:function(e,t,i){i.d(t,{NC:()=>l,Rc:()=>o,WK:()=>d,X9:()=>a,b9:()=>n,f9:()=>s,gu:()=>r});let n="pin-builder-font-faces",a="system-font-faces",l="pin-builder-education-font-faces",r="licensed",o="system",s="brand",d=4},998727:function(e,t,i){i.d(t,{Z:()=>n});let n=e=>{let t={};e.forEach(({label:e,timestamp:i})=>{t={...t,[e]:(t[e]||[]).concat([i])}});let i=Object.freeze({});return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,n)=>{let a=n?`${e}_${n+1}`:e;i={...i,[a]:t}})}),i}},213539:function(e,t,i){i.d(t,{Z:()=>eb});var n=i(667294),a=i(616550),l=i(883119),r=i(145687),o=i(788730),s=i(187379),d=i(581722),c=i(138596),u=i(680391),p=i(573375),h=i(228612),m=i(785893);let g=e=>{let t=(0,c.ZP)(),{sourceUrl:i,clientTrackingParams:n,linkText:a,displayUrl:r,image:o,pageId:s,canonicalUrl:p,pinId:g,onTouch:_,onClickThrough:y,isLoading:f}=e,x={story_pin_page_id:s,story_pin_data_id:(0,d.v9)(t=>e.pinId&&t.pins?.[e.pinId]?.story_pin_data_id),src_url:i,canonical_url:p},v=()=>{y&&y({auxData:x})},b=(0,m.jsxs)(l.xu,{alignItems:"center",borderStyle:"sm",display:"flex",overflow:"hidden",rounding:2,children:[(0,m.jsx)(l.xu,{alignItems:"center",color:f||o&&o.url?void 0:"secondary",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray"}},display:"flex",flex:"none",height:80,justifyContent:"center",minWidth:80,width:80,children:f?(0,m.jsx)(l.$j,{accessibilityLabel:t._('Loading website', 'a11y for loading spinner', 'a11y for loading spinner'),show:!0}):o&&o.url?(0,m.jsx)(l.Ee,{alt:a,fit:"cover",naturalHeight:o.height??1,naturalWidth:o.width??1,src:o.url}):(0,m.jsx)(l.JO,{accessibilityLabel:t._('Default link block icon', 'Icon for default link blocks without an image', 'Icon for default link blocks without an image'),color:"subtle",icon:"link",size:35})}),(0,m.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},flex:"grow",overflow:"hidden",paddingX:5,children:[(0,m.jsx)(l.xv,{lineClamp:1,weight:"bold",children:a}),(0,m.jsx)(l.xv,{color:"shopping",size:"200",children:r})]})]}),w=(0,h.S6)()(g),S=(0,u.Z)({href:{pathname:i,state:{trackingParams:n}},target:"blank",clientTrackingParams:n,externalData:w?{pin:w&&{attributionSourceId:w.attribution_source_id,board:w.board&&{url:w.board.url},campaignId:w.campaign_id,entityId:w.id,isDownstreamPromotion:w.is_downstream_promotion,isPromoted:w.is_promoted,pinner:w.pinner&&{username:w.pinner.username},pinPromotionId:w.pin_promotion_id,promoter:w.promoter&&{entityId:w.promoter.id},storyPinDataId:w.story_pin_data_id,trackingParams:w.tracking_params,advertiserId:w.advertiser_id}}:void 0});return _?(0,m.jsx)(l.iP,{onTap:_,rounding:2,children:b}):(0,m.jsx)(l.Tg,{href:i,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),v(),S({event:e})},rel:"nofollow",rounding:2,target:"blank",children:b})},_=e=>(0,m.jsx)(p.Z,{...e,children:(0,m.jsx)(g,{...e})});var y=i(230201),f=i(176783);let x=(0,i(194442).Z)(()=>Promise.all([i.e("90562"),i.e("15564")]).then(i.bind(i,129460)),void 0,"app-common-react-components-Activities-Utils-Linkify"),v=({block:e,clientTrackingParams:t,pageId:i,pinId:n,onClickThrough:a})=>{let{logContextEvent:r}=(0,y.v)();switch(e.type){case f.h8.LINK:let{canonical_url:o,image:s,normalized_url:d,src_url:c,text:u=""}=e,p=s?.images?.["345x"];if(s&&c&&d&&o)return(0,m.jsx)(l.xu,{marginTop:5,children:(0,m.jsx)(_,{canonicalUrl:o,clientTrackingParams:t,displayUrl:d,image:p,linkText:u,onClickThrough:a,onVisibilityChanged:e=>{e&&r({event_type:120,view_type:3,view_parameter:157,component:228,element:11157,object_id_str:n,aux_data:{story_pin_page_id:i,srcUrl:c,canonicalUrl:o}})},pageId:i,pinId:n,sourceUrl:c})});return null;case f.h8.HEADING:{let{text:t=""}=e;return(0,m.jsx)(l.xu,{marginBottom:4,paddingX:2,children:(0,m.jsx)(l.X6,{accessibilityLevel:2,overflow:"normal",size:"500",children:t})})}case f.h8.PARAGRAPH:{let{text:t=""}=e;return(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},paddingX:2,children:(0,m.jsx)(l.xv,{children:(0,m.jsxs)(x,{children:[" ",t," "]})})})}default:return null}};var b=i(59111);let w=`
@media (min-height: 0) {
  .StoryPinText {
    padding: 15px;
  }
  .StoryPinText span {
    font-size: 12px;
  }
  .StoryPinText h2 {
    font-size: 18px;
  }
}

@media (min-height: 600px) {
  .StoryPinText {
    padding: 2.5vh;
  }
  .StoryPinText span {
    font-size: 2vh;
  }
  .StoryPinText h2 {
    font-size: 3vh;
  }
}

@media (min-height: 800px) {
  .StoryPinText {
    padding: 20px;
  }
  .StoryPinText span {
    font-size: 16px;
  }
  .StoryPinText h2 {
    font-size: 24px;
  }
}
`,S=e=>{let{blocks:t,clientTrackingParams:i,pageId:a,pinId:l,onClickThrough:r}=e;return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(b.Z,{unsafeCSS:w}),(0,m.jsx)("div",{className:"StoryPinText",children:t.filter(e=>e).map((e,t)=>(0,m.jsx)(v,{block:e,clientTrackingParams:i,onClickThrough:r,pageId:a,pinId:l},t))})]})};var P=i(690070);let I=o._B*f.ap,k=`
.StoryPinTextDrawer {
  background: #fff;
  border-top-left-radius: 32px;
  border-top-right-radius: 32px;
  bottom: 0;
  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 20px 0;
  box-sizing: border-box;

  height: auto;
  max-height: 15%;
  opacity: 0.625;
  position: absolute;
  transition: max-height 0.15s ease-in, opacity 0.15s ease-in;
  width: 100%;
}

.StoryPinTextDrawer:hover {
  max-height: 70%;
  opacity: 1;
  overflow: scroll;
}
`;function j(e){let t=(0,c.ZP)(),{activePageIndex:i,clientTrackingParams:a,hideText:r,isActive:s,isCoverPage:d,muteVideos:u,onClickThrough:p,page:{image_adjusted:h,image:g,blocks:_,video:y,id:f},pageIndex:x,pageWidth:v,pin:w,pinId:j}=e,{images:C={}}=h||g||{},T=C["750x"],{video_list:L={}}=y||{},E=L.V_HLSV3_MOBILE||L.V_720P;if(!T&&!E)return null;let Z=v/o._B;return(0,m.jsxs)(n.Fragment,{children:[!!y&&!!E&&(0,m.jsx)(P.Z,{activePageIndex:i,blockHeight:I*Z,blockWidth:o._B*Z,isPlaying:s,muted:u,pageIndex:x,pin:w,pinId:j,video:y}),T&&T.url&&!E&&(0,m.jsx)(l.Ee,{alt:function(e){let t="";for(let i of e.blocks??[])[1,0].includes(i.block_type)&&(t=i.text?i.text:"");return t??""}(e.page)||t._('Story pin image', 'Alt text for story pin image', 'Alt text for story pin image'),fit:d?"cover":"contain",naturalHeight:T.height??1,naturalWidth:T.width??1,src:T.url}),_&&_.length>0&&!r&&(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(b.Z,{unsafeCSS:k}),(0,m.jsx)("div",{className:"StoryPinTextDrawer",children:(0,m.jsx)(S,{blocks:_,clientTrackingParams:a,onClickThrough:p,pageId:f,pinId:j})})]})]})}let C=e=>{let{page:{image_adjusted:t,blocks:i}}=e,{images:a={}}=t||{},r=a["750x"];if(!r)return null;let{width:o,height:s}=r;return(0,m.jsx)(n.Fragment,{children:r&&r.url&&(0,m.jsx)(l.Ee,{alt:(i??[]).map(e=>e.text||"").join(),fit:"contain",naturalHeight:s??1,naturalWidth:o??1,src:r.url})})};var T=i(295472),L=i(400962),E=i(661376),Z=i(702844),A=i(112658),D=i(15392),F=i(49254);function R({children:e,clientTrackingParams:t,closeupStoryPinViewability:i,pin:n,productPins:a,viewParameter:l,viewType:r}){let{previous:o,forward:d}=(0,L.Hv)(),c=0===o.length&&0===d.length,u=(0,F.t)();return(0,m.jsx)(Z.o,{closeupPaneWidth:D.Gg,headerHeight:u,isLandingPage:c,loadFonts:T.Z,productPins:a,renderStoryPinMediaLayout:({activePageIndex:e,hideText:i,isActive:a,isCoverPage:l,muteVideos:r,onClickThrough:o,page:s,pageIndex:d,pageWidth:c,pinId:u})=>(0,m.jsx)(j,{activePageIndex:e,clientTrackingParams:t,hideText:i,isActive:a,isCoverPage:l,muteVideos:r,onClickThrough:o,page:s,pageIndex:d,pageWidth:c,pin:n,pinId:u}),renderStoryPinPage:({activePageIndex:e,customEndCard:a,fontsLoaded:o,isActive:d,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:h,page:g,pageAspectRatio:_,pageHeight:y,pageWidth:f,ownerId:x,pinId:v,productPins:b,shouldLogTimeSpent:w,stillLoading:S,videoPinProgress:P})=>(0,m.jsx)(s.Z,{activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:i,customEndCard:a,fontsLoaded:o,isActive:d,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:h,ownerId:x,page:g,pageAspectRatio:_,pageHeight:y,pageIndex:e,pageWidth:f,pin:n,pinId:v,productPins:b,shouldLogTimeSpent:w,stillLoading:S,videoPinProgress:P,viewParameter:l,viewType:r}),renderStoryPinSplitLayout:({page:e})=>(0,m.jsx)(C,{page:e}),renderStoryPinText:({blocks:e,onClickThrough:i,pageId:n,pinId:a})=>(0,m.jsx)(S,{blocks:e,clientTrackingParams:t,onClickThrough:i,pageId:n,pinId:a}),children:e})}function V({clientTrackingParams:e,children:t,isInStream:i,viewType:n,viewParameter:a}){return i?t:(0,m.jsx)(A.Z,{clientTrackingParams:e,component:85,view:n,viewParameter:a,children:t})}function K({children:e,pin:t}){return e({productPins:(0,E.Z)({name:"StoryPinTaggedProductsResource",options:{id:t.id},noCache:!0}).data||[]})}function M({children:e,clientTrackingParams:t,closeupStoryPinViewability:i,pin:n,isInStream:a=!1,viewType:l,viewParameter:r}){let o=!!n.story_pin_data?.has_product_pins,s=({productPins:a})=>(0,m.jsx)(R,{clientTrackingParams:t,closeupStoryPinViewability:i,pin:n,productPins:a,viewParameter:r,viewType:l,children:e});return(0,m.jsx)(V,{clientTrackingParams:t,isInStream:a,viewParameter:r,viewType:l,children:o?(0,m.jsx)(K,{pin:n,children:s}):s({productPins:[]})})}var B=i(104999),z=i(221175),O=i(470205),H=i(171556),W=i(566431),N=i(382964),U=i(891851),G=i(830031),$=i(852796),X=i(417394),J=i(825605),Y=i(774838),q=i(736328);function Q({appConfig:e}){let t=(0,c.ZP)(),i=(0,q.Z)(),{isRTL:a}=(0,Y.B)();return(0,m.jsx)(n.Fragment,{children:(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginTop:16}},"data-test-id":"back-button",left:!a,paddingX:4,position:"absolute",right:a,top:!0,children:"authDesktop"===e.type&&(0,m.jsx)(l.hU,{accessibilityLabel:t._('Back button', 'storyPin.closeup.back', 'Button label to navigate to previous page'),bgColor:"transparent",icon:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{i({action:"click",item:"back-button"}),e.onNavigateBack()},size:"lg"})})})}var ee=i(410706),et=i(639043),ei=i(151383),en=i(450228),ea=i(967515),el=i(408640),er=i(893957),eo=i(764682),es=i(133546),ed=i(63805),ec=i(250704);let eu=(0,n.lazy)(()=>i.e("65443").then(i.bind(i,306639))),ep=(0,n.lazy)(()=>Promise.resolve().then(i.bind(i,532074))),eh=(0,n.lazy)(()=>i.e("32560").then(i.bind(i,620623))),em=(0,n.lazy)(()=>Promise.all([i.e("25418"),i.e("89558"),i.e("96415")]).then(i.bind(i,872901))),eg=(0,n.lazy)(()=>Promise.resolve().then(i.bind(i,584843))),e_={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"32px 32px 0 0"},ey={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"0 0 32px 32px",bottom:0},ef={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",borderRadius:"32px 32px 0 0",paddingTop:"30px",top:0},ex=[5,6,2];function ev({appConfig:e,clientTrackingParams:t,isInFocus:i,isInStream:a=!1,isStreamMuted:s,isStreamPanelOpen:d=!0,pin:u,storyPinData:p,onIdeaPinCloseupCommentClick:h,setStreamIsMuted:g,streamItemIndex:_,togglePanel:y,variant:x,viewType:v=3,viewParameterType:b,onTogglePanel:w}){let S;let P=(0,Z.c)(),{peekCloseupEnabled:I,viewportSize:k}=(0,es.x4)(),j=(0,c.ZP)(),C=(0,B.Z)(),T=(0,$.g)(),L=(0,G.E)(),{setIdeaPinActivePage:E,setIdeaPinDynamicWidth:A}=(0,ed.Ut)(),{activePage:D}=(0,ed.H8)(),{clearSeekTime:F}=(0,ea.RC)(),{seekTimes:R}=(0,ea.Hx)(),{closeupPaneWidth:V,headerHeight:K,isLandingPage:M,renderStoryPinMediaLayout:H,renderStoryPinPage:Y,renderStoryPinSplitLayout:q,renderStoryPinText:ec,productPins:ev}=P||{},{id:eb}=u,ew=R&&R[u.id],eS=!!p?.is_deleted,{pages:eP=[],metadata:eI={}}=p||{},{canvas_aspect_ratio:ek,version:ej}=eI,eC=ek??f.ap,[eT,eL]=(0,n.useState)(0),eE=(0,n.useRef)(0),eZ=(0,n.useRef)(null),[eA,eD]=(0,n.useState)("closeup"===x&&i),[eF,eR]=(0,n.useState)(375),eV="calc(100% - 32px)",eK=(0,n.useRef)(null),[eM,eB]=(0,n.useState)(!1),[ez,eO]=(0,n.useState)(!1),[eH,eW]=(0,n.useState)(!0);(0,n.useEffect)(()=>{w&&w(eH)},[eH,w]),(0,n.useEffect)(()=>{eW(d)},[d]);let{should_mute:eN=!0,music_attributions:eU=[]}=eP[eT],[eG,e$]=(0,n.useState)(M||eN),eX=void 0!==g?g:e$,eJ=void 0!==s?s:eG;(0,n.useEffect)(()=>{eN&&eX(!0)},[eN,eX]);let eY=eP.filter(e=>!ex.includes(e.layout)),eq=eY.length,eQ=eY[eT],e0=b||(0,U.Z)({hasPin:!!u,hasPinRichMetadata:!!u.rich_metadata,hasPinRichMetadataProducts:!!u.rich_metadata?.products,hasPinRichMetadataArticle:!!u.rich_metadata?.article,hasPinRichMetadataRecipe:!!u.rich_metadata?.recipe,hasPinStoryPinData:!!u.story_pin_data}),e1=K+64,{getNormalizedPinImage:e3}=(0,N.Z)({pinKey:{type:"deprecated",data:u},maxWidth:z.Wm}),e2="closeup"===x,e6=()=>{if("undefined"!=typeof window){let e=window.innerWidth-(eH?V:0)-216;if(e2)eR(function({availableWidth:e,pageAspectRatio:t,unavailableHeight:i,windowInnerHeight:n}){let a=n-i,l=Math.min(Math.max(650,Math.min((n-i)*t,e)),1e3);return l/t>=a&&(l=a*t),l}({availableWidth:e,pageAspectRatio:eC,unavailableHeight:e1,windowInnerHeight:window.innerHeight}));else{let{width:e}=e3();eR(e),A(e)}}};(0,er.Z)(()=>(window.addEventListener("resize",e6),e6(),()=>{window.removeEventListener("resize",e6)}));let[e7,e8]=(0,n.useState)(!1),[e4,e5]=(0,n.useState)(null),[e9,te]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!e9&&i&&(C({event_type:7588,view_type:v,view_parameter:e0,component:13801,object_id_str:eb,aux_data:{..."number"==typeof _?{grid_index:_}:{}}}),te(!0))},[e9,i,C,eb,v,e0,_]);let tt=(0,n.useCallback)(e=>{let{blocks:t}=eP[e]||{},n=t?.find(e=>3===e.block_type);eK.current&&eK.current instanceof el.B7&&(eK.current.clear(),eK.current=null),!n&&i&&(eK.current=new el.B7(e=>{e5({currentTime:e<1?e:1,duration:1})},()=>{let t="closeup"===x?e:D;t<eq-1?(eK.current&&eK.current instanceof el.B7&&(eK.current.clear(),eK.current=null),tl(t+1)):(eB(!0),eD(!1))},W.oN))},[i,eq,eP,D,x]),ti=e=>{e5({currentTime:0,duration:1}),tt(e)};(0,n.useEffect)(()=>{eE.current=eT},[eT]),(0,n.useEffect)(()=>{eZ.current=eA},[eA]),(0,er.Z)(()=>(ti(eT),()=>{eK.current&&eK.current instanceof el.B7&&eZ.current&&eK.current.clear()}));let tn=()=>{L&&(L.addBinaryAnnotation("page.current.index",eT,"I16"),L.addBinaryAnnotation("page.count",eP.length,"I16"),L.addBinaryAnnotation("view.type",v,"I32"),L.addBinaryAnnotation("view.parameter",e0,"I32")),(0,X.XJ)("page.current.index",eT,"I16"),(0,X.XJ)("page.count",eP.length,"I16"),(0,X.XJ)("view.type",v,"I32"),(0,X.XJ)("view.parameter",e0,"I32")},ta=e=>{L&&L.abort("startNewPwt"),T&&(T.abort("startNewPwt"),T.start(),T.addBinaryAnnotation("page.current.index",e,"I16"),T.addBinaryAnnotation("page.count",eP.length,"I16"),T.addBinaryAnnotation("view.type",v,"I32"),T.addBinaryAnnotation("view.parameter",e0,"I32"))};(0,er.Z)(()=>{tn()});let tl=e=>{eA||eD(!0),eM&&eB(!1),ti(e),e!==eT&&F(),eL(e),E(e),ta(e)};(0,n.useEffect)(()=>{if(eM&&eB(!1),eK.current&&ew){let e=eK.current;e.pause(),e.remaining=W.oN-ew*eo.gJ,e5({currentTime:ew/W.P6,duration:1})}},[ew]),(0,n.useEffect)(()=>{E(D)},[E,D]),(0,n.useEffect)(()=>{"related-products"===x&&(eL(D),tl(D))},[D,x]);let tr=()=>eM?13799:0===eT?227:228,to=()=>{eT<eq-1&&(tl(eT+1),C({event_type:101,view_type:v,view_parameter:e0,component:tr(),element:12261,object_id_str:eb}))},ts=()=>{eT===eq-1&&eM?(tl(eT),C({event_type:101,view_type:v,view_parameter:e0,component:tr(),element:12260,object_id_str:eb})):eT>0&&(tl(eT-1),C({event_type:101,view_type:v,view_parameter:e0,component:tr(),element:12260,object_id_str:eb}))},td=e=>{let{keyCode:t}=e,{srcElement:i}=e,n=i.isContentEditable||i.contentEditable&&"true"===i.contentEditable;37!==t||n?39!==t||n||to():ts()};(0,n.useEffect)(()=>(document.addEventListener("keydown",td),()=>document.removeEventListener("keydown",td)),[eT]);let{fontsLoaded:tc,mediaDataReceived:tu}=(0,en.tq)({hasPin:!!u,pages:eP}),tp=ej?(0,el.n4)(ej,"0.8.0"):null,th=null!=tp&&tp>=0,tm=t=>{let i=0===t.layout;switch(t.layout){case 0:case 1:return H({activePageIndex:eT,hideText:i,isActive:!0,isCoverPage:i,muteVideos:eJ,onClickThrough:e.onClickThrough,page:t,pageIndex:eT,pageWidth:eF,pinId:eb});case 4:return t.blocks.length>0&&ec({blocks:t.blocks,pageId:`text-${eT}`,page:t,pinId:eb,onClickThrough:e.onClickThrough});case 3:return q({page:t});default:return null}},tg=e=>{e===eq-1&&(eB(!0),eD(!1),E(0)),e===eT&&to()},t_=e=>{e5({currentTime:e?.currentTime??0,duration:e?.duration??1})},ty=()=>{eO(!0),eD(!1),eK.current&&!eK.current.paused&&eK.current.pause()},tf=e=>eP[e]?th?Y({activePageIndex:eT,fontsLoaded:tc,customEndCard:!0,isActive:e===eT&&eA,muteVideos:eJ,onChangeMuteVideo:eX,onEnded:tg,onFlyoutOpen:ty,videoPinProgress:eT===e?e4:void 0,onUpdateVideoInfo:t_,ownerId:u.native_creator?.id??"",page:eP[e],pageAspectRatio:eC,pageIndex:e,pageHeight:eF/eC,pageWidth:eF,pinId:u.id,productPins:ev,shouldLogTimeSpent:i,stillLoading:!tu}):tm(eQ):null,tx=()=>{eD(!1),eK.current&&eK.current.pause(),C({event_type:9324,view_type:v,view_parameter:e0,component:tr(),object_id_str:eb,aux_data:{story_pin_page_id:eT}})},tv=()=>{if(eD(!0),eK.current){let e=eK.current;ew&&ew>0&&F(),e.resume()}else e4||ti(eT);C({event_type:9323,view_type:v,view_parameter:e0,component:tr(),object_id_str:eb,aux_data:{story_pin_page_id:eT}})},tb=()=>{eM||(eO(!1),eA?tx():tv())};(0,n.useEffect)(()=>{"closeup"===x&&(!i||eM||eA?!i&&eA&&tx():tv())},[i,x]),(0,n.useEffect)(()=>{"related-products"===x&&tx()},[]);let tw=()=>{tl(0)},tS=()=>{a&&y?y():eW(!0)},{fiftyPercentWidth:tP,fiftyPercentHeight:tI}=(0,o.Re)(64),{maxHeight:tk}=(0,o.Re)(0,32),{fiftyPercentWidth:tj}=(0,o.Re)();return I&&(S="sm"===k?tI:tk),(0,m.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:e2?{top:K,height:`calc(100vh - ${K}px)`,position:"sticky",pointerEvents:"none",minHeight:632,maxHeight:I?S:void 0,zIndex:eH?"auto":3}:{}},display:"flex",left:!0,children:[(0,m.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",minWidth:I&&"sm"!==k?tj:void 0}},display:"flex",flex:"grow",justifyContent:"center",position:"relative",children:[e2&&(0,m.jsx)(l.xu,{bottom:!0,color:"secondary",left:!0,position:"absolute",right:!0,top:!0}),eS?(0,m.jsx)(et.Z,{height:eF/f.ap,rounding:f.yR,width:eF}):(0,m.jsxs)(n.Fragment,{children:[tu&&(0,m.jsx)(l.xu,{height:1,left:!0,marginTop:-1,overflow:"hidden",position:"absolute",top:!0,width:1,children:(()=>{let e=[];for(let t=1;t<=eP.length;t+=1)eT+t<eP.length&&e.push(tf(eT+t));return e})()}),(0,m.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:e2?void 0:`${f.YL}px`}},display:"flex",onMouseLeave:()=>{e8(!1)},onMouseOver:()=>e8(!0),position:"relative",children:(0,m.jsxs)(l.xu,{paddingX:4,children:[(0,m.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...ey,flexDirection:"column-reverse"}},display:"flex",height:128,paddingX:6,position:"absolute",width:eV,zIndex:f.Gf,children:(0,m.jsx)(ei.Z,{activePageIndex:eT,handleMute:()=>{eN||eX(!eJ)},handlePanelChange:()=>{eW(!eH)},handlePause:tx,handlePausePlay:tb,handlePlay:tv,handleVideoScrubbingNewPage:e=>{eM&&eB(!1),ti(e),eL(e),E(e),ta(e)},handleWatchAgain:tw,inMilliseconds:!0,isMuted:eJ,isPanelOpen:eH,isPlaying:eA,onPageSelect:e=>tl(e),pageCount:eq,pages:eY,pinId:u.id,progressInfo:e4,showEndCard:eM,showVideoControls:e7,viewParameter:e0})}),(0,m.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...eH?ef:{paddingLeft:"26px",bottom:0},marginBottom:eH?void 0:"88px",maxWidth:tP}},"data-test-id":"music-attribution",display:"flex",justifyContent:eH?"center":"start",overflow:"hidden",paddingY:eH?5:void 0,position:"absolute",width:eF,zIndex:f.Gf,children:(0,m.jsx)(r.Z,{handlePause:tx,handlePlay:tv,musicAttributions:eU,shouldMute:eN,showEndCard:eM})}),!eM&&!eH&&(0,m.jsxs)(l.xu,{alignItems:"start",dangerouslySetInlineStyle:{__style:eH?{}:e_},display:"flex",height:128,justifyContent:"between",padding:4,position:"absolute",top:!0,width:eV,zIndex:f.Gf,children:[(0,m.jsxs)(l.kC,{alignItems:"stretch",direction:"row",children:[!eH&&(0,m.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_IdeaPinSecondarySendButton",children:(0,m.jsx)(J.Z,{children:(0,m.jsx)(eg,{imageSrc:u.image_url??"",pinDescription:u.description??"",pinId:u.id})})}),!eH&&u.is_eligible_for_aggregated_comments&&(0,m.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_CommentButton",children:(0,m.jsx)(J.Z,{children:(0,m.jsx)(eu,{onCommentClick:()=>{C({event_type:101,view_type:v,view_parameter:e0,component:13801,element:10944,object_id_str:u.id}),tS(),h&&h();let e=document.getElementById(`canonical-card-${u.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}})})}),!eH&&(0,m.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_ReactionPickerContainer",children:(0,m.jsx)(J.Z,{children:(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,m.jsx)(em,{clientTrackingParams:t,component:13801,iconColor:"white",pinId:u.id,reactionByMe:u.reaction_by_me,showTooltip:!0,viewParameter:e0,viewType:v})})})})]}),!eH&&(0,m.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_PinSaveButton",children:(0,m.jsx)(J.Z,{children:(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,m.jsx)(eh,{clientTrackingParams:t,isCloseupPin:!0,onClickCallback:()=>{C({event_type:101,view_type:v,view_parameter:e0,component:13801,element:0,object_id_str:u.id})},pinKey:{type:"deprecated",data:u},size:"lg"})})})})]}),(0,m.jsx)(l.xu,{"data-test-id":"story-pin-closeup-container",position:"relative",children:(0,m.jsx)(l.iP,{accessibilityLabel:eA?j._('Pause', 'storyPin.closeup.pauseButton.accessibilityLabel', 'Button label for pause tap area'):j._('Play', 'storyPin.closeup.playButton.accessibilityLabel', 'Button label for play tap area'),disabled:eM,onTap:tb,rounding:f.yR,children:(0,m.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{maxWidth:tP,maxHeight:S}},"data-test-id":"story-pin-closeup-page",height:eF/eC,overflow:"hidden",position:"relative",rounding:f.yR,width:eF,children:[tf(eT),!eM&&!ez&&!ew&&(0,m.jsx)(ee.Z,{playing:eA}),"authDesktop"===e.type&&eM&&u.native_creator&&(0,m.jsx)(O.Z,{name:"IdeaPinCloseup_EndCard",children:(0,m.jsx)(J.Z,{children:(0,m.jsx)(l.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,rounding:f.yR,top:!0,zIndex:f.s5,children:(0,m.jsx)(ep,{clientTrackingParams:u.trackingParams||u.tracking_params,imageSrc:u.image_url??"",pinDescription:u.description??"",pinId:u.id,watchAgain:tw})})})})]})})})]})})]}),!a&&e2&&(0,m.jsx)(Q,{appConfig:e})]}),eH&&e2&&(0,m.jsx)(l.xu,{flex:"none",height:"100%",position:"relative",width:V,children:"duplo"===e.type&&e.storyPinDetails})]})}function eb(e){let{pin:t,viewType:i=3,viewParameterType:r}=e,[o,s]=(0,n.useState)({isInFocus:!0,viewability:0}),{isInFocus:d,viewability:c}=o,u=r||(0,U.Z)({hasPin:!!t,hasPinRichMetadata:!!t.rich_metadata,hasPinRichMetadataProducts:!!t.rich_metadata?.products,hasPinRichMetadataArticle:!!t.rich_metadata?.article,hasPinRichMetadataRecipe:!!t.rich_metadata?.recipe,hasPinStoryPinData:!!t.story_pin_data}),p=(0,a.TH)(),h=e.clientTrackingParams||(0,ec.Z)((p?.state||{}).trackingParams,t.trackingParams||t.tracking_params);return(0,m.jsx)($.T,{children:(0,m.jsx)(H.Z,{onVisibilityChange:e=>{if(e&&e.length>0){let{intersectionRatio:t}=e[0];s({isInFocus:t>.5,viewability:t})}},options:{threshold:[0,.5,.8,.99,1]},children:n=>(0,m.jsx)(l.xu,{ref:n,children:(0,m.jsx)(M,{clientTrackingParams:h,closeupStoryPinViewability:c,pin:t,viewParameter:u,viewType:i,children:d?(0,m.jsx)(A.Z,{clientTrackingParams:h,component:13801,objectId:t.id,view:i,viewParameter:u,children:(0,m.jsx)(ev,{...e,isInFocus:d})}):(0,m.jsx)(ev,{...e,isInFocus:d})})})})})}},639043:function(e,t,i){i.d(t,{Z:()=>r});var n=i(883119),a=i(138596),l=i(785893);function r({height:e,isDenseView:t,rounding:i,width:r,color:o}){let s=(0,a.ZP)();return(0,l.jsx)(n.xu,{alignItems:"center",color:o||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:i,width:r,children:(0,l.jsxs)(n.kC,{alignItems:"center",direction:"column",children:[(0,l.jsx)(n.xu,{paddingY:t?2:4,children:(0,l.jsx)(n.JO,{accessibilityLabel:s._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,l.jsx)(n.xv,{weight:"bold",children:s._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!t&&(0,l.jsx)(n.xu,{paddingY:1,children:(0,l.jsx)(n.xv,{children:s._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},967515:function(e,t,i){i.d(t,{RC:()=>p,Wr:()=>u,Hx:()=>h});var n=i(667294),a=i(213491),l=i(27277),r=i(17658),o=i(785893);let s=()=>Promise.resolve().then(i.bind(i,27277)),{Provider:d,useHook:c}=(0,a.Z)("IdeaPinVideoPlayer");function u({children:e}){let[t,i]=(0,r.Z)(s,l.initialState),a=(0,n.useMemo)(()=>({dispatch:i,ideaPinVideoPlayerControls:t}),[i,t]);return(0,o.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,n.useMemo)(()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})}}),[e])}function h(){let{ideaPinVideoPlayerControls:e}=c();return e}},27277:function(e,t,i){i.r(t),i.d(t,{default:()=>a,initialState:()=>n});let n={seekTimes:{},currentProgressInfo:{currentTime:0,duration:0}};function a(e=n,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime}};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{}};default:return e}}},702844:function(e,t,i){i.d(t,{c:()=>o,o:()=>r});var n=i(667294),a=i(785893);let l=(0,n.createContext)(null);function r({children:e,closeupPaneWidth:t,headerHeight:i,isLandingPage:r,loadFonts:o,renderStoryPinMediaLayout:s,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p}){let h=(0,n.useMemo)(()=>({closeupPaneWidth:t,headerHeight:i,isLandingPage:r,loadFonts:o,renderStoryPinMediaLayout:s,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p}),[t,i,r,o,s,d,c,u,p]);return(0,a.jsx)(l.Provider,{value:h,children:e})}let o=()=>(0,n.useContext)(l)},176783:function(e,t,i){i.d(t,{Cc:()=>h,DL:()=>d,Gf:()=>_,LX:()=>a,Lc:()=>y,Ls:()=>m,Rf:()=>s,YL:()=>o,ap:()=>l,h8:()=>u,pE:()=>c,s5:()=>g,tQ:()=>p,yR:()=>r});var n=i(883119);let a={w:9,h:16},l=a.w/a.h,r=8,o=10,s=5e3,d=2e3;function c(e,t=1){return{x:(e??24)/5,y:(e??24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},p=[u.IMAGE,u.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},m=new n.Ry(1),g=new n.H3([m]),_=new n.H3([g]),y=e=>{let t=Math.floor(e||0),i=Math.floor(t/60),n=t-60*i,a=i<10?`${i}`:i,l=n<10?`0${n}`:n;return`${a}:${l}`}},631796:function(e,t,i){i.d(t,{Z:()=>l});var n=i(667294),a=i(288692);function l(e){let[t,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async function(){i(await (0,a.Z)(e))})()},[e]),t}},573375:function(e,t,i){i.d(t,{Z:()=>r});var n=i(883119),a=i(293646),l=i(785893);function r({onVisibilityChanged:e,children:t,...i}){let r=(0,a.Z)({onVisibilityChanged:e,...i});return(0,l.jsx)(n.xu,{ref:r,children:t})}},293646:function(e,t,i){i.d(t,{Z:()=>c});var n=i(667294);let a=new Map,l=null,r=e=>{e.forEach(e=>{let t=a.get(e.target);t&&t(e)})},o=e=>{l.unobserve(e),a.delete(e)},s=(e,t="-64px 0px 0px 0px",i)=>{let n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};l=l||new window.IntersectionObserver(r,n),a.set(e,i),l.observe(e)},d=e=>a.has(e);function c({onVisibilityChanged:e,trackFullVisible:t,rootMargin:i}){let l=(0,n.useRef)(null),r=!1,c=t=>{(r=t.intersectionRatio>0||t.isIntersecting)&&e(!0)},u=()=>{l.current instanceof HTMLElement&&d(l.current)&&r&&(e(!1),r=!1)},p=(0,n.useCallback)(e=>{l.current instanceof HTMLElement&&s(l.current,e,e=>{if(!a.has(l.current))return;let i=t?e.intersectionRatio>=1:e.intersectionRatio>=.5,n=t?0===e.intersectionRatio:!i;!r&&i?c(e):r&&n&&u()})},[l.current]);return(0,n.useEffect)(()=>(p(i),()=>{l.current instanceof HTMLElement&&(u(),o(l.current))}),[p]),l}},919917:function(e,t,i){function n(e,t){let{organicVideosAutoplaying:i,promotedVideosAutoplaying:n}=t,a={...i,...n};return a[e]&&a[e].currentTime}i.d(t,{Z:()=>n})},63805:function(e,t,i){i.d(t,{H8:()=>h,Ut:()=>p,fr:()=>u});var n=i(667294),a=i(213491),l=i(17658),r=i(553734),o=i(785893);let s=()=>i.e("38938").then(i.bind(i,835802)),{Provider:d,useHook:c}=(0,a.Z)("IdeaPin");function u({children:e}){let[t,i]=(0,l.Z)(s,r.Z),a=(0,n.useMemo)(()=>({dispatch:i,ideaPin:t}),[i,t]);return(0,o.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,n.useMemo)(()=>({setIdeaPinActivePage:t=>{e({type:"IDEA_PIN_ACTIVE_PAGE",payload:{activePage:t}})},setIdeaPinDynamicWidth:t=>{e({type:"IDEA_PIN_DYNAMIC_WIDTH",payload:{dynamicWidth:t}})}}),[e])}function h(){let{ideaPin:e}=c();return e}},553734:function(e,t,i){i.d(t,{Z:()=>n});let n={activePage:0,dynamicWidth:0}},918617:function(e,t,i){i.d(t,{Z:()=>d});var n=i(883119),a=i(774838),l=i(398542),r=i(15392),o=i(133546),s=i(785893);function d({children:e,isVideo:t=!1,isWideVideo:i,shouldPadImage:d,styleOverrides:c={},variant:u}){let{showCloseupContentRight:p,viewportSize:h,paneWidth:m,closeupWithinMasonryEnabled:g,peekCloseupEnabled:_}=(0,o.x4)(),y=(0,a.B)(),f="default"===u;if(!(!g&&(p&&"lg"===h||f||i)))return(0,s.jsx)(n.xu,{children:e});let{borderStyle:x}=(0,l.Z)({isSideBySide:p&&!i,isPadded:d,isRTL:y.isRTL,closeupWithinMasonryEnabled:g,peekCloseupEnabled:_}),v=i?r.KP:m,b=i?r.KP:496,w=c.height?.height||"100%",S=c.maxWidth?.maxWidth||v,P=c.minWidth?.minWidth||m;return(0,s.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:g?void 0:c.borderRadius||x.borderRadius,...d&&t?{overflow:"hidden"}:{}}},display:f?"flex":void 0,flex:f&&i?"grow":void 0,height:f?w:void 0,justifyContent:f?"center":void 0,marginBottom:f?void 0:6,marginEnd:f?void 0:i?0:6,maxWidth:f?S:b,minWidth:f?P:344,rounding:f?void 0:2,children:e})}},632492:function(e,t,i){i.d(t,{Cq:()=>c,Dk:()=>p,Fk:()=>a,fS:()=>d,km:()=>u,lI:()=>r,lJ:()=>l,mS:()=>s,qW:()=>o});var n=i(883119);let a=new n.Ry(1),l=3,r=new n.Ry(l),o=2,s=new n.Ry(o),d=3,c=4,u=new n.Ry(5),p=new n.Ry(100)},542515:function(e,t,i){i.d(t,{Z:()=>a});var n=i(667294);function a(e,t){(0,n.useEffect)(()=>{if(!t.current)return()=>{};{let i=t.current;if("ResizeObserver"in window){let t=new ResizeObserver(t=>{Array.isArray(t)&&t.length&&e(i)});return t.observe(i),()=>t.unobserve(i)}{let t=i.clientHeight,n=i.clientWidth,a=()=>{let l=i.clientHeight,r=i.clientWidth;(t!==l||n!==r)&&(t=l,n=r,e(i)),window.requestAnimationFrame(a)};return a(),()=>window.cancelAnimationFrame(a)}}},[t,e])}},279394:function(e,t,i){function n(e){let t=[],i="";for(let n of e)if(i){let e=!!n.match(/\s/),a=!!i.match(/\s/);if(e===a)i+=n;else if(!a&&i.includes("-")){let e=0;for(let n=0;n<i.length;n+=1)"-"===i[n]&&(t.push(i.substring(e,n+1)),e=n+1);t.push(i.substring(e)),i=n}else t.push(i),i=n}else i=n;return i.length&&t.push(i),t}function a({boxHeight:e,boxWidth:t,font:i,startFontSize:a,text:l}){if("undefined"==typeof document||!document.body)return{fontSize:a,lines:[]};let{body:r}=document,o=document.createElement("div");r.appendChild(o);let s=l?.split(/\r?\n/g),d=a,c={letterSpacing:i.fontOverrides?.letterSpacing!=null?`${i.fontOverrides.letterSpacing}px`:void 0,lineHeight:String(i.fontOverrides?.lineHeight||1.1),fontFamily:i.fontFamily,fontSize:`${d}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(o.style,c);let u=document.createElement("div");for(u.style.display="inline",o.appendChild(u),(s??[]).forEach((e,t)=>{let i=document.createElement("span");i.style.wordBreak="break-word",u.appendChild(i),i.appendChild(document.createTextNode(e)),t!==(l??"").length-1&&i.appendChild(document.createElement("br"))});(u.offsetHeight>e||u.offsetWidth>t)&&d>0;)d-=1,o.style.fontSize=`${d}px`;return u.remove(),o.remove(),{fontSize:d,lines:d>0?function({font:e,fontSize:t,textList:i,width:a}){if("undefined"==typeof document||!document.body||a<=0||t<=0)return[];let{body:l}=document,r=document.createElement("div");l.appendChild(r);let o={letterSpacing:e.fontOverrides?.letterSpacing!=null?`${e.fontOverrides.letterSpacing}px`:void 0,lineHeight:String(e.fontOverrides?.lineHeight||1.1),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(r.style,o);let s=document.createElement("div");s.style.display="inline",r.appendChild(s);let d=document.createTextNode("");s.appendChild(d);let c=[],u="",p=e=>{let t=e.trim();return d.textContent=t,{text:t,width:s.offsetWidth}},h=e=>{let t=!!e.match(/\s/),i=0===u.length;if(d.textContent=`${u}${e}`,s.offsetWidth>a){if(t)c.push(p(u)),u="";else if(i)for(let t of e)h(t);else c.push(p(u)),u="",h(e)}else u+=e};for(let e of i??[])0===e.length&&c.push(p(u)),n(e).forEach(e=>h(e)),u.length&&(c.push(p(u)),u="");return s.remove(),r.remove(),c}({font:i,fontSize:d,textList:s,width:t}):[]}}function l(e){let t=window.getComputedStyle(e,null),i=parseFloat(t.getPropertyValue("height").replace("px","")),n=parseFloat(t.getPropertyValue("font-size").replace("px","")),a=parseFloat(t.getPropertyValue("line-height").replace("px",""));return Number.isNaN(a)&&(a=1.2*n),Math.ceil(i/a)}i.d(t,{KV:()=>a,Yd:()=>n,xW:()=>l})},542392:function(e,t,i){i.d(t,{Af:()=>c,Ei:()=>s,II:()=>x,Lh:()=>g,U:()=>h,Zy:()=>o,dD:()=>l,er:()=>m,hb:()=>y,in:()=>d,j7:()=>_,kX:()=>u,mx:()=>f,n5:()=>r,q8:()=>p,xH:()=>a});var n=i(176783);let a=1048576,l=3,r=20,o=3,s=10,d=50,c=10,u=1200,p=375,h=375/n.ap,m=4096,g="#FFFFFF",_={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},y=420,f=325,x=768},317083:function(e,t,i){i.d(t,{Ul:()=>l,VS:()=>n,hy:()=>r,iM:()=>a,j4:()=>o});let n=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],l={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},r=128,o=e=>e&&document.querySelector(`video[poster="${e}"]`)||null},758594:function(e,t,i){i.d(t,{Z:()=>l});var n=i(667294),a=i(721750);function l({children:e,metricName:t}){return(0,n.useContext)(a.Z),e}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/35306-e8e3136ce3a4367e.mjs.map