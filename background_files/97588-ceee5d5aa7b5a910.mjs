(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["97588"],{950609:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="e04be51b4be0a2585e7803d004fa83b7";let a=i},44054:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="53ae9ecd15f057f744460205e5d495fd";let a=i},292875:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};i.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a";let a=i},569065:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="7e8d917850c8329247291df0d281a59b";let a=i},631017:function(e,t,n){var i,a,o,l;n.r(t),n.d(t,{default:()=>r});let s=(i={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},l=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:o=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[i,a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},i,a,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});s.hash="f74f2f62c4eecb2cf72ace142fd51cb3";let r=s},261978:function(e,t,n){n.d(t,{Z:()=>i});let i=(e,t)=>{let n;let{height:i=0,width:a=0}=t||{};switch(e){case"enabled_15":n=.15;break;case"enabled_25":n=.25;break;default:n=.35}return a/i<n}},690070:function(e,t,n){n.d(t,{Z:()=>_});var i=n(667294),a=n(883119),o=n(788730),l=n(514793),s=n(70806),r=n(230201),d=n(138596),c=n(780268),u=n(800640),p=n(133546),h=n(785893);class m extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="startAudiblePlayTime",n=this.props.muted?null:new Date,(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidUpdate(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}componentWillUnmount(){let{musicRecordingId:e,muted:t,pinId:n,video:i}=this.props;if(e&&!t&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){let{hlsv3:t,mp4:a}=(0,c.ZP)({vEXP3:i.video_list?.V_EXP3,vEXP4:i.video_list?.V_EXP4,vEXP5:i.video_list?.V_EXP5,vEXP6:i.video_list?.V_EXP6,vEXP7:i.video_list?.V_EXP7,v720P:i.video_list?.V_720P,vHLSV3MOBILE:i.video_list?.V_HLSV3_MOBILE})||{},o=(a||t)?.duration||0;this.props.logContextEvent({event_type:8999,object_id_str:e,aux_data:{pin_id:n,story_pin_music_duration:o}})}}render(){let{activePageIndex:e,aspectRatio:t,blockHeight:n,blockWidth:i,closeupBodyWidth:o,closeupStoryPinViewability:l,closeupWithinMasonryEnabled:r,customEndCard:d,isCloseupRelatedPinsAboveTheFoldEnabled:u,isPlaying:p,muted:m,onEnded:_,onUpdateVideoInfo:g,pageIndex:y,pin:f,pinId:b,roundCorners:x=!0,maxHeight:v,video:P,videoThumbnailStartTime:w}=this.props,{hlsv3:S,mp4:k}=(0,c.ZP)({vEXP3:P.video_list?.V_EXP3,vEXP4:P.video_list?.V_EXP4,vEXP5:P.video_list?.V_EXP5,vEXP6:P.video_list?.V_EXP6,vEXP7:P.video_list?.V_EXP7,v720P:P.video_list?.V_720P,vHLSV3MOBILE:P.video_list?.V_HLSV3_MOBILE})??{},C=k||S;if(!C)return null;let{height:A,thumbnail:T,width:j}=C,I=t??(j??1)/(A??1),E={height:"100%",left:"0",top:"0",width:"100%"},R=r&&o?(o??i)/(Number(v)??n):i/n;if(!r&&Math.abs(R-I)>.01){if(R<I){let e=100*I/R;E.width=`${e}%`,E.left=`-${(e-100)/2}%`}else if(R>I){let e=100*R/I;E.height=`${e}%`,E.top=`-${(e-100)/2}%`}}let z="number"==typeof e&&y<=e+3;return(0,h.jsx)(a.xu,{height:u?"100%":n,overflow:"hidden",position:"relative",width:u?"100%":i,children:(0,h.jsx)(a.xu,{height:"100%",position:"absolute",width:"100%",children:z||p||w?(0,h.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:E},position:"absolute",children:(0,h.jsx)(s.Z,{aspectRatio:r?R:t,autoplay:p,closeupStoryPinViewability:l,contextLogData:{component:0===y?227:228,element:10957,objectId:b,story_pin_page_id:y,view:3,viewParameter:157},customEndCard:d,customThumbnail:T,isPromoted:!1,loop:!1,muted:m,objectFit:k?r?"contain":"cover":void 0,onEnded:()=>{_&&_(y)},onTimeChange:({time:e})=>{g&&"number"==typeof C.duration&&C.duration>0&&g({currentTime:e,duration:C.duration/1e3})},pinId:b,pinKey:null===f?null:{type:"deprecated",data:f},preferMp4:!!k,roundingOverride:x?null:0,showControls:u?"hover":"never",variant:"storyPin",video:{id:P.id,hlsv3:S,mp4:k},videoThumbnailStartTime:w})}):T&&(0,h.jsx)(a.Ee,{alt:this.props.i18n._('Video cover image', 'closeup.storyPin.videoCover', 'cover image displayed for a video'),fit:"cover",naturalHeight:A??1,naturalWidth:j??1,src:T})})})}}function _(e){let{logContextEvent:t}=(0,r.v)(),{pin:n}=e,i=(0,d.ZP)(),{closeupWithinMasonryEnabled:a,isCloseupRelatedPinsAboveTheFoldEnabled:s}=(0,p.x4)(),{closeupBodyWidth:c}=(0,u.K4)(),{maxHeight:_}=(0,o.Re)(),{maxHeight:g}=(0,l.Z)({pinKey:null===n?null:{type:"deprecated",data:n}});return(0,h.jsx)(m,{...e,closeupBodyWidth:c,closeupWithinMasonryEnabled:a,i18n:i,isCloseupRelatedPinsAboveTheFoldEnabled:s,logContextEvent:t,maxHeight:a?g:_})}},161458:function(e,t,n){n.d(t,{Z:()=>q}),n(167912);var i,a,o=n(883119),l=n(788730),s=n(616550),r=n(230201),d=n(661376),c=n(85835),u=n(785893);let p=({block:{block_style:{height:e=0,width:t=0,x_coord:n=0,y_coord:i=0,rotation:a=0}={},original_comment_id:p},horizontalOffset:h=0,pageAspectRatio:m,scaleFactor:_,verticalOffset:g=0})=>{let{logContextEvent:y}=(0,r.v)(),f=l._B/m,b=t*l._B*_/100,x=n*l._B*_/100+h,v=(0,s.k6)(),{data:P}=(0,d.Z)({name:"AggregatedCommentResource",options:{commentId:p,field_set_key:"comment_reply_sticker"}});return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:x,top:i*f*_/100+g,transform:`rotate(${a}deg)`}},display:"flex",height:e*f*_/100,margin:-1,padding:1,position:"absolute",rounding:2,width:b,zIndex:c.B5,children:(0,u.jsx)(o.iP,{onTap:()=>{y({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:p}}),P?.pin_id&&v.push(`/pin/${P.pin_id}/comments/${p||""}`)},rounding:"pill"})})};var h=n(835531),m=n(631796);function _({src:e,fallbackSrc:t,...n}){let i=(0,m.Z)(e);return(0,u.jsx)(h.Z,{...n,src:i?e:t})}var g=n(581722);function y({isUseCache:e,signature:t}){return(0,g.v9)(({pinbuilder:n})=>{let{storyPinItemBlocks:i}=n;if(!e)return null;for(let e of Object.keys(i))if(i[e].media?.signatureEdited===t||i[e].media?.signature===t)return i[e];return null})}var f=n(667294),b=n(331128),x=n(611649),v=n(465784),P=n(138596),w=n(107889);let S=({aggregatedCommentId:e,onDismiss:t})=>{let n=(0,P.ZP)(),i=(0,x.Z)(),a=(0,b.Z)(),[l,s]=(0,f.useState)(""),r=(0,u.jsx)(o.kC,{justifyContent:"end",children:(0,u.jsx)(o.zx,{color:"red",disabled:!l,onClick:()=>{(async()=>{await a({fromUnifiedComment:!0,objectType:w.o.aggregatedComment,objectId:e,tags:"[]",text:l})})(),t()},text:n._('Post', 'ideapin.questionsticker.replymodal.postbutton', 'Post reply to creator Q&A question')})});return(0,u.jsx)(v.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:r,heading:n._('Reply', 'ideapin.questionsticker.replymodal', 'Reply to creator Q&A question'),onDismiss:t,children:(0,u.jsx)(o.xu,{paddingX:8,paddingY:1,children:(0,u.jsx)(o.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:({value:e})=>{s(e)},placeholder:i?n._('Your reply will show up as a public comment on this Pin.', 'pin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'):n._('Your reply will show up as a public comment on this Idea Pin.', 'ideapin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'),value:l})})})};var k=n(583875),C=n(907022),A=n(216975),T=n(176783),j=n(281979),I=n(462867);let E=void 0!==i?i:i=n(569065);function R({block:e,elementType:t,horizontalOffset:n=0,onFlyoutOpen:i,pageAspectRatio:a,pageIndex:p,pinKey:h,scaleFactor:m,tooltipElementType:_,verticalOffset:g=0,videoPinProgress:y}){let{logContextEvent:b}=(0,r.v)(),[x,v]=(0,f.useState)(!1),[w,R]=(0,f.useState)(!1),z=(0,f.useRef)(null),L=(0,s.k6)(),F=(0,P.ZP)(),M=(0,C.Z)(E,h),O=(0,I.Z)(),{block_style:{height:N=0,width:Z=0,x_coord:V=0,y_coord:B=0,rotation:$=0}={},end_time:D,error_message:H,interactive_sticker_type:K=null,is_removed:U,is_valid:W,start_time:X,sticker_data:G,type:q}=e,Y=M?.entityId,{board_id:J,question_comment_id:Q}=G||{},{image_small_url:ee,full_name:et,username:en=""}=e.user??{},ei=null,ea=W&&5===K&&!!J,eo=W&&7===K&&!!Q,el=(0,d.Z)(J&&ea?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:J}}:null),{is_collaborative:es,pin_count:er,url:ed}=el.data||{};q===T.h8.PRODUCT_STICKER?ei=Y?`/pin/${Y}/`:"/":q===T.h8.MENTION_STICKER?ei=`/${en}/`:ea&&(ei=el.isLoaded?`${ed}`:null);let ec=l._B/a,eu=Z*l._B*m/100,ep=V*l._B*m/100+n,{currentTime:eh}=y||{},em=!(0,j.Z)({currentTime:eh,endTime:D,startTime:X}),e_=()=>{b({event_type:123,component:228,element:_,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:p}}),v(!1)},eg=({event:e})=>{b({event_type:120,component:228,element:_,view_type:3,view_parameter:157,aux_data:{error_message:!W&&H?H:null,story_pin_page_id:p}}),v(!0),i&&(e.stopPropagation(),i())};(0,f.useEffect)(()=>(document.addEventListener("scroll",()=>{v(!1)}),()=>document.removeEventListener("scroll",()=>{v(!1)})),[]);let ey=()=>[5].includes(K)?W?el.isLoaded?(0,u.jsxs)(f.Fragment,{children:[(0,u.jsxs)(o.xu,{flex:"grow",paddingX:2,children:[(0,u.jsx)(o.xv,{lineClamp:1,size:"100",weight:"bold",children:es?F._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):F._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,u.jsx)(o.xv,{size:"100",children:(!!er||0===er)&&(0,A.nk)(F.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', er, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:er})})]}),(0,u.jsx)(o.xu,{flex:"none",children:(0,u.jsx)(o.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]}):(0,u.jsxs)(o.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,u.jsx)(o.xu,{marginEnd:1,paddingX:2,children:(0,u.jsx)(o.xv,{color:"subtle",lineClamp:1,size:"100",children:F._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,u.jsx)(o.$j,{accessibilityLabel:F._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]}):(0,u.jsx)(o.xu,{paddingX:2,paddingY:2,children:(0,u.jsx)(o.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:H})}):(0,u.jsx)(o.xu,{paddingX:2,paddingY:2,children:(0,u.jsx)(o.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:F._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})}),ef=()=>{let e=null,t=O.isAuth?O?.avatar_color_index:void 0;switch(q){case T.h8.PRODUCT_STICKER:let{gridTitle:n,imageSpec_236x:i,richSummary:a,description:l}=M||{},{displayName:s,products:r}=a||{},d=((r||[])[0]||{}).offerSummary||{},{price:c,maxPrice:p}=d||{},h=!!d&&(!!c||!!p),m=s||n||l;e=(0,u.jsxs)(f.Fragment,{children:[(0,u.jsx)(o.xu,{flex:"none",children:(0,u.jsx)(o.zd,{height:40,rounding:3,wash:!0,width:40,children:i?.url&&(0,u.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:i.url})})}),(0,u.jsx)(o.xu,{flex:"grow",paddingX:2,children:h?(0,u.jsxs)(o.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,u.jsx)(o.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:c}),(0,u.jsx)(o.xv,{lineClamp:1,size:"100",children:m})]}):(0,u.jsx)(o.xv,{lineClamp:1,size:"100",children:m})}),(0,u.jsx)(o.xu,{flex:"none",children:(0,u.jsx)(o.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case T.h8.MENTION_STICKER:e=(0,u.jsxs)(f.Fragment,{children:[(0,u.jsx)(o.xu,{flex:"none",children:(0,u.jsx)(k.qE,{color:t,name:et??"",size:"sm",src:ee??void 0})}),(0,u.jsx)(o.xu,{flex:"grow",paddingX:2,children:(0,u.jsx)(o.xv,{lineClamp:1,size:"200",weight:"bold",children:et})}),(0,u.jsx)(o.xu,{flex:"none",children:(0,u.jsx)(o.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case T.h8.GENERIC_STICKER:e=ey();break;case T.h8.VTO_MAKEUP_STICKER:e=(0,u.jsx)(o.xv,{size:"300",weight:"bold",children:F._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}return(0,u.jsx)(o.xu,{alignItems:"center","data-test-id":q,display:"flex",justifyContent:"center",padding:q===T.h8.PRODUCT_STICKER?1:3,width:"100%",children:U?(0,u.jsx)(o.xv,{color:"subtle",size:"200",weight:"bold",children:F._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})};return(0,u.jsx)(f.Fragment,{children:em?null:(0,u.jsxs)(o.xu,{ref:z,dangerouslySetInlineStyle:{__style:{left:ep,top:B*ec*m/100+g,transform:`rotate(${$}deg)`}},"data-test-id":(q||"")+"_container",display:"flex",height:N*ec*m/100+2*l.Xw,margin:-1,padding:1,position:"absolute",rounding:2,width:eu+2*l.Xw,zIndex:c.B5,children:[(0,u.jsx)(o.iP,{disabled:em,onTap:x?e_:({event:e})=>{em||(b({event_type:101,component:228,element:t,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:p}}),eo?R(!0):eg({event:e}))},rounding:"pill"}),x&&(0,u.jsx)(o.mh,{zIndex:l.tD,children:(0,u.jsx)(o.J2,{_deprecatedShowCaret:!0,anchor:z.current,idealDirection:"up",onDismiss:e_,positionRelativeToAnchor:!1,size:U?"flexible":"sm",children:U?ef():(0,u.jsx)(o.iP,{fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),U||(b({event_type:101,component:228,element:_,object_id_str:Y,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:p}}),ei?L.push(ei):e_())},children:ef()})})}),!!Q&&w&&(0,u.jsx)(S,{aggregatedCommentId:Q,onDismiss:()=>{R(!1)}})]})})}var z=n(450228),L=n(542392),F=n(279394),M=n(590940);function O({block:e,fontsLoaded:t,horizontalOffset:n=0,pageAspectRatio:i,scaleFactor:a,thumbnail:l,verticalOffset:s=0}){let{block_style:r,style:d=T.Cc,text:c}=e,{alignment:p,font:h,font_size:m,highlight_color:_,vertical_alignment:g=T.Cc.vertical_alignment}=d,{hex_color:y=T.Cc.hex_color}=d??{},[b,x]=(0,f.useState)(0),[v,P]=(0,f.useState)([]),w=h||T.Cc.font,{name:S,default_size:k,letter_spacing:C,line_height:A}=w,j=(0,M.Z)(w),I=Math.round(100*(r?.width||100))/1e4,E=Math.round(100*(r?.height||100))/1e4,R=Math.round(100*(r?.x_coord||0))/1e4,O=Math.round(100*(r?.y_coord||0))/1e4;(0,f.useEffect)(()=>{if(t){let e=(0,F.KV)({text:c,boxHeight:L.q8/i*E,boxWidth:L.q8*I,font:j,startFontSize:Math.floor(m||k||24)});P(e.lines),x(e.fontSize)}},[t,c]);let N=b*a,Z=_?(0,T.pE)(N,A):{x:0,y:0},V=I*L.q8*a+2*Z.x,B=E*(L.q8/i)*a+2*Z.y,$=n+R*L.q8*a-Z.x,D=l?`${100*O}%`:s+O*(L.q8/i)*a-Z.y;return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:$,top:D}},display:"flex",height:B,position:"absolute",width:V,children:(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:(0,z.RK)({alignment:p,verticalAlignment:g})},children:(0,u.jsx)(o.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,u.jsx)("p",{style:(0,z.BN)({fontSize:N,hexColor:y,letterSpacing:C,lineHeight:A,name:S}),children:v.map((e,t)=>(0,u.jsx)("span",{"data-gestalt-valid-html":"Text",style:(0,z.xm)({fontSize:N,hasText:e.text.length>0,highlightColor:_||null,lineHeight:A}),children:t===v.length-1?e.text:(0,u.jsxs)(f.Fragment,{children:[e.text," ",(0,u.jsx)("br",{})]})},`paragraphLine-${t}-${(c??"").substr(0,9)}`))})})})})}var N=n(690070);function Z({ownerId:e}){let t=(0,P.ZP)(),n=(0,I.Z)(),i=n.isAuth&&n.id===e;return(0,u.jsxs)(o.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,u.jsx)(o.xv,{color:"inverse",children:i?t._('Your video is processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that their video is still processing'):t._('This video is still processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that this video is still processing')}),(0,u.jsx)(o.xv,{color:"inverse",children:t._('Check back in a few minutes.', 'closeup.storyPin.videoPlaceholder', 'Let user know to come back in a couple of minutes to view the video')})]})}var V=n(928585),B=n(830031),$=n(852796),D=n(417394),H=n(398542),K=n(133546),U=n(884541);function W({block:e,isActive:t,pinId:n,pwtTrackImageLoad:i,thumbnail:a}){let l;let s=(0,P.ZP)(),{closeupWithinMasonryEnabled:r,isCloseupMediaViewerOpen:d,peekCloseupEnabled:c}=(0,K.x4)(),{borderStyle:p}=a?{}:(0,H.Z)({closeupWithinMasonryEnabled:r,peekCloseupEnabled:c}),m=e.image?.images?.["750x"]||e.image?.images?.["474x"],{height:g=1,width:f=1}=m||{},b=y({isUseCache:!0,signature:e.image_signature}),{peekRedesignFastFollowsEnabled:x}=(0,V.Z)(m);return m||b?(l=a?"cover":r||x?"none":"contain",(0,u.jsx)(o.xu,{alignItems:c?"center":void 0,dangerouslySetInlineStyle:{__style:{...p,aspectRatio:r?f/g:void 0,display:c?"grid":"block",justifySelf:r?"center":void 0}},height:r?"100%":"inherit",overflow:"hidden",width:r?void 0:"inherit",children:b?(0,u.jsx)(_,{_enableViewTransitions:!0,alt:s._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),color:m?.dominant_color??"",fallbackSrc:b.media?.src??"",fit:l,id:n,isActive:t,naturalHeight:g,naturalWidth:f,onLoad:i,src:m?.url??"",suppressViewTransitionTags:d}):(0,u.jsx)(h.Z,{_enableViewTransitions:!0,alt:s._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),borderStyle:p,color:m?.dominant_color??"",fit:l,id:n,isActive:t,naturalHeight:m?.height??1,naturalWidth:m?.width??1,onLoad:i,src:m?.url??"",suppressViewTransitionTags:d})})):null}function X({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:a,isSplitLayout:s=!1,musicRecordingId:r,muted:d,onEnded:c,onUpdateVideoInfo:p,ownerId:h,pageAspectRatio:m,pageDimensions:_,pageIndex:g,pin:f,pinId:b,scaleFactor:x,stillLoading:v,videoThumbnailStartTime:P,thumbnail:w=!1}){let{block_style:{height:S=100,width:k=100,x_coord:C=0,y_coord:A=0}={},video:T}=t,{closeupWithinMasonryEnabled:j}=(0,K.x4)(),I=l._B/m,{height:E,width:R}=_,z=k*l._B*x/100,L=S*I*x/100,F=k<100?Math.min(Math.max(100,k)-Math.abs(C),k):Math.min(Math.max(k-Math.abs(C),0),100),M=S<100?Math.min(Math.max(100,S)-Math.abs(A),S):Math.min(Math.max(S-Math.abs(A),0),100),O=j?"100%":M*I*x/100,V=j?"100%":F*l._B*x/100,B=Math.max(A,0)*I*x/100,$=Math.max(C,0)*l._B*x/100,D=y({isUseCache:!T,signature:t.video_signature});if(v)return null;let{media:H}=D||{},{duration:U,src:W}=H||{},X=!!W&&!!U;return T||X?!!(T?.video_list?.V_HLSV3_MOBILE||T?.video_list?.V_720P||X)&&(0,u.jsx)(o.xu,{height:s?"50%":"100%",overflow:"hidden",position:"relative",children:(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{alignSelf:"anchor-center",left:$,top:B}},height:w?E:O,overflow:"hidden",position:"absolute",width:w?R:V,children:(0,u.jsx)(N.Z,{activePageIndex:e,aspectRatio:m,blockHeight:w?E:L,blockWidth:w?R:z,closeupStoryPinViewability:n,customEndCard:i,isPlaying:a,musicRecordingId:r,muted:d,onEnded:c,onUpdateVideoInfo:p,pageIndex:g,pin:f,pinId:b,roundCorners:L>=E&&z>=R,video:T||{video_list:{V_EXP7:{duration:U?1e3*U:0,url:W}}},videoThumbnailStartTime:P})})}):(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:$,top:B}},height:O,position:"absolute",width:V,children:(0,u.jsx)(Z,{ownerId:h})})}let G=void 0!==a?a:a=n(292875);function q({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,disableProductStickers:a,fontsLoaded:s,horizontalOffset:r,isActive:d,isSplitLayout:c=!1,musicRecordingId:h,muteVideos:m,onEnded:_,onFlyoutOpen:g,onUpdateVideoInfo:y,ownerId:f,pageAspectRatio:b,pageHeight:x,pageIndex:v,pageWidth:P,pin:w,pinId:S,previewOnly:k,pinKey:A,stillLoading:j=!1,thumbnail:I=!1,transform:E,verticalOffset:z,videoPinProgress:L,videoThumbnailStartTime:F}){let M=(0,C.Z)(G,A),{closeupWithinMasonryEnabled:N}=(0,K.x4)(),{block_style:{height:Z=100,width:V=100,x_coord:H=0,y_coord:q=0}={},interactive_sticker_type:Y=null}=t,J=(0,$.g)(),Q=(0,B.E)();if(0===Z||0===V)return null;let ee=P/l._B;switch(t.type){case T.h8.PARAGRAPH:case T.h8.HEADING:return(0,u.jsx)(O,{block:t,fontsLoaded:s,horizontalOffset:r,pageAspectRatio:b,scaleFactor:ee,thumbnail:I,verticalOffset:z});case T.h8.VIDEO:return(0,u.jsx)(X,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:d,isSplitLayout:c,musicRecordingId:h,muted:m,onEnded:_,onUpdateVideoInfo:y,ownerId:f,pageAspectRatio:b,pageDimensions:{height:x,width:P},pageIndex:v,pin:w,pinId:S,scaleFactor:ee,stillLoading:j,thumbnail:I,videoThumbnailStartTime:F});case T.h8.IMAGE:let{scaleX:et=1,scaleY:en=1}=E||{};return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{display:N?"grid":"block",height:`${Z}%`,left:`${H*et}%`,top:`${q*en}%`,width:`${V}%`}},overflow:"hidden",position:"absolute",children:(0,u.jsx)(W,{block:t,isActive:d,pinId:S,pwtTrackImageLoad:()=>{J&&d&&(J.addBinaryAnnotation("pin.id",S,"STRING"),J.addBinaryAnnotation("video",!1,"BOOL"),J.stop()),d&&(Q&&(Q.addBinaryAnnotation("pin.id",S,"STRING"),Q.addBinaryAnnotation("video",!1,"BOOL"),Q.removeConstraint(U._z),Q.markConstraintComplete(U.pM)),(0,D.XJ)("pin.id",S,"STRING"),(0,D.XJ)("video",!1,"BOOL"),(0,D.l7)(U._z))},thumbnail:I})});case T.h8.MENTION_STICKER:return!k&&(0,u.jsx)(R,{block:{...t},elementType:12120,horizontalOffset:r,onFlyoutOpen:g,pageAspectRatio:b,pageIndex:v,pinKey:null,scaleFactor:ee,tooltipElementType:12121,verticalOffset:z,videoPinProgress:L});case T.h8.GENERIC_STICKER:return!k&&(e=>{let t=5===Y;return(0,u.jsx)(R,{block:{...e},elementType:t?12827:12858,horizontalOffset:r,onFlyoutOpen:g,pageAspectRatio:b,pageIndex:v,pinKey:null,scaleFactor:ee,tooltipElementType:t?12828:12859,verticalOffset:z,videoPinProgress:L})})(t);case T.h8.PRODUCT_STICKER:return!k&&!a&&(0,u.jsx)(R,{block:{...t},elementType:12223,horizontalOffset:r,onFlyoutOpen:g,pageAspectRatio:b,pageIndex:v,pinKey:M,scaleFactor:ee,tooltipElementType:12224,verticalOffset:z,videoPinProgress:L});case T.h8.VTO_MAKEUP_STICKER:return!k&&(0,u.jsx)(R,{block:{...t},elementType:12561,horizontalOffset:r,onFlyoutOpen:g,pageAspectRatio:b,pageIndex:v,pinKey:null,scaleFactor:ee,tooltipElementType:12561,verticalOffset:z,videoPinProgress:L});case T.h8.COMMENT_REPLY_STICKER:return t.type===T.h8.COMMENT_REPLY_STICKER&&!k&&(0,u.jsx)(p,{block:t,horizontalOffset:r,pageAspectRatio:b,scaleFactor:ee,verticalOffset:z});default:return null}}},120034:function(e,t,n){n.d(t,{Z:()=>i});let i=({carouselData:e,domain:t})=>{let n="",i=t||"";if(e){let{carouselSlots:t=[]}=e,a=e.index??0;t&&t[a]&&(n=t[a].link||"",i=t[a].domain||i)}return{carouselLink:n,currentDomain:i}}},514793:function(e,t,n){n.d(t,{Z:()=>d}),n(422578);var i,a=n(120034),o=n(907022),l=n(986523),s=n(133546);let r=void 0!==i?i:i=n(631017);function d({pinKey:e}){let t;let{closeupWithinMasonryEnabled:n}=(0,s.x4)(),i=(0,l.Z)(),d=(0,o.Z)(r,e);if(!n)return{maxHeight:void 0};let c=d?.richMetadata?.products?.[0],u=c?.offerSummary,p=u?.price||u?.standardPrice,h=d?.linkDomain?.officialUser?.firstName,m=!!d?.closeupAttribution?.firstName||h,_=d?.linkUserWebsite?.officialUser?.firstName,g=decodeURIComponent(d?.trackedLink||d?.link||""),{currentDomain:y}=(0,a.Z)({carouselData:d?.carouselData&&{carouselSlots:d?.carouselData.carouselSlots&&d?.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:d?.carouselData?.index},domain:d?.domain}),f=y.split(".")[0],b=0,x=0;return(t=84+(p?18:0),b+=(d?.closeupUnifiedTitle?23:0)+(m?40:0),x+=(_||h||f)&&g?64:0,t+=Math.max(b,x),i)?{maxHeight:`calc(100vh - 80px - ${t}px)`}:{maxHeight:window.innerHeight-80-t}}},928585:function(e,t,n){n.d(t,{Z:()=>s});var i=n(261978),a=n(613567),o=n(774838),l=n(739405);function s(e){let{isAuthenticated:t,isRTL:n}=(0,o.B)(),s=(0,l.HG)(),{checkExperiment:r}=(0,a.F)(),d=t&&s&&!n&&r("closeup_dweb_peek_redesign_fast_follow").anyEnabled,c=r("closeup_dweb_peek_redesign_fast_follow").group,u=t&&s&&!n&&(r("closeup_dweb_side_by_side_redesign_fast_follow").anyEnabled||"enabled_side_by_side"===r("closeup_auth_related_pins_above_fold_2024_dweb").group),p=u?r("closeup_dweb_side_by_side_redesign_fast_follow").group:"";return{peekRedesignFastFollowsExpGroup:c,peekRedesignFastFollowsEnabled:d&&(0,i.Z)(c,e),sideBySideRedesignFastFollowsExpGroup:p,sideBySideRedesignFastFollowsEnabled:u,sideBySideFullWidthCTAEnabled:"enabled_full_width_cta"===p||"employees"===p}}},299234:function(e,t,n){n.r(t),n.d(t,{default:()=>c});var i=n(667294),a=n(883119),o=n(768576),l=n(521367),s=n(138596),r=n(500499),d=n(785893);function c({controllerOptions:e,iconColor:t,iconOnly:n,buttonText:c,tabIndex:u=0,closeupWithinMasonryEnabled:p=!1}){let h=(0,s.ZP)(),m=(0,i.useRef)(null),_=new a.Ry(5);return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(r.Z,{...e,children:({handleSendShareFlyoutButtonClick:e})=>(0,d.jsx)(a.u,{inline:!0,text:h._('Share', 'Closeup.SharePin.Icon', 'Icon for sharing the current pin'),zIndex:_,children:(0,d.jsx)(o.Z,{ref:m,accessibilityLabel:h._('Send', 'Accessible label for button to send this pin', 'Accessible label for button to send this pin'),bgColor:p?"white":void 0,buttonText:c,handleClick:()=>e(),icon:"share",iconColor:t,iconOnly:n,tabIndex:u,testId:"closeup-share-button"})})}),(0,d.jsx)(l.N,{anchors:{3017:m.current},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})]})}},70806:function(e,t,n){n.d(t,{Z:()=>U});var i,a,o=n(667294);n(422578);var l=n(883119),s=n(788730),r=n(514793),d=n(299234),c=n(230201),u=n(943152),p=n(907022),h=n(138596),m=n(133546),_=n(767415),g=n(785893);function y(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let f={__style:{backgroundColor:"#000"}},b=void 0!==i?i:i=n(950609);class x extends o.PureComponent{constructor(...e){super(...e),y(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.props.onRestartVideo?.({event:e}),(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),y(this,"handleShareVideo",()=>{let{clientTrackingParams:e,onToggleFlyout:t,isFlyoutOpen:n,pinId:i,requireAuth:a,logContextEvent:o}=this.props;if(n&&(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),o({event_type:101,component:179,object_id_str:i,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e}),a){a();return}t&&t()}),y(this,"handleExternalSend",()=>{(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),y(this,"renderReplayButton",()=>(0,g.jsx)(l.iP,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),onTap:this.handleRestartVideo,rounding:2,children:(0,g.jsxs)(l.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(l.xu,{marginEnd:3,children:(0,g.jsx)(l.JO,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"inverse",icon:"refresh",size:18})}),(0,g.jsx)(l.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Watch again', 'Clickable label when pressed restarts the video', 'Clickable label when pressed restarts the video')})]})})),y(this,"renderShareButton",()=>{let{clientTrackingParams:e,gridDescription:t,imageSrc:n,isFlyoutOpen:i,onFlyoutDismiss:a,pinId:o}=this.props;return(0,g.jsx)(l.iP,{accessibilityLabel:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),onTap:this.handleShareVideo,rounding:2,children:(0,g.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,g.jsx)(d.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:this.handleExternalSend,viewType:3},isFlyoutOpen:i,onFlyoutDismiss:a,onToggleFlyout:()=>{},sendObject:{type:"pin",description:t,id:o,imageUrl:n,url:`/pin/${o}/`,clientTrackingParams:e}},iconColor:"white",iconOnly:!0,tabIndex:-1}),(0,g.jsx)(l.xu,{children:(0,g.jsx)(l.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished')})})]})})})}componentDidMount(){let{clientTrackingParams:e,pinId:t,logContextEvent:n}=this.props;(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),n({event_type:13,component:179,object_id_str:t,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e})}render(){let{backgroundImage:e,naturalHeight:t,naturalWidth:n,maxHeight:i,maxWidth:a,pinTitle:o}=this.props;return(0,g.jsx)(l.xu,{maxHeight:i,maxWidth:a,children:(0,g.jsxs)(l.Ee,{alt:o||"",naturalHeight:t,naturalWidth:n,src:e,children:[(0,g.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:f,left:!0,position:"absolute",right:!0,top:!0}),(0,g.jsx)(l.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:i,maxWidth:a,position:"absolute",top:!0,width:"100%",children:(0,g.jsxs)(l.xu,{position:"absolute",children:[(0,g.jsx)(l.xu,{children:this.renderShareButton()}),(0,g.jsx)(l.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function v(e){let t;let{pinKey:n}=e,i=(0,p.Z)(b,n),{logContextEvent:a}=(0,c.v)(),o=(0,h.ZP)(),l=(0,u.Z)(),{closeupWithinMasonryEnabled:d,peekCloseupEnabled:_,viewportSize:y}=(0,m.x4)(),{maxHeight:f,fiftyPercentHeight:v,fiftyPercentWidth:P}=(0,s.Re)(),{maxHeight:w}=(0,r.Z)({pinKey:i});return _?t="sm"===y?v:f:d&&(t=w),(0,g.jsx)(x,{...e,closeupWithinMasonryEnabled:d,i18n:o,logContextEvent:a,maxHeight:t,maxWidth:P,requireAuth:l})}let P=({backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:i,pinTitle:a})=>{let o=(0,h.ZP)(),{isCloseupRelatedPinsAboveTheFoldEnabled:s}=(0,m.x4)();return(0,g.jsx)(l.xu,{"data-test-id":"video-end-card",height:s?"100%":void 0,width:s?"100%":void 0,children:(0,g.jsxs)(l.Ee,{alt:a||"",fit:s?"contain":void 0,naturalHeight:s?1:t,naturalWidth:s?1:n,src:e,children:[(0,g.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:f,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,g.jsx)(l.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,g.jsx)(l.xu,{children:(0,g.jsx)(l.iP,{onTap:i,rounding:2,children:(0,g.jsxs)(l.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(l.hU,{accessibilityLabel:o._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video'),icon:"refresh",iconColor:"white",size:"md"}),(0,g.jsx)(l.X6,{color:"light",overflow:"normal",size:"400",children:o._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video')})]})})})})]})})};var w=n(343669),S=n(426035),k=n(830031),C=n(852796),A=n(296264),T=n(417394),j=n(774838),I=n(410706),E=n(151383),R=n(176783),z=n(967515),L=n(629724),F=n(739405),M=n(764682),O=n(74972),N=n(884541),Z=n(317083),V=n(959703);function B(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let $=void 0!==a?a:a=n(44054),D=e=>!!e&&e.endsWith(".gif"),H=(e,t)=>{t({currentTime:e?.currentTime??0,duration:e?.duration??1})};class K extends o.Component{constructor(...e){super(...e),B(this,"state",{controls:"always"===this.props.showControls&&!this.props.disabled,fullscreen:!1,playing:!(0,w.G6)(this.props.requestContext.userAgent.browserName)&&!!this.props.autoplay&&!this.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted||this.props.shouldMute?0:1,videoStartTime:this.props.videoStartTime||0}),B(this,"setVideoPwtLoadingStop",(e=!1)=>{if(!A.Z)return;let{storyPinStepStopwatch:t,pinId:n,pwtSurfaceContext:i}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",n,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:A.Z.now()}),t.stop()),i&&(e||(i.addAnnotation("video.startup.end"),(0,S.ZP)("video.startup.end")),i.addBinaryAnnotation("pin.id",n,"STRING"),(0,T.XJ)("pin.id",n,"STRING"),i.addBinaryAnnotation("video",!0,"BOOL"),(0,T.XJ)("video",!0,"BOOL"),i.markConstraintComplete(N._z),i.addSubspan("perceived_video_load",null,A.Z.now()),(0,S.L8)("perceived_video_load"),"story_pin"===i.getMetricId().segment&&i.removeConstraint(N.pM),"STORY_PIN_CLOSEUP"===(0,T.Ly)()&&(0,T.l7)(N.pM))}),B(this,"componentDidMount",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:o}=n&&i||a||{},l=(0,Z.j4)(e||o);l?.ready===4&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0)),document.addEventListener("fullscreenchange",this.onFullscreenChange),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange),document.addEventListener("mozfullscreenchange",this.onFullscreenChange),document.addEventListener("MSFullscreenChange",this.onFullscreenChange)}),B(this,"componentWillUnmount",()=>{document.removeEventListener("fullscreenchange",this.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange)}),B(this,"onFullscreenChange",()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||this.props.setPanelOpen(e=>!e)}),B(this,"componentDidUpdate",(e,t)=>{this.props.videoStartTime&&this.props.videoStartTime!==e.videoStartTime&&this.setState({videoStartTime:this.props.videoStartTime}),!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:"never"!==this.props.showControls}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:this.props.muted?0:1}),"never"===this.props.showControls&&t.controls&&this.setState({controls:!1}),(t.controls||t.playing)&&this.props.disabled&&this.setState({playing:!1,controls:!1}),!t.playing&&this.state.playing&&this.props.onPlay&&this.props.onPlay()}),B(this,"handleTouch",()=>{let{seeking:e}=this.state,{disabled:t}=this.props;e||t||this.setState(e=>({playing:!e.playing}))}),B(this,"handleShowControls",()=>this.setState({controls:!0})),B(this,"handleHideControls",()=>this.setState({controls:!1})),B(this,"handleReady",()=>{let{ready:e,playing:t}=this.state,{autoplay:n,disabled:i}=this.props;n&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0}),(0,w.G6)(this.props.requestContext.userAgent.browserName)&&!t&&n&&!i&&this.setState({playing:!0})}),B(this,"handleEnded",({event:e})=>{let{customThumbnail:t,customEndCard:n,pinId:i,setCurrentVideo:a,loop:o,onEnded:l}=this.props;e.stopPropagation(),!o&&(this.setState({playing:!1}),D(t)||n||(this.setState({showEndCard:!0,videoStartTime:0}),a({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),l&&l(),this.props.setPanelOpen(!0)}),B(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),B(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),B(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),B(this,"handlePlayheadDown",()=>{this.setState({seeking:!0})}),B(this,"handlePlayheadUp",()=>{setTimeout(()=>{this.setState({seeking:!1})},500)}),B(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),B(this,"handleShareRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),B(this,"handleVolumeChange",({event:e,volume:t})=>{let{shouldMute:n}=this.props;e.stopPropagation(),n||this.setState({volume:t})}),B(this,"exitFullscreen",()=>{let{document:e}=window;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),B(this,"requestFullscreen",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:o}=n&&i||a||{},l=(0,Z.j4)(e||o);l.requestFullscreen?l.requestFullscreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.msRequestFullscreen&&l.msRequestFullscreen()}),B(this,"renderCloseupVideoEndCard",(e,t,n,i)=>{let a={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleShareRestartVideo},o={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleRestartVideo},{clientTrackingParams:l,flyoutShareProps:s}=this.props,r={clientTrackingParams:l,gridDescription:s?s.gridDescription:"",imageSrc:s?s.imageSrc:"",isFlyoutOpen:!!s&&s.isFlyoutOpen,onFlyoutDismiss:s?s.onFlyoutDismiss:()=>{},onToggleFlyout:s?s.onToggleFlyout:()=>{},pinId:s?s.pinId:"",pinKey:this.props.pin};return i?(0,g.jsx)(P,{...o}):(0,g.jsx)(v,{...r,...a})})}render(){let e;let{aspectRatio:t,autoplay:n,closeupStoryPinViewability:i,contextLogData:a={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:o,isPromoted:r,loop:d,objectFit:c,preferMp4:u,preload:p,requestContext:h,roundingOverride:m,showControls:_,variant:y,video:f,captions:b,isDesktop:x,videoThumbnailStartTime:v,pin:P,pinId:S,setProgressInfo:k,progressInfo:C,setPanelOpen:A,panelOpen:T,setMute:j,isMuted:z,isCloseupRelatedPinsAboveTheFoldEnabled:L,closeupWithinMasonryEnabled:F,maxHeight:O,maxWidth:N,onTimeChange:B,seekTime:$}=this.props;a.is_closeup_video=!0;let{controls:D,fullscreen:K,playing:U,showEndCard:W,volume:X,videoStartTime:G}=this.state,q=f.hlsv3||f.hls||null;if(!q&&!f.mp4)return null;let{mp4:Y}=f,J=u&&Y&&Y.url||q&&[{type:"video/m3u8",src:q.url}]||void 0,{height:Q,thumbnail:ee,width:et}=u&&Y||q||{},en=o||ee;return e=null!=m?m:"default"===y?0:"storyPin"===y?R.yR:2,(0,g.jsxs)(l.zd,{height:F?"inherit":void 0,rounding:L?void 0:e,wash:!F||void 0,width:F?"inherit":void 0,willChangeTransform:!((0,w.G6)(h.userAgent.browserName)&&K),children:[W?this.renderCloseupVideoEndCard(en??"",Q??1,et??1,r):(0,g.jsxs)(l.iP,{accessibilityLabel:this.props.i18n._('Pause or play video', 'pin.closeup.video.tap', 'tap area to pause or play video'),fullHeight:F,onMouseEnter:"hover"===_?this.handleShowControls:void 0,onMouseLeave:"hover"===_?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:[L&&(0,g.jsx)(I.Z,{playing:U,zIndexValue:99}),(0,g.jsx)(V.ZP,{aspectRatio:t??(et??1)/(Q??1),backgroundColor:F?"black":s.yc,captions:b,closeupStoryPinViewability:i,contextLogData:{...a,video_id:this.props.video.id},hlsConfig:{startLevel:Z.VS},isAutoPlay:!!n,loop:d,objectFit:c,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===y?B:({time:e})=>{H&&"number"==typeof Y?.duration&&Y.duration>0&&k&&H({currentTime:e,duration:Y.duration/M.gJ},k)},onVolumeChange:this.handleVolumeChange,pin:P,pinKey:P,playing:U,poster:en,preferMp4:u,preload:p,seekTime:$,src:J,video:u&&Y||q||{},videoStartTime:G||v,volume:X})]}),(0,g.jsx)(l.xu,{onMouseEnter:"hover"===_?this.handleShowControls:void 0,onMouseLeave:"hover"===_?this.handleHideControls:void 0,children:"storyPin"!==y&&(0,g.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...D?{...Z.Ul}:{},flexDirection:"column-reverse"}},display:"flex",height:Z.hy,maxHeight:O,maxWidth:N,paddingX:6,position:"absolute",width:L?"100%":"calc(100% - 4px)",zIndex:R.Gf,children:(0,g.jsx)(E.Z,{activePageIndex:0,captionsUrl:b,handleMute:()=>{this.setState({volume:z?1:0}),j(!z)},handlePanelChange:()=>{A&&A(!T),T&&x&&this.requestFullscreen()},handlePause:()=>{this.setState({playing:!1})},handlePausePlay:()=>{this.setState({playing:!U})},handlePlay:()=>{this.setState({playing:!0})},handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:z,isPanelOpen:T,isPlaying:U,isStoryPin:!1,pageCount:1,pages:[],pinId:S,progressInfo:C,showEndCard:W,showVideoControls:D,viewParameter:156})})})]})}}function U(e){let{pinKey:t,pinId:n,isPromoted:i,video:a,muted:l}=e,d=(0,p.Z)($,t),c=(0,h.ZP)(),u=(0,j.B)(),_=(0,C.g)(),y=(0,k.E)(),{seekTimes:f}=(0,z.Hx)(),{clientTrackingParams:b,closeupWithinMasonryEnabled:x,isCloseupRelatedPinsAboveTheFoldEnabled:v}=(0,m.x4)(),{maxWidth:P}=(0,s.Re)(),{appUI:w,setCurrentVideo:S}=(0,O.I)(),{videosAutoplaying:A}=w,{organicVideosAutoplaying:T,promotedVideosAutoplaying:I}=A,E=u.locale.toLowerCase(),R=(a.mp4?.captions_urls||a.hlsv3?.captions_urls)??{},M=E&&R[E]||Object.values(R)[0]||"",N=(0,F.HG)(),Z=i?I[n]:T[n],V=parseInt((0,L.Z)().t||0,10),[B,D]=(0,o.useState)(Z?.currentTime||0),[H,U]=(0,o.useState)(null),[W,X]=(0,o.useState)(!0),[G,q]=(0,o.useState)(l),{maxHeight:Y}=(0,r.Z)({pinKey:d});return(0,o.useEffect)(()=>{let e=B;V>0&&(e=V),f[n]&&(e=f[n]),D(e)},[f,n,V,B]),(0,g.jsx)(K,{...e,captions:String(M)||"",clientTrackingParams:b,closeupWithinMasonryEnabled:x,i18n:c,isCloseupRelatedPinsAboveTheFoldEnabled:v,isDesktop:N,isMuted:G,isPanelOpen:W,isPlaying:!Z||!Z.paused,maxHeight:Y,maxWidth:P,panelOpen:W,pin:d,progressInfo:H,pwtSurfaceContext:y,requestContext:u,seekTime:f[n],setCurrentVideo:S,setMute:q,setPanelOpen:X,setProgressInfo:U,storyPinStepStopwatch:_,videoStartTime:B})}B(K,"defaultProps",{loop:!1,showControls:"hover"})},295472:function(e,t,n){n.d(t,{Z:()=>l});var i=n(537347),a=n.n(i),o=n(767415);function l(e){if("undefined"==typeof window||!document.head)return(0,o.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));let{head:t}=document,n=[];return e.forEach(e=>{e.styles.forEach(i=>{let o=document.querySelector(`#${e.fontFamily??""}-${i.name}`);o||((o=document.createElement("style")).setAttribute("id",`${e.fontFamily??""}-${i.name}`),t.appendChild(o),e.format&&i.fontUrl&&o&&o.sheet&&o.sheet.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${i.fontStyle}";
              font-weight: "${i.fontWeight}";
              src: url("${i.fontUrl}") format("${e.format}");
            }
          `,0),n.push(new(a())(e.fontFamily,{style:i.fontStyle,weight:i.fontWeight}).load()))})}),Promise.all(n).then(()=>{Promise.resolve()}).catch(e=>{(0,o.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},835531:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(232079),o=n(785893);let l=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,n)=>{let a=(0,i.useRef)(null),o=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e!==a.current||n&&n!==o.current){a.current=e??null;let n=l(e);n?.complete&&t()}o.current=n},[e,t,n])};function r({alt:e,children:t,color:n,elementTiming:i,fetchPriority:l,isActive:r=!1,naturalHeight:d,naturalWidth:c,onLoad:u,src:p,fit:h="none",id:m,srcSet:_,...g}){return s(p,u,r),(0,o.jsx)(a.Z,{...g,alt:e,color:n,elementTiming:i,fetchPriority:l,fit:h,id:m,naturalHeight:d,naturalWidth:c,onLoad:u,src:p,srcSet:_,children:t})}},439947:function(e,t,n){n.d(t,{Z:()=>S});var i=n(667294),a=n(213491),o=n(705460),l=n(774303),s=n(426035),r=n(827039),d=n(449896),c=n(192496),u=n(780764),p=n(217472),h=n(337751),m=n(139876),_=n(998727),g=n(679767),y=n(240083),f=n(296264);let b=(0,l.XV)("PwtStopwatch"),x=(e,t)=>{if(f.Z){if("start"===t.type&&!e.isTiming){let{name:n,startTime:i,navigationType:a}=t;return(0,o.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:f.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:a},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(t.bypassIsTimingCheck)b("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return b("ignoring action - stopwatch is not actively timing",t),(0,o.A9)(`WARN.${n}.noTiming.${t.type}`),e}}if("annotate"===t.type){let n=f.Z.now();return b(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return b(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:i}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:i}}};{let a=e.binaryAnnotations[t.name].value||0;return b(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(a)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(a,n):a,type:i}}}}}if("addSubspan"===t.type){b(`adding subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&b(`WARNING: adding duplicate subspan name {${t.name}}`);let n=t.id||(0,y.Z)();-1!==e.spans.findIndex(e=>e.id===n)&&b(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let i=0;return t.startTime?i=t.startTime:e.startTime?i=e.startTime:b(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:i,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){b(`starting subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&b(`WARNING: starting duplicate subspan name {${t.name}}`);let n=t.id||(0,y.Z)();-1!==e.spans.findIndex(e=>e.id===n)&&b(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);let i=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||i,startTime:f.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){b(`stopping subspan {${t.name}}`),!t.id&&e.spans.filter(e=>e.name===t.name).length>1&&(0,o.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type});let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=f.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,o.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.filter(e=>e.name===t.currentName).length>1&&(0,o.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let n=e.spans.findIndex(e=>e.name===t.currentName);return n>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(b(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[n].name=t.newName):(0,o.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:i,pwtStaticContext:a,annotations:o,binaryAnnotations:l,isSampled:m,spans:g,traceId:x}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),m){let m=t.stopTime||f.Z.now(),v=[...g.map(t=>{t.endTime===1/0&&(t.endTime=m);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(b(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===g.length){let e=(0,y.Z)();v.push({name:"network_resources",id:e,startTime:n,endTime:m,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,h.Z)((0,u.p)(t,[]),e)).filter(Boolean))}let P="initial_app_load"===i.navigationType&&(0,c.Z)(),w={type:"COMPLETE",traceId:x,startTime:n,endTime:m,spans:v,annotationMap:{...(0,_.Z)(o),...(0,r.jh)("browser_",P?(0,r.D3)(P):{}),...(0,r.jh)("mark_",(0,s.gQ)())},binaryAnnotationMap:(0,d.ng)({metricId:i,pwtStaticContext:a,binaryAnnotations:l,performanceResourceTimings:t.customStopwatchBuffer||[],type:"COMPLETE"})};(0,p.Z)({metricId:i,pwtStaticContext:a,result:w})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,y.Z)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,o.H)(n),i&&i.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,y.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let n=t.reason||"",{startTime:i,metricId:a,pwtStaticContext:o,binaryAnnotations:l,traceId:s}=e,r={type:"ABORT",traceId:s,startTime:i,endTime:f.Z.now(),spans:[],annotationMap:{},binaryAnnotationMap:(0,d.ng)({metricId:a,pwtStaticContext:o,binaryAnnotations:l,performanceResourceTimings:t.customStopwatchBuffer||[],type:"ABORT"}),reason:n};return(0,p.Z)({metricId:a,pwtStaticContext:o,result:r}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:s,spanNameUpdates:[]}}}return e},v=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:a=!1})=>{let o=(0,m.Z)(),l=(0,i.useRef)([]),s=(0,i.useRef)(null),[r,d]=(0,i.useReducer)(x,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,y.Z)(),spanNameUpdates:[]});return o?{isTiming:r.isTiming,name:r.name,start:i=>(window.PerformanceObserver&&(l.current=[],s.current=(0,g.Z)({entryTypes:["resource"]},e=>{l.current=l.current.concat(e.getEntries()),l.current.length>1e3&&(l.current=l.current.slice(-1e3))})),d({type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:o,isSampled:!t||Math.random()<t})),stop:e=>d({type:"stop",stopTime:e,stopwatchPerformanceObserver:s.current,customStopwatchBuffer:l.current,manualAndResourceSpans:a}),error:e=>{d({type:"error",stopwatchPerformanceObserver:s.current,error:e})},abort:e=>d({type:"abort",stopTime:f.Z?.now(),stopwatchPerformanceObserver:s.current,customStopwatchBuffer:l.current,reason:e}),annotate:(e,t,n=!1)=>d({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,a=!1)=>d({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:a}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a=!1})=>d({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:a={},parentId:o=null,id:l=null,bypassIsTimingCheck:s=!1})=>d({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:o,id:l,bypassIsTimingCheck:s}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:a=null,id:o=null,bypassIsTimingCheck:l=!1})=>d({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:o,bypassIsTimingCheck:l}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o=!1})=>d({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i=!0})=>d({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>r.spans.filter(n=>n[e]===t),getTraceId:()=>r.traceId}:null};var P=n(780657),w=n(785893);let S=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:l,manualAndResourceSpans:s=!1})=>{let{Provider:r,useMaybeHook:d}=(0,a.Z)(`Stopwatch_${e}`);return{Provider:function({children:a}){let d=v({name:e,sampleRate:t,navigationType:l,manualAndResourceSpans:s}),c=(0,P.Z)(),u=c?c.time:0,p=(0,i.useRef)(!1),h=d?.isTiming,m=(0,i.useCallback)(t=>{p.current?(p.current=!1,d?.abort(t)):(0,o.A9)(`WARN.${e}.noTiming.abort`)},[d]),_=(0,i.useCallback)((e,t)=>{d?.annotate(e,t)},[d]),g=(0,i.useCallback)((e,t,n,i)=>{d?.binaryAnnotate(e,t,n,i)},[d]),y=(0,i.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})=>{d?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})},[d]),f=(0,i.useCallback)(({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:o,id:l,bypassIsTimingCheck:s})=>{d?.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:o,id:l,bypassIsTimingCheck:s})},[d]),b=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:o,bypassIsTimingCheck:l})=>{d?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:o,bypassIsTimingCheck:l})},[d]),x=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o})=>{d?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o})},[d]),S=(0,i.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})=>{d?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})},[d]),k=(0,i.useCallback)((e,t)=>d?d.getSpans(e,t):[],[d]),C=(0,i.useCallback)(()=>d?d.getTraceId():"",[d]),A=(0,i.useCallback)(t=>{p.current?(p.current=!1,d?.error(t)):(0,o.A9)(`WARN.${e}.noTiming.error`)},[d]),T=(0,i.useCallback)(e=>{p.current&&d?.abort("duplicated_init_stopwatch_action"),p.current=!0,d?.start(e)},[d]),j=(0,i.useCallback)(t=>{p.current?(p.current=!1,d?.stop(t)):(0,o.A9)(`WARN.${e}.noTiming.stop`)},[d]);(0,i.useEffect)(()=>()=>{n&&m("unloadOrClientNavigation")},[u]);let I=(0,i.useMemo)(()=>({name:e,isTiming:h,abort:m,addAnnotation:_,addBinaryAnnotation:g,binaryAnnotationOperation:y,addSubspan:f,subspanStart:b,subspanStop:x,getSpans:k,getTraceId:C,updateSubspanName:S,stop:j,error:A,start:T}),[h,m,_,g,y,f,b,x,k,C,S,j,A,T]);return(0,w.jsx)(r,{value:I,children:a})},useHook:d}}},852796:function(e,t,n){n.d(t,{T:()=>o,g:()=>l});let{Provider:i,useHook:a}=(0,n(439947).Z)({name:"story_pin_step",sampleRate:1}),o=i,l=a},410706:function(e,t,n){n.d(t,{Z:()=>d});var i=n(667294),a=n(883119),o=n(59111),l=n(176783),s=n(85835),r=n(785893);function d({playing:e,zIndexValue:t}){return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(o.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,r.jsx)(a.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:l.yR,top:!0,zIndex:t?new a.Ry(t):s.lt,children:!e&&(0,r.jsx)(a.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},151383:function(e,t,n){n.d(t,{Z:()=>b});var i=n(667294),a=n(883119),o=n(138596),l=n(566431),s=n(151464),r=n(176783),d=n(967515),c=n(865043),u=n(736328),p=n(739405),h=n(764682),m=n(281213),_=n(133546),g=n(785893);let y=()=>{},f=({accessibilityLabel:e,dataTestId:t,disable:n,handleTap:i,icon:o})=>(0,g.jsx)(a.xu,{"data-test-id":t,opacity:n?.5:void 0,children:(0,g.jsx)(a.iP,{disabled:n,onTap:i,children:(0,g.jsx)(a.JO,{accessibilityLabel:e,color:"light",icon:o,size:16})})});function b({activePageIndex:e,handlePanelChange:t,handlePlay:n,handlePause:b,handlePausePlay:x,handleMute:v,handleVideoScrubbingNewPage:P,handleWatchAgain:w,inMilliseconds:S,isPlaying:k,isMuted:C,isPanelOpen:A,pages:T,pageCount:j,pinId:I="",progressInfo:E,showEndCard:R,showVideoControls:z=!1,viewParameter:L,isStoryPin:F=!0,captionsUrl:M=""}){let O=(0,o.ZP)(),{currentTime:N}=E||{},{seekTimes:Z}=(0,d.Hx)(),{closeupWithinMasonryEnabled:V}=(0,_.x4)(),B=(0,m.r)(),$=(0,p.HG)(),{captionsEnabled:D}=B,H=(0,u.Z)(),K=T[e],{should_mute:U}=K||C,W=Object.keys(Z).includes(I)&&Z[I]?Z[I]:N,X=(0,i.useMemo)(()=>T.map(e=>{let t=e.blocks?.find(e=>3===e.block_type),n=t?.video?.video_list?.V_HLSV3_MOBILE?.duration||t?.video?.video_list?.V_720P?.duration;return n?{duration:n,isVideo:!0}:{duration:l.oN,isVideo:!1}}),[T]),G=[{duration:E?.duration||0,isVideo:!0}],q=F?X:G,Y=(K&&K.blocks?.[0]||{}).video?.video_list?.V_HLSV3_MOBILE?.captions_urls,J=!1;(Y&&0!==Object.keys(Y).length||M)&&(J=!0);let Q=(0,i.useMemo)(()=>q.reduce((e,t)=>e+(t.duration||0),0)/(F?h.gJ:1),[q,F]),ee=(0,i.useMemo)(()=>q.filter((t,n)=>n<e).reduce((e,t)=>e+(t.duration||0),0)/h.gJ,[q,e]),et=q.length>0&&q[e]?.isVideo?N??0:(N??0)*5+(ee??0),en=O._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),ei=O._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,g.jsxs)(a.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,g.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:z||!k?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,g.jsxs)(a.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,g.jsx)(f,{accessibilityLabel:k?O._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):O._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:`story-pin-closeup-${k?"pause":"play"}`,handleTap:R&&w?w:x,icon:k?"pause":"play"}),E&&(0,g.jsxs)(a.xu,{"data-test-id":"time-display",children:[(0,g.jsx)(a.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,r.Lc)(et)}`})," ",(0,g.jsx)(a.xu,{display:"inlineBlock",opacity:.6,children:(0,g.jsx)(a.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,r.Lc)(Q)}`})})]})]}),(0,g.jsxs)(a.kC,{direction:"row",gap:5,children:[J&&(0,g.jsx)(f,{accessibilityLabel:D?ei:en,dataTestId:`closed-captions-button-${D?"disable":"enable"}`,handleTap:()=>{let e=$?"desktop_pin_page":"mweb_pin_page";D?(0,c.My)(`${e}.closed_captions_button.toggle_off`):(0,c.My)(`${e}.closed_captions_button.toggle_on`),H({action:"click",item:"closed-captions-button"}),B.setCaptionsEnabled(!D)},icon:D?"captions":"captions-outline"}),(0,g.jsx)(f,{accessibilityLabel:C?O._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):O._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:`story-pin-closeup-${C?"unmute":"mute"}`,disable:U,handleTap:v,icon:C?"mute":"sound"}),t&&!V&&(0,g.jsx)(f,{accessibilityLabel:A?O._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):O._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:`story-pin-closeup-${A?"maximize":"minimize"}`,handleTap:t||y,icon:A?"maximize":"minimize"})]})]}),(0,g.jsx)(s.ZP,{activePageCurrentTime:W,activePageIndex:e,duration:Q,handlePause:b,handlePlay:n,handleVideoScrubbingNewPage:P,inMilliseconds:S,isPlaying:k,pageCount:j,pageDurations:q,pinId:I,progressInfo:E,shouldShowPlayhead:!0,showEndCard:R,showVideoControls:z,videoDurations:q,viewParameter:L})]})}},151464:function(e,t,n){n.d(t,{$E:()=>m,$:()=>_,ZP:()=>b});var i=n(667294),a=n(883119),o=n(104999),l=n(138596),s=n(566431),r=n(774838),d=n(785893);function c({pillHeight:e,scrubberWidth:t}){return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:m}},display:"flex",flex:"grow",height:e,overflow:"hidden",rounding:"pill",children:(0,d.jsx)(a.xu,{color:_,dangerouslySetInlineStyle:{__style:{width:t}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var u=n(967515),p=n(739405),h=n(764682);let m="rgba(255,255,255,0.24)",_="light",g=()=>{},y=({children:e,setHoveringChange:t,handleMouseDown:n,handleMouseLeave:i,handleTouchStart:o,playhead:s,isPlaying:r,showVideoControls:c})=>{let u=(0,l.ZP)(),h=!(0,p.HG)();return(0,d.jsx)(a.iP,{children:(0,d.jsx)(a.xu,{ref:s,alignItems:"center","aria-label":u._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:h?"center":"start",marginBottom:h?0:6,minHeight:"8px",onFocus:t(!0),onMouseDown:n,onMouseLeave:i,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:o,opacity:c||!r?1:0,paddingY:h?6:0,position:"relative",role:"progressbar",width:"100%",children:e})})},f=({isRTL:e,isSeeking:t,scrubberWidth:n})=>(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:e?{right:n}:{left:n}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,d.jsx)(a.xu,{color:_,height:4,position:"absolute",rounding:"pill",children:(0,d.jsx)(a.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:t?-8:-6}},height:t?16:12,marginStart:-2,rounding:"circle",width:t?16:12})})});function b({activePageIndex:e,activePageCurrentTime:t,pageCount:n,progressInfo:l,showEndCard:m,duration:b=0,pageDurations:x=[],handlePlay:v=g,handlePause:P=g,handleVideoScrubbingNewPage:w=g,inMilliseconds:S,videoDurations:k=[],viewParameter:C,isInactiveStreamPin:A=!1,isPlaying:T=!1,setVideoProgress:j,shouldShowPlayhead:I=!1,showVideoControls:E=!0,pinId:R=""}){let z=!(0,p.HG)(),L=(0,i.useRef)(null),{isAuthenticated:F,isRTL:M}=(0,r.B)(),[O,N]=(0,i.useState)(!1),[Z,V]=(0,i.useState)(T),[B,$]=(0,i.useState)(),D=(0,o.Z)(),[H,K]=(0,i.useState)(!1),{clearSeekTime:U,updateSeekTime:W}=(0,u.RC)(),X=(0,i.useCallback)((t,i)=>{if(!A&&i<=n){if(i!==e&&w(i),j){let{isVideo:e}=k[i];j({currentTime:t/1e3,duration:e?l?.duration??1:l?.duration??5,pinId:R})}W(t/1e3,R)}D({event_type:101,view_type:3,view_parameter:C,component:14302})},[e,w,A,D,n,R,l?.duration,j,W,k,C]),G=x.map(e=>`${(e.duration||0)/b/10}%`),q=(0,i.useMemo)(()=>{let e=0;return x.map(({duration:t})=>{let n=t+e,i={min:e,max:n};return e=n,i})},[x]),Y=O?"0 1.2px":"0 1px",J=e=>()=>N(e),Q=(0,i.useCallback)(e=>{if(L.current){let{left:t=0,right:n=0,width:i=0}=L.current.getBoundingClientRect(),a=(M?Math.max(0,Math.min((n-e)/i,1)):Math.max(0,Math.min((e-t)/i,1)))*b*1e3,o=q.findIndex(e=>a>=e.min&&a<=e.max),l=-1===o?0:o;X(a-q[l].min,l)}},[b,X,q,M]),ee=(0,i.useCallback)(()=>{H||V(T||m),K(!0)},[H,V,T,m]),et=(0,i.useCallback)(e=>{ee(),T&&P(),Q(e.pageX)},[ee,T,P,Q]),en=(0,i.useCallback)(e=>{H&&Q(e.pageX)},[Q,H]),ei=(0,i.useCallback)(e=>{if(H){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===B);t&&Q(t.pageX)}},[H,Q,B]),ea=(0,i.useCallback)(()=>{J(!1),$(void 0),K(!1),F||U(),Z&&v()},[U,v,F,Z]),eo=(0,i.useCallback)(e=>{Array.from(e.changedTouches).find(e=>e.identifier===B)&&(J(!1),$(void 0),K(!1),U()),Z&&v()},[U,v,Z,B]);(0,i.useEffect)(()=>(H&&!A&&(window.addEventListener("mousemove",en),window.addEventListener("mouseup",ea),window.addEventListener("touchmove",ei),window.addEventListener("touchend",eo)),()=>{window.removeEventListener("mousemove",en),window.removeEventListener("mouseup",ea),window.removeEventListener("touchmove",ei),window.removeEventListener("touchend",eo)}),[en,ea,eo,ei,A,H,Q,Z,B]);let el=(t,n)=>t<e||m?(0,d.jsx)(a.xu,{color:_,height:4,rounding:"pill"}):e===t&&l?(0,d.jsxs)(a.kC,{alignItems:"center",flex:"grow",children:[I&&(E||O||H||z)&&(0,d.jsx)(f,{isRTL:M,isSeeking:H,scrubberWidth:n}),(0,d.jsx)(c,{pillHeight:4,scrubberWidth:n})]}):(0,d.jsx)(a.xu,{color:_,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"});return(0,d.jsx)(y,{handleMouseDown:et,handleMouseLeave:()=>{J(!1)},handleTouchStart:e=>{ee(),J(!0);let t=e.changedTouches[0];$(t.identifier),T&&P(),Q(t.pageX)},isPlaying:T,playhead:L,setHoveringChange:J,showVideoControls:E,children:Array(n).fill(void 0).map((e,i)=>{let o=l?.currentTime??0,r=l?.duration??s.P6,c=k[i],u=`${c?.isVideo&&S?Math.floor(1e4*(t??o)/(c.duration/h.gJ))/100:o/r*100}%`;return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{margin:Y}},flex:"grow",width:G.length===n?G[i]:"auto",children:(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:el(i,u)})},`${R}-${i}`)})})}},450228:function(e,t,n){n.d(t,{BN:()=>c,RK:()=>d,d3:()=>p,tq:()=>h,xm:()=>u});var i=n(667294),a=n(295472),o=n(176783),l=n(408640),s=n(893957);let r=(e,t)=>{let n=(0,o.pE)(e,t);return`${n.y}px ${n.x}px`},d=({alignment:e,verticalAlignment:t})=>{let n={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===t?n.alignItems="center":2===t&&(n.alignItems="flex-end"),1===e&&(n.justifyContent="center",n.textAlign="center"),n},c=({fontSize:e,hexColor:t,highlightColor:n,letterSpacing:i,lineHeight:a,name:o})=>({fontSize:e,letterSpacing:i,color:t,fontFamily:o,margin:0,maxHeight:"100%",textShadow:!n&&t&&"#ffffff"===t.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word",...n?{backgroundColor:n,borderRadius:e/5,padding:r(e,a)}:{}}),u=({fontSize:e,hasText:t,highlightColor:n,lineHeight:i})=>({...n?{backgroundColor:t?n:void 0,borderRadius:e/5,padding:r(e,i)}:{}}),p=({letterSpacing:e,lineHeight:t,name:n,url:i})=>({fontFamily:n,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:t,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:i}]}),h=({hasPin:e,pages:t,limitToSingleFont:n})=>{let[r,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(()=>!!e&&(0,l.X7)(t)),h=()=>{let e=t.reduce((e,t)=>{let i=t?.blocks?.filter(e=>[o.h8.PARAGRAPH,o.h8.HEADING].includes(e.type))||[];return n&&i.length>1&&(i=[i[0]]),i.forEach(t=>{let n=t.style?.font||o.Cc.font,{name:i=""}=n;e[i]||(e[i]=n)}),e},{});if(Object.keys(e).length>0){let t=Object.keys(e).map(t=>{let n=e[t];return p({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,a.Z)(t),d(!0)}};return(0,s.Z)(()=>{h()}),(0,s.Z)(()=>{c||h()}),(0,i.useEffect)(()=>{c||u((0,l.X7)(t))},[c,t]),{fontsLoaded:r,mediaDataReceived:c}}},281979:function(e,t,n){n.d(t,{Z:()=>i});function i({currentTime:e,endTime:t,startTime:n}){return"number"!=typeof n||"number"!=typeof t||!(n>=0)||!(t>0)||!(n<t)||n<=e&&e<=t}},408640:function(e,t,n){n.d(t,{B7:()=>l,X7:()=>s,n4:()=>o});var i=n(176783);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let o=(e,t)=>{let n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e?.match(n)||!t?.match(n))return null;let i=e?.split("."),a=t?.split("."),o=Math.max((i??"").length,(a??"").length);for(let e=0;e<o;e+=1){let t=e<(i?.length??0)?parseInt(i?.[e]??"",10):0,n=e<(a?.length??0)?parseInt(a?.[e]??"",10):0;if(t<n)return -1;if(t>n)return 1}return 0};class l{constructor(e,t,n){if(a(this,"start",Date.now()),a(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"==typeof window)return;this.intervalId=window.setInterval(()=>{let e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume()}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;let e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}let s=e=>e.some(e=>(e?.blocks??[]).some(e=>e.type===i.h8.IMAGE&&!!e.image||e.type===i.h8.VIDEO&&(!!e.video||!!e.video_signature)))},780268:function(e,t,n){n.d(t,{Q6:()=>a,ZP:()=>l,t2:()=>o});let i=()=>!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x",a=()=>{let e;let t="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,n=i();return t?"4g"===t?e="40-80":(n="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:n}};function o({vEXP3:e,vEXP4:t,vEXP5:n,vEXP6:i,vEXP7:o,v720P:l}){let{downloadSpeedGroup:s,screenDimension:r}=a(),d={"1x":e,"2x":n},c={"1x":o,"2x":o};return({unknown:d,"0-1":d,"1-5":{"1x":t,"2x":n},"5-10":{"1x":n,"2x":n},"10-20":{"1x":i,"2x":i},"20-40":c,"40-80":c,"80_or_above":c})[s][r]||l||void 0}function l(e){let{vHLSV3MOBILE:t,...n}=e,i=o(n),a=t||void 0;return i?{hlsv3:a,mp4:i}:{hlsv3:a}}},800640:function(e,t,n){n.d(t,{K4:()=>l,ZP:()=>s,yq:()=>a});var i=n(667294);let a=(0,n(802108).qe)(({closeupBodyWidth:e,isCollageOverlayOpen:t,isRelatedPins10PercentVisible:n,setIsCollageOverlayOpen:i})=>({closeupBodyWidth:e,isCollageOverlayOpen:t,setIsCollageOverlayOpen:i,isRelatedPins10PercentVisible:n})),o=(0,i.createContext)({closeupBodyWidth:void 0,isCollageOverlayOpen:!1,isRelatedPins10PercentVisible:!1,setIsCollageOverlayOpen:()=>{}});function l(){let e=(0,i.useContext)(o);if(!e)throw Error("useCloseupBodyContext must be used within CloseupBodyContextProvider");return e}let s=o},398542:function(e,t,n){n.d(t,{Z:()=>u});let i={WebkitMaskImage:"-webkit-radial-gradient(white, black)"},a=e=>`${e??0}px`,o=({topLeft:e,topRight:t,bottomRight:n,bottomLeft:i})=>`${a(e)} ${a(t)} ${a(n)} ${a(i)}`,l=({additionalPadding:e=0}={})=>({borderRadius:o({topLeft:32+e,topRight:32+e,bottomRight:0,bottomLeft:0}),borderRadiusNumeric:32+e}),s=({additionalPadding:e=0}={})=>({borderRadius:o({topLeft:24+e,topRight:24+e,bottomRight:24+e,bottomLeft:24+e}),borderRadiusNumeric:24+e}),r=({additionalPadding:e=0}={})=>({borderRadius:o({topLeft:32+e,topRight:0,bottomRight:0,bottomLeft:32+e}),borderRadiusNumeric:32+e}),d=({additionalPadding:e=0}={})=>({borderRadius:o({topLeft:0,topRight:32+e,bottomRight:32+e,bottomLeft:0}),borderRadiusNumeric:32+e}),c=({getterOptions:e,isPadded:t,isRTL:n})=>t?s(e):n?d(e):r(e);function u({additionalPadding:e,isSideBySide:t,isPadded:n,isRTL:a,closeupWithinMasonryEnabled:o=!1,peekCloseupEnabled:r=!1}){let d={additionalPadding:e};if(o)return{borderStyle:{...i,borderRadius:"24px"},borderRadiusNumeric:24};if(r)return{borderStyle:{...i,borderRadius:"unset"},borderRadiusNumeric:0};if(t){let{borderRadius:e,borderRadiusNumeric:t}=c({isPadded:n,isRTL:a,getterOptions:d});return{borderStyle:{...i,borderRadius:e},borderRadiusNumeric:t}}{let{borderRadius:e,borderRadiusNumeric:t}=(n?s:l)(d);return{borderStyle:{...i,borderRadius:e},borderRadiusNumeric:t}}}},884541:function(e,t,n){let i;n.d(t,{GL:()=>l,_z:()=>a,d0:()=>r,hO:()=>s,pM:()=>o});let a="video",o="image",l=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set([a])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),s=(i=new Set,l.forEach(e=>{i=new Set([...i,...e])}),i),r=new Set([...s,o,"resource"])},85835:function(e,t,n){n.d(t,{Ai:()=>P,B5:()=>h,CR:()=>c,Cc:()=>s,Dv:()=>f,Wz:()=>r,_P:()=>y,dP:()=>w,dX:()=>x,gx:()=>u,h8:()=>o,hk:()=>d,lp:()=>_,lt:()=>p,oe:()=>b,r4:()=>g,rM:()=>v});var i=n(883119),a=n(788730);let o={GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},l={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},s={...l,font:{default_size:28,letter_spacing:-.4,line_height:1.25,name:"Graphik Regular",url:"https://pinterest-taipei.s3.amazonaws.com/Graphik-Regular.otf"},font_size:28},r={...l,font:{default_size:48,letter_spacing:0,line_height:1,name:"Graphik Bold Italic",url:"https://pinterest-taipei.s3.amazonaws.com/Graphik-Bold-Italic.otf"},font_size:48},d=64,c=48,u=48,p=new i.H3([a.tD]),h=new i.H3([p]),m=new i.H3([a.tD]),_=new i.H3([m]),g=4;function y(e){return e?{paddingX:0,paddingY:0}:{paddingX:2,paddingY:g}}let f=60,b=47,x=8,v=4,P=5,w=3},590940:function(e,t,n){n.d(t,{Z:()=>a});var i=n(978097);function a(e){return{defaultStyle:0,fontFamily:e.name??"",fontGroup:i.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/97588-ceee5d5aa7b5a910.mjs.map